<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mental Health Assessment - Vivify</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        footer {
            background-color: #000;
            color: white;
            text-align: center;
            padding: 2rem 0;
            width: 100%;
            margin-top: auto;
            border-top: 1px solid #333;
        }

        footer .footer-links {
            list-style: none;
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 1rem 0 0 0;
            padding: 0;
        }

        footer .footer-links a {
            color: #a0a0a0;
            text-decoration: none;
            transition: color 0.3s;
        }

        footer .footer-links a:hover {
            color: #f39c12;
        }
        
        .assessment-hero {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
                        url('https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 6rem 2rem;
            text-align: center;
        }

        .assessment-hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .assessment-hero p {
            font-size: 1.25rem;
            max-width: 800px;
            margin: 0 auto 2rem;
        }
        
        .section-title {
            color: #f39c12;
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            text-align: center;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #333;
        }

        .section-subtitle {
            color: #f39c12;
            font-size: 1.8rem;
            margin-bottom: 1rem;
        }

        .content-section {
            max-width: 1000px;
            margin: 3rem auto;
            padding: 0 2rem;
        }

        .intro-text {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 2rem;
        }

        .disclaimer-box {
            background-color: rgba(231, 76, 60, 0.1);
            border: 2px solid #e74c3c;
            border-radius: 8px;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
        }

        .disclaimer-box h3 {
            color: #e74c3c;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .disclaimer-box h3 i {
            margin-right: 10px;
            font-size: 1.5rem;
        }

        .assessment-container {
            background-color: #222;
            border-radius: 10px;
            padding: 2rem;
            margin: 3rem 0;
        }

        .question-card {
            background-color: #333;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            transition: transform 0.3s;
        }

        .question-card:hover {
            transform: translateY(-2px);
        }

        .question-number {
            background: #f39c12;
            color: black;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 1rem;
        }

        .question-text {
            color: #fff;
            font-size: 1.1rem;
            margin-bottom: 1rem;
            display: inline-block;
            width: calc(100% - 3.5rem);
            vertical-align: top;
        }

        .options-container {
            margin-left: 3.5rem;
        }

        .option {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .option:hover {
            background-color: rgba(243, 156, 18, 0.1);
        }

        .option input[type="radio"] {
            margin-right: 0.8rem;
            transform: scale(1.2);
            accent-color: #f39c12;
        }

        .option label {
            cursor: pointer;
            flex: 1;
            color: #ddd;
        }

        .results-section {
            background-color: #2c3e50;
            border-radius: 10px;
            padding: 2rem;
            margin: 3rem 0;
            display: none;
        }

        .results-section.show {
            display: block;
        }

        .score-display {
            text-align: center;
            margin-bottom: 2rem;
        }

        .score-number {
            font-size: 3rem;
            font-weight: bold;
            color: #f39c12;
            margin-bottom: 0.5rem;
        }

        .score-category {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .score-low {
            color: #27ae60;
        }

        .score-mild {
            color: #f39c12;
        }

        .score-moderate {
            color: #e67e22;
        }

        .score-severe {
            color: #e74c3c;
        }

        .result-description {
            background-color: rgba(0,0,0,0.3);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
        }

        .recommendations {
            background-color: rgba(0,0,0,0.3);
            padding: 1.5rem;
            border-radius: 8px;
        }

        .recommendations h4 {
            color: #f39c12;
            margin-bottom: 1rem;
        }

        .recommendations ul {
            padding-left: 1.5rem;
        }

        .recommendations li {
            margin-bottom: 0.5rem;
        }

        .assessment-buttons {
            text-align: center;
            margin: 2rem 0;
        }

        .btn {
            display: inline-block;
            padding: 1rem 2rem;
            margin: 0 0.5rem;
            border: none;
            border-radius: 5px;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
        }

        .btn-primary {
            background-color: #f39c12;
            color: #000;
        }

        .btn-primary:hover {
            background-color: #e67e22;
            transform: scale(1.05);
        }

        .btn-secondary {
            background-color: #333;
            color: #fff;
        }

        .btn-secondary:hover {
            background-color: #555;
        }

        .progress-bar {
            background-color: #333;
            height: 10px;
            border-radius: 5px;
            margin: 2rem 0;
            overflow: hidden;
        }

        .progress-fill {
            background-color: #f39c12;
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            color: #f39c12;
            margin-bottom: 1rem;
        }

        .resources-quick {
            background-color: #222;
            border-radius: 10px;
            padding: 2rem;
            margin: 3rem 0;
        }

        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .resource-card {
            background-color: #333;
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
        }

        .resource-icon {
            font-size: 2.5rem;
            color: #f39c12;
            margin-bottom: 1rem;
        }

        .resource-card h4 {
            color: #f39c12;
            margin-bottom: 1rem;
        }

        .cta-button {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            background-color: #f39c12;
            color: #000;
            text-decoration: none;
            border-radius: 5px;
            font-weight: 700;
            transition: background-color 0.3s, transform 0.3s;
            text-align: center;
        }

        .cta-button:hover {
            background-color: #e67e22;
            transform: scale(1.05);
        }

        .emergency-button {
            background-color: #e74c3c;
            color: white;
        }

        .emergency-button:hover {
            background-color: #c0392b;
        }

        @media (max-width: 768px) {
            .assessment-hero h1 {
                font-size: 2.5rem;
            }
            
            .question-text {
                width: 100%;
                margin-left: 0;
            }
            
            .options-container {
                margin-left: 0;
                margin-top: 1rem;
            }
            
            .question-number {
                display: block;
                margin-bottom: 1rem;
            }
            
            .resources-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>

<!-- PWA Manifest -->
<link rel="manifest" href="/manifest.json">

<!-- iOS PWA Support -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Wellness Hub">
<link rel="apple-touch-icon" href="/icons/icon-192x192.png">
<link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/icons/icon-180x180.png">

<!-- Microsoft Tiles -->
<meta name="msapplication-TileImage" content="/icons/icon-144x144.png">
<meta name="msapplication-TileColor" content="#f39c12">

<!-- Theme Color -->
<meta name="theme-color" content="#f39c12">

<!-- Viewport for PWA -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

<!-- Preload PWA installer script -->
<link rel="preload" href="/pwa-install.js" as="script">
</head>
<body>
    <div class="wrapper">
        <header>
            <nav>
                <div class="left-nav">
                    <div class="logo">
                        <a href="index.html" aria-label="Home Page"><h1>Vivify</h1></a>
                    </div>
                    <ul>
                        <li><a href="about.html" aria-label="About Us Page">About</a></li>
                        <li class="dropdown" id="categoryDropdown">
                            <a href="#" class="dropbtn" aria-label="Categories Dropdown">Categories</a>
                            <div class="dropdown-content">
                                <a href="fitness.html" aria-label="Fitness Page">Fitness</a>
                                <a href="nutrition.html" aria-label="Nutrition Page">Nutrition</a>
                                <a href="mental-health.html" aria-label="Mental Health Page">Mental Health</a>
                                <a href="life-lessons.html" aria-label="Life Lessons Page">Life Lessons</a>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="right-nav">
                    <ul>
                        <li><a href="dashboard.html" id="dashboardLink" aria-label="Dashboard">Dashboard</a></li>
                        <li><a href="profile.html" id="profileLink" aria-label="Profile Page">Profile</a></li>
                        <li><a href="#" id="logoutLink" aria-label="Logout">Logout</a></li>
                        <li><a href="login.html" id="loginLink" style="display: none;" aria-label="Login Page">Login</a></li>
                        <li><a href="signup.html" id="signupLink" style="display: none;" aria-label="Sign Up Page">Sign Up</a></li>
                    </ul>
                </div>
            </nav>
        </header>

        <!-- Hero Section -->
        <section class="assessment-hero">
            <h1>Mental Health Self-Assessment</h1>
            <p>Take this confidential assessment to better understand your mental health and get personalized recommendations for support and resources.</p>
            <a href="#assessment-start" class="cta-button">Start Assessment</a>
        </section>

        <!-- Important Disclaimer -->
        <section class="content-section">
            <div class="disclaimer-box">
                <h3><i class="fas fa-exclamation-triangle"></i> Important Disclaimer</h3>
                <p><strong>This assessment is not a diagnostic tool and cannot replace professional medical advice.</strong></p>
                <p>This self-assessment is designed to help you reflect on your mental health and identify areas where you might benefit from support. The results are for educational purposes only. If you're experiencing severe symptoms or thoughts of self-harm, please seek immediate professional help.</p>
            </div>
        </section>

        <!-- Introduction Section -->
        <section class="content-section">
            <h2 class="section-title">Understanding Your Mental Health</h2>
            <p class="intro-text">
                Mental health exists on a spectrum, and it's normal for everyone to experience ups and downs. This assessment combines elements from validated screening tools to help you reflect on various aspects of your mental wellbeing, including mood, anxiety, stress levels, and overall functioning. Taking about 10 minutes to complete, it can help you identify patterns and areas where you might benefit from additional support or resources.
            </p>
        </section>

        <!-- Assessment Section -->
        <section id="assessment-start" class="content-section">
            <div class="assessment-container">
                <div class="progress-text">Question <span id="currentQuestion">1</span> of <span id="totalQuestions">21</span></div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>

                <div id="questionsContainer">
                    <!-- Questions will be dynamically loaded here -->
                </div>

                <div class="assessment-buttons">
                    <button class="btn btn-secondary" id="prevBtn" onclick="previousQuestion()">Previous</button>
                    <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()">Next</button>
                    <button class="btn btn-primary" id="submitBtn" onclick="calculateResults()" style="display: none;">See Results</button>
                </div>
            </div>
        </section>

        <!-- Results Section -->
        <section class="content-section">
            <div class="results-section" id="resultsSection">
                <h2 class="section-subtitle">Your Assessment Results</h2>
                
                <div class="score-display">
                    <div class="score-number" id="totalScore">0</div>
                    <div class="score-category" id="scoreCategory">Loading...</div>
                </div>

                <div class="result-description" id="resultDescription">
                    <!-- Results description will be populated here -->
                </div>

                <div class="recommendations" id="recommendations">
                    <!-- Recommendations will be populated here -->
                </div>

                <div style="text-align: center; margin-top: 2rem;">
                    <button class="btn btn-secondary" onclick="restartAssessment()">Retake Assessment</button>
                    <a href="mental-health.html" class="btn btn-primary">Explore Resources</a>
                </div>
            </div>
        </section>

        <!-- Crisis Resources -->
        <section class="content-section">
            <div class="disclaimer-box">
                <h3><i class="fas fa-phone-alt"></i> Need Immediate Help?</h3>
                <p>If you're having thoughts of self-harm or suicide, or if you're in crisis, please reach out for help immediately:</p>
                <div style="margin: 1.5rem 0;">
                    <a href="tel:1800551800" class="cta-button emergency-button">Kids Helpline: 1800 55 1800</a>
                    <a href="tel:131114" class="cta-button emergency-button">Lifeline: 13 11 14</a>
                    <a href="tel:000" class="cta-button emergency-button">Emergency: 000</a>
                </div>
            </div>
        </section>

        <!-- Quick Resources -->
        <section class="content-section">
            <div class="resources-quick">
                <h2 class="section-subtitle">Next Steps & Resources</h2>
                <p>Based on your assessment, here are some resources that might be helpful:</p>
                
                <div class="resources-grid">
                    <div class="resource-card">
                        <div class="resource-icon">
                            <i class="fas fa-user-md"></i>
                        </div>
                        <h4>Talk to a Professional</h4>
                        <p>Consider speaking with a school counsellor, GP, or mental health professional for personalized support.</p>
                        <a href="therapy-options.html" class="cta-button">Find Help</a>
                    </div>
                    
                    <div class="resource-card">
                        <div class="resource-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <h4>Learn Coping Strategies</h4>
                        <p>Explore evidence-based techniques for managing stress, anxiety, and improving your mental wellbeing.</p>
                        <a href="stress-management.html" class="cta-button">Learn Strategies</a>
                    </div>
                    
                    <div class="resource-card">
                        <div class="resource-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h4>Connect with Support</h4>
                        <p>Build your support network and learn how to strengthen relationships with friends and family.</p>
                        <a href="social-connection.html" class="cta-button">Build Connections</a>
                    </div>
                    
                    <div class="resource-card">
                        <div class="resource-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <h4>Practice Self-Care</h4>
                        <p>Develop a self-care routine that includes mindfulness, self-compassion, and healthy habits.</p>
                        <a href="self-compassion.html" class="cta-button">Start Self-Care</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Call to Action -->
        <section class="content-section" style="text-align: center; margin: 3rem 10;">
            <a href="mental-health.html" class="cta-button">Explore All Mental Health Resources</a>
        </section>

        <!-- Footer -->
        <footer>
            <p>&copy; 2025 Vivify. All rights reserved.</p>
            <ul class="footer-links">
                <li><a href="privacy.html" aria-label="Privacy Policy">Privacy Policy</a></li>
                <li><a href="terms.html" aria-label="Terms of Service">Terms of Service</a></li>
                <li><a href="contact.html" aria-label="Contact Us">Contact Us</a></li>
            </ul>
        </footer>
    </div>

    <script>
        // Assessment Questions and Logic
        const questions = [
            {
                text: "Over the past two weeks, how often have you felt down, depressed, or hopeless?",
                options: [
                    { text: "Not at all", value: 0 },
                    { text: "Several days", value: 1 },
                    { text: "More than half the days", value: 2 },
                    { text: "Nearly every day", value: 3 }
                ]
            },
            {
                text: "Over the past two weeks, how often have you had little interest or pleasure in doing things?",
                options: [
                    { text: "Not at all", value: 0 },
                    { text: "Several days", value: 1 },
                    { text: "More than half the days", value: 2 },
                    { text: "Nearly every day", value: 3 }
                ]
            },
            {
                text: "How often do you feel nervous, anxious, or on edge?",
                options: [
                    { text: "Not at all", value: 0 },
                    { text: "Several days", value: 1 },
                    { text: "More than half the days", value: 2 },
                    { text: "Nearly every day", value: 3 }
                ]
            },
            {
                text: "How often do you worry about different things?",
                options: [
                    { text: "Not at all", value: 0 },
                    { text: "Several days", value: 1 },
                    { text: "More than half the days", value: 2 },
                    { text: "Nearly every day", value: 3 }
                ]
            },
            {
                text: "How has your sleep been lately?",
                options: [
                    { text: "Sleeping well, feeling rested", value: 0 },
                    { text: "Some minor sleep issues", value: 1 },
                    { text: "Frequent sleep problems", value: 2 },
                    { text: "Severe sleep disturbances", value: 3 }
                ]
            },
            {
                text: "How would you rate your energy levels recently?",
                options: [
                    { text: "High energy, feeling great", value: 0 },
                    { text: "Normal energy levels", value: 1 },
                    { text: "Lower energy than usual", value: 2 },
                    { text: "Very low energy, constant fatigue", value: 3 }
                ]
            },
            {
                text: "How often do you feel overwhelmed by daily responsibilities?",
                options: [
                    { text: "Rarely or never", value: 0 },
                    { text: "Sometimes", value: 1 },
                    { text: "Often", value: 2 },
                    { text: "Almost always", value: 3 }
                ]
            },
            {
                text: "How is your appetite compared to usual?",
                options: [
                    { text: "Normal appetite", value: 0 },
                    { text: "Slightly increased or decreased", value: 1 },
                    { text: "Moderately changed", value: 2 },
                    { text: "Significantly increased or decreased", value: 3 }
                ]
            },
            {
                text: "How often do you have trouble concentrating on school, work, or other activities?",
                options: [
                    { text: "Not at all", value: 0 },
                    { text: "Several days", value: 1 },
                    { text: "More than half the days", value: 2 },
                    { text: "Nearly every day", value: 3 }
                ]
            },
            {
                text: "How connected do you feel to your friends and family?",
                options: [
                    { text: "Very connected and supported", value: 0 },
                    { text: "Mostly connected", value: 1 },
                    { text: "Somewhat disconnected", value: 2 },
                    { text: "Very isolated and alone", value: 3 }
                ]
            },
            {
                text: "How often do you engage in activities you enjoy?",
                options: [
                    { text: "Regularly, several times a week", value: 0 },
                    { text: "Sometimes, once a week", value: 1 },
                    { text: "Rarely, once or twice a month", value: 2 },
                    { text: "Almost never", value: 3 }
                ]
            },
            {
                text: "How would you rate your overall stress levels?",
                options: [
                    { text: "Low stress, manageable", value: 0 },
                    { text: "Moderate stress", value: 1 },
                    { text: "High stress", value: 2 },
                    { text: "Overwhelming stress", value: 3 }
                ]
            },
            {
                text: "How often do you feel like you can cope with problems that come up?",
                options: [
                    { text: "Almost always", value: 0 },
                    { text: "Usually", value: 1 },
                    { text: "Sometimes", value: 2 },
                    { text: "Rarely or never", value: 3 }
                ]
            },
            {
                text: "How has your motivation been for school or other responsibilities?",
                options: [
                    { text: "High motivation", value: 0 },
                    { text: "Normal motivation", value: 1 },
                    { text: "Lower motivation than usual", value: 2 },
                    { text: "Very low or no motivation", value: 3 }
                ]
            },
            {
                text: "How often do you feel irritable or have angry outbursts?",
                options: [
                    { text: "Rarely or never", value: 0 },
                    { text: "Sometimes", value: 1 },
                    { text: "Often", value: 2 },
                    { text: "Very frequently", value: 3 }
                ]
            },
            {
                text: "How satisfied are you with your life right now?",
                options: [
                    { text: "Very satisfied", value: 0 },
                    { text: "Mostly satisfied", value: 1 },
                    { text: "Somewhat dissatisfied", value: 2 },
                    { text: "Very dissatisfied", value: 3 }
                ]
            },
            {
                text: "How often do you feel like you're not good enough or that you've failed?",
                options: [
                    { text: "Rarely or never", value: 0 },
                    { text: "Sometimes", value: 1 },
                    { text: "Often", value: 2 },
                    { text: "Most of the time", value: 3 }
                ]
            },
            {
                text: "How often do you use alcohol, drugs, or other substances to cope with feelings?",
                options: [
                    { text: "Never", value: 0 },
                    { text: "Rarely", value: 1 },
                    { text: "Sometimes", value: 2 },
                    { text: "Often or regularly", value: 3 }
                ]
            },
            {
                text: "Have you had thoughts of hurting yourself or that you'd be better off dead?",
                options: [
                    { text: "Not at all", value: 0 },
                    { text: "Several days", value: 1 },
                    { text: "More than half the days", value: 2 },
                    { text: "Nearly every day", value: 3 }
                ]
            },
            {
                text: "How hopeful do you feel about your future?",
                options: [
                    { text: "Very hopeful and optimistic", value: 0 },
                    { text: "Mostly hopeful", value: 1 },
                    { text: "Somewhat hopeless", value: 2 },
                    { text: "Very hopeless", value: 3 }
                ]
            },
            {
                text: "Overall, how would you rate your mental health right now?",
                options: [
                    { text: "Excellent", value: 0 },
                    { text: "Good", value: 1 },
                    { text: "Fair", value: 2 },
                    { text: "Poor", value: 3 }
                ]
            }
        ];

        let currentQuestionIndex = 0;
        let answers = [];

        function initializeAssessment() {
            document.getElementById('totalQuestions').textContent = questions.length;
            showQuestion(0);
        }

        function showQuestion(index) {
            const container = document.getElementById('questionsContainer');
            const question = questions[index];
            
            let optionsHtml = '';
            question.options.forEach((option, optionIndex) => {
                const isChecked = answers[index] === option.value ? 'checked' : '';
                optionsHtml += `
                    <div class="option">
                        <input type="radio" id="q${index}_o${optionIndex}" name="question${index}" value="${option.value}" ${isChecked} onchange="recordAnswer(${index}, ${option.value})">
                        <label for="q${index}_o${optionIndex}">${option.text}</label>
                    </div>
                `;
            });

            container.innerHTML = `
                <div class="question-card">
                    <span class="question-number">${index + 1}</span>
                    <div class="question-text">${question.text}</div>
                    <div class="options-container">
                        ${optionsHtml}
                    </div>
                </div>
            `;

            // Update progress
            const progress = ((index + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = index + 1;

            // Update buttons
            document.getElementById('prevBtn').style.display = index === 0 ? 'none' : 'inline-block';
            document.getElementById('nextBtn').style.display = index === questions.length - 1 ? 'none' : 'inline-block';
            document.getElementById('submitBtn').style.display = index === questions.length - 1 ? 'inline-block' : 'none';
        }

        function recordAnswer(questionIndex, value) {
            answers[questionIndex] = value;
        }

        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                showQuestion(currentQuestionIndex);
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion(currentQuestionIndex);
            }
        }

        function calculateResults() {
            // Check if all questions are answered
            if (answers.length < questions.length || answers.some(answer => answer === undefined)) {
                alert('Please answer all questions before viewing results.');
                return;
            }

            const totalScore = answers.reduce((sum, answer) => sum + answer, 0);
            const maxScore = questions.length * 3;

            document.getElementById('totalScore').textContent = totalScore;

            let category, description, recommendations;

            if (totalScore <= 15) {
                category = 'Low Risk';
                document.getElementById('scoreCategory').className = 'score-low';
               description = `
                   <h4>Low Risk</h4>
                   <p>Your responses suggest that you're currently experiencing minimal signs of mental health distress. You appear to be coping well with daily challenges and maintaining good emotional wellbeing. This is a positive indicator of your current mental health status.</p>
                   <p>While your scores are in a healthy range, it's still important to maintain good mental health habits and be aware of any changes in your wellbeing over time.</p>
               `;
               recommendations = `
                   <h4>Recommendations:</h4>
                   <ul>
                       <li>Continue maintaining your current healthy coping strategies</li>
                       <li>Keep up with regular exercise, good sleep habits, and social connections</li>
                       <li>Consider learning about mental health to support friends and family</li>
                       <li>Practice preventive self-care to maintain your wellbeing</li>
                       <li>Stay connected with your support network</li>
                       <li>Be aware of any changes in your mood or stress levels</li>
                   </ul>
               `;
           } else if (totalScore <= 30) {
               category = 'Mild Concerns';
               document.getElementById('scoreCategory').className = 'score-mild';
               description = `
                   <h4>Mild Concerns</h4>
                   <p>Your responses indicate that you may be experiencing some mild mental health challenges or stress. This could include occasional anxiety, low mood, or difficulty coping with certain situations. These feelings are common, especially during stressful periods like exams or major life changes.</p>
                   <p>While these symptoms are manageable, it's a good time to focus on self-care and consider reaching out for support to prevent symptoms from worsening.</p>
               `;
               recommendations = `
                   <h4>Recommendations:</h4>
                   <ul>
                       <li>Focus on stress management techniques like deep breathing or mindfulness</li>
                       <li>Ensure you're getting adequate sleep, exercise, and nutrition</li>
                       <li>Talk to trusted friends, family, or a school counsellor</li>
                       <li>Consider learning new coping strategies for stress and anxiety</li>
                       <li>Monitor your symptoms and seek help if they worsen</li>
                       <li>Engage in activities you enjoy and that help you relax</li>
                       <li>Consider preventive mental health resources</li>
                   </ul>
               `;
           } else if (totalScore <= 45) {
               category = 'Moderate Concerns';
               document.getElementById('scoreCategory').className = 'score-moderate';
               description = `
                   <h4>Moderate Concerns</h4>
                   <p>Your responses suggest that you're experiencing moderate mental health challenges that may be impacting your daily life, relationships, or school performance. You might be dealing with persistent anxiety, depression, stress, or other emotional difficulties.</p>
                   <p>At this level, it's important to reach out for professional support. These symptoms are treatable, and getting help early can prevent them from becoming more severe.</p>
               `;
               recommendations = `
                   <h4>Recommendations:</h4>
                   <ul>
                       <li><strong>Seek professional help:</strong> Talk to a school counsellor, GP, or mental health professional</li>
                       <li>Consider counselling or therapy to develop coping strategies</li>
                       <li>Reach out to trusted adults like parents, teachers, or family members</li>
                       <li>Learn about mental health conditions and treatment options</li>
                       <li>Practice daily stress management and self-care routines</li>
                       <li>Stay connected with supportive friends and family</li>
                       <li>Consider whether school accommodations might be helpful</li>
                       <li>Avoid alcohol and drugs as coping mechanisms</li>
                   </ul>
               `;
           } else {
               category = 'Higher Risk';
               document.getElementById('scoreCategory').className = 'score-severe';
               description = `
                   <h4>Higher Risk</h4>
                   <p>Your responses indicate that you may be experiencing significant mental health challenges that are likely affecting multiple areas of your life. You might be dealing with severe anxiety, depression, or other serious emotional difficulties.</p>
                   <p><strong>It's important to seek professional help as soon as possible.</strong> These symptoms are serious but treatable with proper support and care.</p>
               `;
               recommendations = `
                   <h4>Immediate Recommendations:</h4>
                   <ul>
                       <li><strong>Seek immediate professional help:</strong> Contact a GP, school counsellor, or mental health service</li>
                       <li><strong>If you're having thoughts of self-harm:</strong> Call Kids Helpline (1800 55 1800) or Lifeline (13 11 14) immediately</li>
                       <li>Tell a trusted adult about how you're feeling</li>
                       <li>Don't face this alone - reach out to family, friends, or professionals</li>
                       <li>Consider whether you need time off school or other accommodations</li>
                       <li>Avoid alcohol and drugs which can worsen symptoms</li>
                       <li>Focus on basic self-care: eating, sleeping, and staying safe</li>
                       <li>Know that with proper help, you can feel better</li>
                   </ul>
               `;
           }

           document.getElementById('scoreCategory').textContent = category;
           document.getElementById('resultDescription').innerHTML = description;
           document.getElementById('recommendations').innerHTML = recommendations;

           // Show results section and hide assessment
           document.querySelector('.assessment-container').style.display = 'none';
           document.getElementById('resultsSection').classList.add('show');

           // Special handling for high-risk responses
           if (totalScore > 45 || answers[18] > 0) { // Question 19 is about self-harm thoughts
               showCrisisAlert();
           }
       }

       function showCrisisAlert() {
           const alertHtml = `
               <div style="background-color: rgba(231, 76, 60, 0.2); border: 2px solid #e74c3c; padding: 2rem; border-radius: 10px; margin: 2rem 0; text-align: center;">
                   <h3 style="color: #e74c3c; margin-bottom: 1rem;"><i class="fas fa-exclamation-triangle"></i> Immediate Support Available</h3>
                   <p>Your responses indicate you may be going through a very difficult time. Please know that help is available and things can get better.</p>
                   <div style="margin: 1.5rem 0;">
                       <a href="tel:1800551800" class="cta-button emergency-button">Call Kids Helpline: 1800 55 1800</a>
                       <a href="tel:131114" class="cta-button emergency-button">Call Lifeline: 13 11 14</a>
                   </div>
                   <p>These services are free, confidential, and available 24/7. You don't have to go through this alone.</p>
               </div>
           `;
           document.getElementById('resultsSection').insertAdjacentHTML('afterbegin', alertHtml);
       }

       function restartAssessment() {
           currentQuestionIndex = 0;
           answers = [];
           document.querySelector('.assessment-container').style.display = 'block';
           document.getElementById('resultsSection').classList.remove('show');
           initializeAssessment();
       }

       // Initialize assessment when page loads
       document.addEventListener('DOMContentLoaded', function() {
           // Standard login/logout handling
           const isLoggedIn = localStorage.getItem('userLoggedIn') === 'true';
           
           document.getElementById('loginLink').style.display = isLoggedIn ? 'none' : 'inline';
           document.getElementById('signupLink').style.display = isLoggedIn ? 'none' : 'inline';
           document.getElementById('logoutLink').style.display = isLoggedIn ? 'inline' : 'none';
           document.getElementById('profileLink').style.display = isLoggedIn ? 'inline' : 'none';
           document.getElementById('dashboardLink').style.display = isLoggedIn ? 'inline' : 'none';
           
           document.getElementById('logoutLink').addEventListener('click', function(e) {
               e.preventDefault();
               localStorage.removeItem('userLoggedIn');
               localStorage.removeItem('authToken');
               window.location.href = 'index.html';
           });

           // Initialize the assessment
           initializeAssessment();

           // Smooth scrolling for anchor links
           document.querySelectorAll('a[href^="#"]').forEach(anchor => {
               anchor.addEventListener('click', function (e) {
                   e.preventDefault();
                   const target = document.querySelector(this.getAttribute('href'));
                   if (target) {
                       target.scrollIntoView({
                           behavior: 'smooth',
                           block: 'start'
                       });
                   }
               });
           });
       });
   </script>

<!-- PWA Scripts -->
<script src="/pwa-install.js"></script>

<script>
// Additional PWA features for each page
document.addEventListener('DOMContentLoaded', function() {
    // Add PWA-specific styles
    if (window.matchMedia('(display-mode: standalone)').matches) {
        document.body.classList.add('pwa-mode');
        
        // Hide address bar on mobile when in PWA mode
        window.scrollTo(0, 1);
    }
    
    // Handle network status
    function updateOnlineStatus() {
        const statusElement = document.getElementById('network-status');
        if (statusElement) {
            if (navigator.onLine) {
                statusElement.textContent = 'Online';
                statusElement.className = 'online';
            } else {
                statusElement.textContent = 'Offline';
                statusElement.className = 'offline';
            }
        }
    }
    
    window.addEventListener('online', updateOnlineStatus);
    window.addEventListener('offline', updateOnlineStatus);
    updateOnlineStatus();
    
    // Add network status indicator if it doesn't exist
    if (!document.getElementById('network-status')) {
        const statusDiv = document.createElement('div');
        statusDiv.id = 'network-status';
        statusDiv.style.cssText = `
            position: fixed;
            top: 10px;
            left: 10px;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            z-index: 1000;
            transition: all 0.3s ease;
        `;
        document.body.appendChild(statusDiv);
        updateOnlineStatus();
    }
});
</script>
<script src="class-management.js"></script> </body>
</html>