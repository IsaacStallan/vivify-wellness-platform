<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nutrition Calculator - Vivify</title>
    
    
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Add Font Awesome for icons -->
    
    <style>
        /* Footer styles to ensure it stays at bottom */
        footer {
            background-color: #000;
            color: white;
            text-align: center;
            padding: 2rem 0;
            width: 100%;
            margin-top: auto;
            border-top: 1px solid #333;
        }

        footer .footer-links {
            list-style: none;
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 1rem 0 0 0;
            padding: 0;
        }

        footer .footer-links a {
            color: #a0a0a0;
            text-decoration: none;
            transition: color 0.3s;
        }

        footer .footer-links a:hover {
            color: #f39c12;
        }
        /* Calculator Specific Styles */
        .calculator-hero {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
                        url('https://images.unsplash.com/photo-1512621776951-a57141f2eefd?auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 4rem 2rem;
            text-align: center;
        }

        .calculator-hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .calculator-hero p {
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto 1rem;
        }

        .calculator-container {
            max-width: 800px;
            margin: 3rem auto;
            padding: 0 1.5rem;
        }

        .calculator {
            background-color: #222;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .calculator h2 {
            color: #f39c12;
            margin-top: 0;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #ddd;
            font-weight: 500;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 0.8rem;
            border-radius: 5px;
            border: 1px solid #444;
            background-color: #333;
            color: white;
            font-size: 1rem;
        }

        .form-group select {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 1em;
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .form-row > .form-group {
            flex: 1 0 200px;
        }

        .calculator-btn {
            display: block;
            width: 100%;
            padding: 1rem;
            background-color: #f39c12;
            color: black;
            border: none;
            border-radius: 5px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 2rem;
        }

        .calculator-btn:hover {
            background-color: #e67e22;
        }

        .results {
            background-color: #222;
            border-radius: 10px;
            padding: 2rem;
            margin-top: 2rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            display: none;
        }

        .results h2 {
            color: #f39c12;
            margin-top: 0;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .result-card {
            background-color: #333;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .result-card h3 {
            color: #f39c12;
            margin-top: 0;
            margin-bottom: 0.5rem;
        }

        .result-card .value {
            font-size: 2rem;
            font-weight: 700;
            color: white;
            margin-bottom: 0.5rem;
        }

        .result-card p {
            color: #aaa;
            margin-bottom: 0;
            font-size: 0.9rem;
        }

        .macros-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .macro-item {
            background-color: #333;
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
        }

        .macro-item h4 {
            color: #f39c12;
            margin-top: 0;
            margin-bottom: 0.5rem;
        }

        .macro-item .value {
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
        }

        .macro-item .subvalue {
            font-size: 0.9rem;
            color: #aaa;
        }

        .nutrients-breakdown {
            background-color: #333;
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 1.5rem;
        }

        .nutrients-breakdown h3 {
            color: #f39c12;
            margin-top: 0;
            margin-bottom: 1rem;
            text-align: center;
        }

        .nutrient-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .nutrient-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid #444;
        }

        .nutrient-item:last-child {
            border-bottom: none;
        }

        .nutrient-name {
            color: #ddd;
        }

        .nutrient-value {
            color: white;
            font-weight: 500;
        }

        .tips-container {
            margin-top: 2rem;
        }

        .tips-title {
            color: #f39c12;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .tips-list {
            background-color: #222;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .tip-item {
            display: flex;
            margin-bottom: 1.5rem;
            gap: 1rem;
        }

        .tip-item:last-child {
            margin-bottom: 0;
        }

        .tip-icon {
            font-size: 1.8rem;
            color: #f39c12;
            flex-shrink: 0;
        }

        .tip-content h4 {
            color: #f39c12;
            margin-top: 0;
            margin-bottom: 0.5rem;
        }

        .tip-content p {
            color: #ddd;
            margin-bottom: 0;
            line-height: 1.5;
        }

        .back-link {
            display: inline-block;
            margin-top: 2rem;
            color: #f39c12;
            text-decoration: none;
            transition: color 0.3s;
        }

        .back-link:hover {
            color: #e67e22;
        }

        .academic-section {
            margin-top: 3rem;
            background-color: #222;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .academic-section h2 {
            color: #f39c12;
            margin-top: 0;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .academic-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .academic-card {
            background-color: #333;
            border-radius: 8px;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .academic-card h3 {
            color: #f39c12;
            margin-top: 0;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .academic-card i {
            font-size: 1.4rem;
        }

        .academic-card p {
            color: #ddd;
            margin-bottom: 0;
            line-height: 1.5;
            flex-grow: 1;
        }

        .academic-card ul {
            color: #ddd;
            margin-bottom: 0;
            padding-left: 1.5rem;
        }

        .academic-card li {
            margin-bottom: 0.5rem;
        }

        @media (max-width: 768px) {
            .calculator-hero h1 {
                font-size: 2.5rem;
            }
        }
    </style>
<!-- CSS Loading Order Fix -->

<link rel="stylesheet" href="styles.css">

<!-- FOUC Prevention -->
<style>
    html { visibility: hidden; opacity: 0; }
    html.loaded { visibility: visible; opacity: 1; transition: opacity 0.3s ease; }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        document.documentElement.classList.add('loaded');
    });
    window.addEventListener('load', function() {
        document.documentElement.classList.add('loaded');
    });
</script>
<script 
    src="js/vivify-stats.js"
    src="js/leaderboard-system.js">
</script>  
</head>
<body>
    <div class="wrapper">
        <header>
            <nav>
                <div class="left-nav">
                    <div class="logo">
                        <a href="index.html" aria-label="Home Page"><h1>Vivify</h1></a>
                    </div>
                    <ul>
                        <li><a href="about.html" aria-label="About Us Page">About</a></li>
                        <li class="dropdown" id="categoryDropdown">
                            <a href="#" class="dropbtn" aria-label="Categories Dropdown">Training</a>
                            <div class="dropdown-content">
                                <a href="fitness.html" aria-label="Fitness Page">Fitness</a>
                                <a href="nutrition.html" class="active" aria-label="Nutrition Page">Nutrition</a>
                                <a href="focus-resilience.html" aria-label="Focus & Resilience Page">Focus & Resilience</a>
                                <a href="life-mastery.html" aria-label="Life Lessons Page">Life Mastery</a>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="right-nav">
                    <ul>
                        <li><a href="profile.html" id="profileLink" aria-label="Profile Page">Profile</a></li>
                        <li><a href="#" id="logoutLink" aria-label="Logout">Logout</a></li>
                        <li><a href="login.html" id="loginLink" style="display: none;" aria-label="Login Page">Login</a></li>
                        <li><a href="signup.html" id="signupLink" style="display: none;" aria-label="Sign Up Page">Sign Up</a></li>
                    </ul>
                </div>
            </nav>
        </header>

        <!-- Hero Section -->
        <section class="calculator-hero">
            <h1>Personalized Nutrition Calculator</h1>
            <p>Discover your unique calorie and nutrient needs based on your body, lifestyle, and academic goals.</p>
        </section>

        <!-- Calculator Section -->
        <section class="calculator-container">
            <div class="calculator">
                <h2>Calculate Your Optimal Nutrition Plan</h2>
                <form id="calculator-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="age">Age</label>
                            <input type="number" id="age" min="16" max="70" required>
                        </div>
                        <div class="form-group">
                            <label for="gender">Gender</label>
                            <select id="gender" required>
                                <option value="">Select</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="weight">Weight (kg)</label>
                            <input type="number" id="weight" min="40" max="200" step="0.1" required>
                        </div>
                        <div class="form-group">
                            <label for="height">Height (cm)</label>
                            <input type="number" id="height" min="140" max="220" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="activity">Activity Level</label>
                        <select id="activity" required>
                            <option value="">Select</option>
                            <option value="1.2">Sedentary (mostly sitting, little physical activity)</option>
                            <option value="1.375">Lightly Active (light walking/standing throughout day, 1-2 days exercise/week)</option>
                            <option value="1.55">Moderately Active (active throughout day, exercise 3-5 days/week)</option>
                            <option value="1.725">Very Active (physically demanding lifestyle or exercise 6-7 days/week)</option>
                            <option value="1.9">Extremely Active (physically demanding job plus intense exercise, or twice daily training)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="goal">Nutritional Goal</label>
                        <select id="goal" required>
                            <option value="">Select</option>
                            <option value="maintain">Maintain Current Weight</option>
                            <option value="lose">Gradual Weight Loss (0.5kg/week)</option>
                            <option value="gain">Gradual Weight Gain (0.5kg/week)</option>
                            <option value="performance">Academic Performance Focus</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="stress">Current Stress Level</label>
                        <select id="stress" required>
                            <option value="">Select</option>
                            <option value="low">Low (feeling calm and in control)</option>
                            <option value="moderate">Moderate (occasional stress, managing well)</option>
                            <option value="high">High (frequent stress, impacts daily life)</option>
                            <option value="very-high">Very High (exam period, major life changes)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="sleep">Average Sleep Duration</label>
                        <select id="sleep" required>
                            <option value="">Select</option>
                            <option value="less-5">Less than 5 hours</option>
                            <option value="5-6">5-6 hours</option>
                            <option value="7-8">7-8 hours</option>
                            <option value="more-8">More than 8 hours</option>
                        </select>
                    </div>
                    
                    <button type="submit" class="calculator-btn">Calculate My Nutrition Plan</button>
                </form>
            </div>
            
            <div class="results" id="results">
                <h2>Your Personalized Nutrition Plan</h2>
                
                <div class="result-card">
                    <h3>Daily Calorie Target</h3>
                    <div class="value" id="calorie-result">0</div>
                    <p>Calories per day to support your goals and lifestyle</p>
                </div>
                
                <h3 style="text-align: center; color: #f39c12; margin-top: 2rem;">Macronutrient Breakdown</h3>
                <div class="macros-breakdown">
                    <div class="macro-item">
                        <h4>Protein</h4>
                        <div class="value" id="protein-grams">0g</div>
                        <div class="subvalue" id="protein-calories">0 calories</div>
                        <div class="subvalue" id="protein-percent">0%</div>
                    </div>
                    
                    <div class="macro-item">
                        <h4>Carbohydrates</h4>
                        <div class="value" id="carbs-grams">0g</div>
                        <div class="subvalue" id="carbs-calories">0 calories</div>
                        <div class="subvalue" id="carbs-percent">0%</div>
                    </div>
                    
                    <div class="macro-item">
                        <h4>Fats</h4>
                        <div class="value" id="fats-grams">0g</div>
                        <div class="subvalue" id="fats-calories">0 calories</div>
                        <div class="subvalue" id="fats-percent">0%</div>
                    </div>
                </div>
                
                <div class="nutrients-breakdown">
                    <h3>Key Nutrients Focus</h3>
                    <div class="nutrient-grid">
                        <div class="nutrient-item">
                            <span class="nutrient-name">Water</span>
                            <span class="nutrient-value" id="water-result">0 ml</span>
                        </div>
                        <div class="nutrient-item">
                            <span class="nutrient-name">Fiber</span>
                            <span class="nutrient-value" id="fiber-result">0g</span>
                        </div>
                        <div class="nutrient-item">
                            <span class="nutrient-name">Vitamin D</span>
                            <span class="nutrient-value">600-800 IU</span>
                        </div>
                        <div class="nutrient-item">
                            <span class="nutrient-name">Vitamin B12</span>
                            <span class="nutrient-value">2.4 mcg</span>
                        </div>
                        <div class="nutrient-item">
                            <span class="nutrient-name">Iron</span>
                            <span class="nutrient-value" id="iron-result">0 mg</span>
                        </div>
                        <div class="nutrient-item">
                            <span class="nutrient-name">Calcium</span>
                            <span class="nutrient-value">1000 mg</span>
                        </div>
                        <div class="nutrient-item">
                            <span class="nutrient-name">Omega-3</span>
                            <span class="nutrient-value">1.1-1.6g</span>
                        </div>
                        <div class="nutrient-item">
                            <span class="nutrient-name">Magnesium</span>
                            <span class="nutrient-value">310-420 mg</span>
                        </div>
                    </div>
                </div>
                
                <div id="recommendations-section"></div>
                
                <a href="balanced-nutrition.html" class="back-link">&larr; Back to Balanced Nutrition Guide</a>
            </div>
        </section>
        
        <!-- Academic Performance Section -->
        <section class="academic-section">
            <h2>Nutrition Optimization for Academic Success</h2>
            
            <div class="academic-grid">
                <div class="academic-card">
                    <h3><i class="fas fa-brain"></i> Cognitive Function</h3>
                    <p>Research shows that balanced nutrition directly impacts cognitive performance. Students who maintain consistent, nutritious eating patterns demonstrate:</p>
                    <ul>
                        <li>15-25% improved memory retention</li>
                        <li>Better information processing speed</li>
                        <li>Enhanced problem-solving abilities</li>
                        <li>Longer sustained attention spans</li>
                    </ul>
                </div>
                
                <div class="academic-card">
                    <h3><i class="fas fa-clock"></i> Exam Preparation</h3>
                    <p>Nutrition significantly impacts exam performance. Strategic nutrition in the weeks before and during exams can help:</p>
                    <ul>
                        <li>Stabilize energy levels during long study sessions</li>
                        <li>Improve information recall under pressure</li>
                        <li>Reduce test anxiety through balanced blood sugar</li>
                        <li>Support focus during critical testing periods</li>
                    </ul>
                </div>
                
                <div class="academic-card">
                    <h3><i class="fas fa-bed"></i> Sleep Quality</h3>
                    <p>Nutrition directly affects sleep quality, which is critical for academic performance. Proper nutrition can:</p>
                    <ul>
                        <li>Help regulate sleep-wake cycles</li>
                        <li>Reduce time needed to fall asleep</li>
                        <li>Improve overall sleep quality and duration</li>
                        <li>Support memory consolidation during sleep</li>
                    </ul>
                </div>
                
                <div class="academic-card">
                    <h3><i class="fas fa-heartbeat"></i> Stress Resilience</h3>
                    <p>Proper nutrition builds resilience to academic stress. Students with balanced nutrition demonstrate:</p>
                    <ul>
                        <li>Better cortisol regulation during high-stress periods</li>
                        <li>Improved emotional regulation</li>
                        <li>Reduced incidence of stress-related illnesses</li>
                        <li>Faster recovery from intense academic challenges</li>
                    </ul>
                </div>
            </div>
        </section>
        
        <!-- Tips Section -->
        <section class="tips-container">
            <h2 class="tips-title">How to Apply Your Nutrition Plan</h2>
            
            <div class="tips-list">
                <div class="tip-item">
                    <div class="tip-icon">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <div class="tip-content">
                        <h4>Weekly Preparation</h4>
                        <p>Spend 1-2 hours each weekend planning and prepping balanced meals based on your calculated needs. Batch cook proteins, portion snacks, and chop vegetables to make weekday nutrition effortless. Consider using meal planning apps that calculate macronutrients to simplify tracking.</p>
                    </div>
                </div>
                
                <div class="tip-item">
                    <div class="tip-icon">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <div class="tip-content">
                        <h4>Meal Distribution</h4>
                        <p>Distribute your caloric intake across the day according to your schedule and hunger patterns. Most students benefit from 3 balanced meals plus 1-2 strategic snacks. If you have early classes, ensure your breakfast contains protein and complex carbs. For late study sessions, plan a balanced evening snack.</p>
                    </div>
                </div>
                
                <div class="tip-item">
                    <div class="tip-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <div class="tip-content">
                        <h4>Academic Schedule Alignment</h4>
                        <p>Sync your nutrition with your academic demands. Increase complex carbs on exam days, prioritize protein and healthy fats for long study sessions, and ensure proper hydration during classes. Avoid heavy meals before important lectures or tests that could cause energy dips.</p>
                    </div>
                </div>
                
                <div class="tip-item">
                    <div class="tip-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="tip-content">
                        <h4>Track Progress</h4>
                        <p>Monitor how your nutrition affects your academic performance, energy levels, and overall wellbeing. Notice patterns between what you eat and how you feel or perform. Adjust your nutrition plan based on these observations, especially during high-stress academic periods.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer>
            <p>&copy; 2024 Vivify. All rights reserved.</p>
            <ul class="footer-links">
                <li><a href="privacy.html" aria-label="Privacy Policy">Privacy Policy</a></li>
                <li><a href="terms.html" aria-label="Terms of Service">Terms of Service</a></li>
                <li><a href="contact.html" aria-label="Contact Us">Contact Us</a></li>
            </ul>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is logged in
            const isLoggedIn = localStorage.getItem('userLoggedIn') === 'true';
            
            // Update UI based on login status
            document.getElementById('loginLink').style.display = isLoggedIn ? 'none' : 'inline';
            document.getElementById('signupLink').style.display = isLoggedIn ? 'none' : 'inline';
            document.getElementById('logoutLink').style.display = isLoggedIn ? 'inline' : 'none';
            document.getElementById('profileLink').style.display = isLoggedIn ? 'inline' : 'none';
            
            // Handle logout
            document.getElementById('logoutLink').addEventListener('click', function(e) {
                e.preventDefault();
                localStorage.removeItem('userLoggedIn');
                window.location.href = 'index.html';
            });
            
            // Calculator functionality
            const calculatorForm = document.getElementById('calculator-form');
            const resultsSection = document.getElementById('results');
            const recommendationsSection = document.getElementById('recommendations-section');
            
            calculatorForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Get input values
                const age = parseInt(document.getElementById('age').value);
                const gender = document.getElementById('gender').value;
                const weight = parseFloat(document.getElementById('weight').value);
                const height = parseInt(document.getElementById('height').value);
                const activityLevel = parseFloat(document.getElementById('activity').value);
                const goal = document.getElementById('goal').value;
                const stressLevel = document.getElementById('stress').value;
                const sleepDuration = document.getElementById('sleep').value;
                
                // Calculate BMR (Basal Metabolic Rate) using Mifflin-St Jeor Equation
                let bmr;
                if (gender === 'male') {
                    bmr = (10 * weight) + (6.25 * height) - (5 * age) + 5;
                } else {
                    bmr = (10 * weight) + (6.25 * height) - (5 * age) - 161;
                }
                
                // Calculate TDEE (Total Daily Energy Expenditure)
                const tdee = Math.round(bmr * activityLevel);
                
                // Calculate target calories based on goal
                let targetCalories;
                let proteinMultiplier;
                let initialCarbPercent;
                let initialFatPercent;
                
                switch(goal) {
                    case 'lose':
                        targetCalories = Math.round(tdee - 500); // 500 calorie deficit
                        proteinMultiplier = 2.0; // Higher protein for preserving muscle during weight loss
                        initialCarbPercent = 40;
                        initialFatPercent = 30;
                        break;
                    case 'gain':
                        targetCalories = Math.round(tdee + 500); // 500 calorie surplus
                        proteinMultiplier = 1.8; // Moderate-high protein for muscle growth
                        initialCarbPercent = 50;
                        initialFatPercent = 25;
                        break;
                    case 'performance':
                        targetCalories = Math.round(tdee + 100); // Slight surplus for brain function
                        proteinMultiplier = 1.6; // Moderate protein
                        initialCarbPercent = 55; // Higher carbs for brain function
                        initialFatPercent = 25;
                        break;
                    default: // maintain
                        targetCalories = tdee;
                        proteinMultiplier = 1.6; // Moderate protein
                        initialCarbPercent = 50;
                        initialFatPercent = 30;
                }
                
                // Adjust for stress and sleep
                if (stressLevel === 'high' || stressLevel === 'very-high') {
                    // Increased calories for stress response, higher protein for recovery
                    targetCalories = Math.round(targetCalories * 1.05);
                    proteinMultiplier += 0.2;
                }
                
                if (sleepDuration === 'less-5' || sleepDuration === '5-6') {
                    // Poor sleep increases hunger hormones and cravings
                    // Adjust macros for better satiety and energy balance
                    initialCarbPercent -= 5;
                    initialFatPercent += 5;
                }
                
                // Calculate macros
                const proteinGrams = Math.round(weight * proteinMultiplier);
                const proteinCalories = proteinGrams * 4;
                
                const fatCalories = Math.round((targetCalories * (initialFatPercent / 100)));
                const fatGrams = Math.round(fatCalories / 9);
                
                const carbCalories = targetCalories - proteinCalories - fatCalories;
                const carbGrams = Math.round(carbCalories / 4);
                
                // Calculate percentages
                const proteinPercent = Math.round((proteinCalories / targetCalories) * 100);
                const carbPercent = Math.round((carbCalories / targetCalories) * 100);
                const fatPercent = Math.round((fatCalories / targetCalories) * 100);
                
                // Calculate water needs (based on weight and activity)
                const waterMl = Math.round((weight * 35) * (activityLevel / 1.2));
                
                // Calculate fiber needs
                const fiberGrams = Math.round(targetCalories / 1000 * 14);
                
                // Calculate iron needs based on gender
                const ironMg = gender === 'female' ? '18 mg' : '8 mg';
                
                // Update results
                document.getElementById('calorie-result').textContent = targetCalories;
                
                document.getElementById('protein-grams').textContent = proteinGrams + 'g';
                document.getElementById('protein-calories').textContent = proteinCalories + ' calories';
                document.getElementById('protein-percent').textContent = proteinPercent + '%';
                
                document.getElementById('carbs-grams').textContent = carbGrams + 'g';
                document.getElementById('carbs-calories').textContent = carbCalories + ' calories';
                document.getElementById('carbs-percent').textContent = carbPercent + '%';
                
                document.getElementById('fats-grams').textContent = fatGrams + 'g';
                document.getElementById('fats-calories').textContent = fatCalories + ' calories';
                document.getElementById('fats-percent').textContent = fatPercent + '%';
                
                document.getElementById('water-result').textContent = waterMl + ' ml';
                document.getElementById('fiber-result').textContent = fiberGrams + 'g';
                document.getElementById('iron-result').textContent = ironMg;
                
                // Generate personalized recommendations based on inputs
                let recommendations = '<div style="margin-top: 2rem;"><h3 style="text-align: center; color: #f39c12;">Personalized Recommendations</h3>';
                
                // Stress recommendations
                if (stressLevel === 'high' || stressLevel === 'very-high') {
                    recommendations += `
                        <div class="result-card">
                            <h3>Stress Management Nutrition Focus</h3>
                            <p>Your high stress levels require specific nutritional support. Focus on:</p>
                            <ul style="text-align: left; margin-bottom: 0;">
                                <li>Magnesium-rich foods: dark leafy greens, nuts, and seeds to support nervous system</li>
                                <li>Vitamin C: citrus fruits, bell peppers, berries to moderate cortisol levels</li>
                                <li>Omega-3 fatty acids: fatty fish, walnuts, flax seeds for inflammation control</li>
                                <li>Complex carbs: oats, sweet potatoes, quinoa for serotonin production</li>
                                <li>Limit caffeine to before 2pm and consider calming herbal teas</li>
                            </ul>
                        </div>
                    `;
                }
                
                // Sleep recommendations
                if (sleepDuration === 'less-5' || sleepDuration === '5-6') {
                    recommendations += `
                        <div class="result-card">
                            <h3>Sleep-Supporting Nutrition Focus</h3>
                            <p>Your limited sleep requires specific nutritional support. Focus on:</p>
                            <ul style="text-align: left; margin-bottom: 0;">
                                <li>Tryptophan-rich foods: turkey, milk, bananas, oats (especially in evening)</li>
                                <li>Magnesium: spinach, pumpkin seeds, black beans to improve sleep quality</li>
                                <li>Limit added sugars which can disrupt sleep cycles</li>
                                <li>Consider a small balanced snack before bed if nighttime hunger disrupts sleep</li>
                                <li>Restrict caffeine to before noon and avoid alcohol which disrupts REM sleep</li>
                            </ul>
                        </div>
                    `;
                }
                
                // Academic performance focus
                if (goal === 'performance') {
                    recommendations += `
                        <div class="result-card">
                            <h3>Brain-Optimizing Nutrition Strategy</h3>
                            <p>For your academic performance focus, prioritize these nutrients and timing strategies:</p>
                            <ul style="text-align: left; margin-bottom: 0;">
                                <li>DHA/EPA omega-3s: fatty fish 2-3 times weekly for brain cell structure</li>
                                <li>Antioxidants: colorful berries and dark chocolate to improve blood flow to brain</li>
                                <li>Choline: eggs, lean meats for neurotransmitter production</li>
                                <li>Vitamin E: nuts, seeds, olive oil for cognitive protection</li>
                                <li>Time complex carbs 1-2 hours before study sessions or exams for optimal glucose</li>
                                <li>Ensure consistent meal timing to stabilize blood sugar throughout the day</li>
                            </ul>
                        </div>
                    `;
                }
                
                // Weight goals
                if (goal === 'lose') {
                    recommendations += `
                        <div class="result-card">
                            <h3>Healthy Weight Management Strategy</h3>
                            <p>For sustainable, student-friendly weight management:</p>
                            <ul style="text-align: left; margin-bottom: 0;">
                                <li>Prioritize protein at each meal for satiety and muscle preservation</li>
                                <li>Focus on high-volume, nutrient-dense foods (vegetables, fruits, broth-based soups)</li>
                                <li>Stay hydrated - aim for your calculated water needs</li>
                                <li>Plan balanced snacks to prevent extreme hunger between classes</li>
                                <li>Manage stress eating with pre-planned alternatives and mindfulness techniques</li>
                                <li>Combine nutrition changes with regular physical activity for best results</li>
                            </ul>
                        </div>
                    `;
                } else if (goal === 'gain') {
                    recommendations += `
                        <div class="result-card">
                            <h3>Healthy Weight Gain Strategy</h3>
                            <p>For healthy, balanced weight gain on a student schedule:</p>
                            <ul style="text-align: left; margin-bottom: 0;">
                                <li>Focus on nutrient-dense, calorie-rich foods rather than empty calories</li>
                                <li>Add healthy fats for easy calorie boosting (nuts, avocados, olive oil, full-fat dairy)</li>
                                <li>Increase portion sizes gradually rather than forcing uncomfortable amounts</li>
                                <li>Use liquid calories strategically (smoothies with protein, fruits, nut butters)</li>
                                <li>Time larger meals after workouts when appetite is typically higher</li>
                                <li>Consider eating more frequent meals if your schedule allows</li>
                            </ul>
                        </div>
                    `;
                }
                
                recommendations += '</div>';
                
                // Add recommendations to the page
                recommendationsSection.innerHTML = recommendations;
                
                // Show results
                resultsSection.style.display = 'block';
                
                // Scroll to results
                resultsSection.scrollIntoView({ behavior: 'smooth' });
            });
        });
    </script>
</body>
</html>