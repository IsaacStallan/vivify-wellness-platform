<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exam Meditation Playlist - Vivify</title>
    
    
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Add Font Awesome for icons -->
    
    <style>
        /* Footer styles to ensure it stays at bottom */
        footer {
            background-color: #000;
            color: white;
            text-align: center;
            padding: 2rem 0;
            width: 100%;
            margin-top: auto;
            border-top: 1px solid #333;
        }

        footer .footer-links {
            list-style: none;
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 1rem 0 0 0;
            padding: 0;
        }

        footer .footer-links a {
            color: #a0a0a0;
            text-decoration: none;
            transition: color 0.3s;
        }

        footer .footer-links a:hover {
            color: #f39c12;
        }
        
        /* Exam Meditations specific styles */
        .exam-hero {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
                        url('https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 6rem 2rem;
            text-align: center;
        }

        .exam-hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .exam-hero p {
            font-size: 1.25rem;
            max-width: 800px;
            margin: 0 auto 2rem;
        }
        
        .section-title {
            color: #f39c12;
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            text-align: center;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #333;
        }

        .content-container {
            max-width: 1200px;
            margin: 3rem auto;
            padding: 0 2rem;
        }

        .intro-text {
            text-align: center;
            margin-bottom: 3rem;
            line-height: 1.6;
        }

        .benefits-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 4rem;
        }

        .benefit-card {
            background-color: #222;
            border-radius: 10px;
            padding: 1.5rem;
            width: 300px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .benefit-card:hover {
            transform: translateY(-5px);
        }

        .benefit-icon {
            color: #f39c12;
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .benefit-card h3 {
            color: #f39c12;
            margin-bottom: 1rem;
        }

        .benefit-card p {
            color: #ddd;
        }

        .exam-playlist-section {
            background-color: #222;
            border-radius: 10px;
            padding: 2rem;
            margin-bottom: 4rem;
        }

        .playlist-title {
            color: #f39c12;
            margin-bottom: 1rem;
            font-size: 1.8rem;
        }

        .playlist-description {
            margin-bottom: 2rem;
            color: #ddd;
        }

        .meditations-list {
            margin-bottom: 2rem;
        }

        .meditation-item {
            background-color: #333;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            transition: transform 0.3s ease;
        }

        .meditation-item:hover {
            transform: translateY(-5px);
            background-color: #3a3a3a;
        }

        .meditation-order {
            background-color: #f39c12;
            color: black;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            margin-right: 1.5rem;
            flex-shrink: 0;
        }

        .meditation-details {
            flex-grow: 1;
        }

        .meditation-details h3 {
            color: #f39c12;
            margin-bottom: 0.5rem;
        }

        .meditation-meta {
            display: flex;
            color: #aaa;
            font-size: 0.9rem;
            margin-bottom: 0.8rem;
        }

        .meditation-meta span {
            display: flex;
            align-items: center;
            margin-right: 1.5rem;
        }

        .meditation-meta i {
            margin-right: 0.5rem;
        }

        .meditation-description {
            color: #ddd;
            margin-bottom: 1rem;
        }

        .meditation-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .meditation-tag {
            background-color: #444;
            color: #ddd;
            padding: 0.3rem 0.7rem;
            border-radius: 20px;
            font-size: 0.8rem;
        }

        .meditation-controls {
            display: flex;
            min-width: 150px;
            justify-content: center;
        }

        .play-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.7rem 1.2rem;
            background-color: #f39c12;
            color: black;
            border: none;
            border-radius: 5px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .play-btn:hover {
            background-color: #e67e22;
        }

        .testimonials-section {
            margin-bottom: 4rem;
        }

        .testimonial-card {
            background-color: #222;
            border-radius: 10px;
            padding: 2rem;
            margin-bottom: 2rem;
            position: relative;
        }

        .testimonial-card:before {
            content: '\201C';
            font-size: 5rem;
            color: rgba(243, 156, 18, 0.2);
            position: absolute;
            top: 10px;
            left: 15px;
        }

        .testimonial-text {
            font-style: italic;
            margin-bottom: 1.5rem;
            position: relative;
            z-index: 1;
            color: #ddd;
        }

        .testimonial-author {
            display: flex;
            align-items: center;
        }

        .author-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #444;
            margin-right: 1rem;
            overflow: hidden;
        }

        .author-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .author-info h4 {
            margin: 0;
            color: #f39c12;
        }

        .author-info p {
            margin: 0;
            color: #aaa;
            font-size: 0.9rem;
        }

        .tips-section {
            background-color: #222;
            border-radius: 10px;
            padding: 2rem;
            margin-bottom: 4rem;
        }

        .tips-section h2 {
            color: #f39c12;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .tips-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        .tip-card {
            background-color: #333;
            border-radius: 10px;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
        }

        .tip-number {
            background-color: #f39c12;
            color: black;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .tip-card h3 {
            color: #f39c12;
            margin-bottom: 1rem;
        }

        .tip-card p {
            color: #ddd;
            flex-grow: 1;
        }

        .cta-section {
            text-align: center;
            margin: 3rem 0;
        }

        .cta-buttons {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
        }

        .cta-button {
            display: inline-block;
            padding: 1rem 2rem;
            background-color: #f39c12;
            color: black;
            text-decoration: none;
            border-radius: 5px;
            font-weight: 700;
            font-size: 1.1rem;
            transition: background-color 0.3s, transform 0.3s;
        }

        .cta-button:hover {
            background-color: #e67e22;
            transform: scale(1.05);
        }

        .cta-button.secondary {
            background-color: transparent;
            color: white;
            border: 2px solid #f39c12;
        }

        .cta-button.secondary:hover {
            background-color: rgba(243, 156, 18, 0.1);
        }

        .audio-player {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #1a1a1a;
            padding: 1rem;
            box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.3);
            z-index: 100;
        }

        .player-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1200px;
            margin: 0 auto;
        }

        .player-info {
            display: flex;
            align-items: center;
            flex: 1;
        }

        .player-details h4 {
            margin: 0;
            color: #f39c12;
        }

        .player-details p {
            margin: 0;
            font-size: 0.9rem;
            color: #aaa;
        }

        .player-controls {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .player-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.3s;
        }

        .player-btn:hover {
            color: #f39c12;
        }

        .player-btn.play-pause {
            font-size: 2rem;
            color: #f39c12;
        }

        .player-timeline {
            flex: 2;
            margin: 0 2rem;
        }

        .timeline-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .timeline {
            flex: 1;
            height: 4px;
            background-color: #444;
            border-radius: 2px;
            position: relative;
            cursor: pointer;
        }

        .timeline-progress {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background-color: #f39c12;
            border-radius: 2px;
            width: 30%;
        }

        .time {
            font-size: 0.9rem;
            color: #aaa;
        }

        @media (max-width: 768px) {
            .exam-hero h1 {
                font-size: 2.5rem;
            }
            
            .meditation-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .meditation-order {
                margin-bottom: 1rem;
            }
            
            .meditation-controls {
                margin-top: 1rem;
                width: 100%;
            }
            
            .player-content {
                flex-direction: column;
                gap: 1rem;
            }
            
            .player-timeline {
                width: 100%;
                margin: 1rem 0;
            }
            
            .player-controls {
                width: 100%;
                justify-content: center;
            }
            
            .cta-buttons {
                flex-direction: column;
                gap: 1rem;
            }
        }
    @media (max-width: 768px) {
            /* FORCE hide all desktop navigation */
            nav ul,
            nav li,
            .left-nav ul,
            .right-nav ul,
            .left-nav li,
            .right-nav li,
            .left-nav > ul,
            .right-nav > ul {
                display: none !important;
                visibility: hidden !important;
            }
            
            /* Ensure nav container works properly */
            nav {
                display: flex !important;
                justify-content: space-between !important;
                align-items: center !important;
                padding: 1rem !important;
                flex-wrap: nowrap !important;
            }
            
            /* Keep logo visible */
            .logo,
            .logo a {
                display: block !important;
                visibility: visible !important;
                font-size: 1.5rem !important;
                white-space: nowrap !important;
            }
            
            /* Force show mobile button if it exists */
            .mobile-menu-btn {
                display: flex !important;
                visibility: visible !important;
                flex-direction: column;
                background: none;
                border: none;
                cursor: pointer;
                padding: 0.5rem;
                z-index: 1001;
            }
            
            /* Mobile button styles */
            .mobile-menu-btn .hamburger {
                width: 25px;
                height: 3px;
                background: #ffffff;
                margin: 3px 0;
                transition: 0.3s;
                border-radius: 2px;
            }
            
            /* Ensure right-nav container shows mobile button */
            .right-nav {
                display: flex !important;
                align-items: center !important;
                visibility: visible !important;
            }
        }

        /* If no mobile button exists, add this emergency button */
        @media (max-width: 768px) {
            nav:not(:has(.mobile-menu-btn))::after {
                content: "☰";
                position: absolute;
                right: 1rem;
                top: 50%;
                transform: translateY(-50%);
                color: white;
                font-size: 1.5rem;
                cursor: pointer;
            }
        }
        .mobile-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(10, 10, 10, 0.98);
            backdrop-filter: blur(20px);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .mobile-menu.active {
            opacity: 1;
            visibility: visible;
        }

        .mobile-menu-content {
            height: 100%;
            display: flex;
            flex-direction: column;
            padding: 2rem;
        }

        .mobile-menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 2rem;
        }

        .mobile-menu-close {
            background: none;
            border: none;
            color: #ffffff;
            font-size: 2rem;
            cursor: pointer;
            padding: 0.5rem;
        }

        .mobile-menu-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .mobile-menu-link {
            color: #ffffff;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 500;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }

        .mobile-menu-link:hover {
            color: #f39c12;
            padding-left: 1rem;
        }

        .mobile-menu-link.mobile-cta {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: #000 !important;
            border-radius: 12px;
            margin-top: 1rem;
            text-align: center;
            font-weight: 600;
            border: none;
        }

        .mobile-menu-divider {
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
            margin: 1rem 0;
        }

        .mobile-menu-btn.active .hamburger:nth-child(1) {
            transform: rotate(-45deg) translate(-5px, 6px);
        }

        .mobile-menu-btn.active .hamburger:nth-child(2) {
            opacity: 0;
        }

        .mobile-menu-btn.active .hamburger:nth-child(3) {
            transform: rotate(45deg) translate(-5px, -6px);
        }

        /* Add this to your CSS to ensure mobile elements are hidden on desktop */
        @media (min-width: 769px) {
            .mobile-menu,
            .mobile-menu-btn {
                display: none !important;
                visibility: hidden !important;
            }
        }
    </style>
    <script>
        // Authentication-aware mobile menu
function createMobileMenu() {
    // Only create mobile menu on mobile devices
    if (window.innerWidth > 768) {
        return; // Exit early on desktop
    }
    
    // Check authentication status
    const authToken = localStorage.getItem('authToken');
    const userLoggedIn = localStorage.getItem('userLoggedIn');
    const isLoggedIn = !!(authToken || userLoggedIn === 'true');
    const username = localStorage.getItem('username') || 'User';
    
    console.log('Auth check:', { authToken, userLoggedIn, isLoggedIn, username }); // Debug log
    
    // Create mobile menu if it doesn't exist
    if (!document.getElementById('mobile-menu')) {
        const header = document.querySelector('header');
        const mobileMenu = document.createElement('div');
        mobileMenu.id = 'mobile-menu';
        mobileMenu.className = 'mobile-menu';
        
        // Generate auth-specific menu items
        let authMenuItems = '';
        if (isLoggedIn) {
            authMenuItems = `
                <div class="mobile-menu-divider"></div>
                <div class="mobile-user-info">
                    <span style="color: #f39c12; font-weight: 600; padding: 0.5rem 0;">Welcome, ${username}!</span>
                </div>
                <a href="dashboard.html" class="mobile-menu-link mobile-cta">Dashboard</a>
                <a href="profile.html" class="mobile-menu-link">Profile</a>
                <a href="#" class="mobile-menu-link" onclick="handleMobileLogout(event)">Logout</a>
            `;
        } else {
            authMenuItems = `
                <div class="mobile-menu-divider"></div>
                <a href="login.html" class="mobile-menu-link">Login</a>
                <a href="signup.html" class="mobile-menu-link mobile-cta">Start Training</a>
            `;
        }
        
        mobileMenu.innerHTML = `
            <div class="mobile-menu-content">
                <div class="mobile-menu-header">
                    <div class="logo"><a href="index.html">Vivify</a></div>
                    <button class="mobile-menu-close" onclick="closeMobileMenu()">×</button>
                </div>
                <div class="mobile-menu-links">
                    <a href="index.html" class="mobile-menu-link">Home</a>
                    <a href="index.html#training" class="mobile-menu-link">Training Areas</a>
                    <a href="habits-tracker.html" class="mobile-menu-link">Habits</a>
                    <a href="challenges.html" class="mobile-menu-link">Challenges</a>
                    <a href="about.html" class="mobile-menu-link">About</a>
                    <a href="community.html" class="mobile-menu-link">Community</a>
                    ${authMenuItems}
                </div>
            </div>
        `;
        header.appendChild(mobileMenu);
    }
    
    // Create mobile button if it doesn't exist
    if (!document.getElementById('mobile-menu-btn')) {
        const nav = document.querySelector('nav');
        const rightNav = nav.querySelector('.right-nav') || nav;
        const mobileBtn = document.createElement('button');
        mobileBtn.id = 'mobile-menu-btn';
        mobileBtn.className = 'mobile-menu-btn';
        mobileBtn.onclick = toggleMobileMenu;
        mobileBtn.innerHTML = `
            <span class="hamburger"></span>
            <span class="hamburger"></span>
            <span class="hamburger"></span>
        `;
        rightNav.appendChild(mobileBtn);
    }
}

function handleMobileLogout(event) {
    event.preventDefault();
    if (confirm('Are you sure you want to logout?')) {
        // Clear all auth data
        localStorage.clear();
        
        // Close mobile menu
        closeMobileMenu();
        
        // Refresh the page to update UI
        window.location.reload();
    }
}

function toggleMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    const btn = document.getElementById('mobile-menu-btn');
    
    menu.classList.toggle('active');
    btn.classList.toggle('active');
    
    if (menu.classList.contains('active')) {
        document.body.style.overflow = 'hidden';
    } else {
        document.body.style.overflow = '';
    }
}

function closeMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    const btn = document.getElementById('mobile-menu-btn');
    
    menu.classList.remove('active');
    btn.classList.remove('active');
    document.body.style.overflow = '';
}

// Function to update mobile menu when auth state changes
function updateMobileMenuAuth() {
    const existingMenu = document.getElementById('mobile-menu');
    if (existingMenu) {
        existingMenu.remove();
    }
    createMobileMenu();
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', createMobileMenu);

// Listen for auth state changes (if you have an auth system that fires events)
window.addEventListener('authStateChanged', updateMobileMenuAuth);

// Export functions for external use
window.updateMobileMenuAuth = updateMobileMenuAuth;
window.handleMobileLogout = handleMobileLogout;
// Add this at the end of your mobile menu script
window.addEventListener('resize', function() {
    if (window.innerWidth > 768) {
        // Remove mobile elements on desktop
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileBtn = document.getElementById('mobile-menu-btn');
        
        if (mobileMenu) mobileMenu.remove();
        if (mobileBtn) mobileBtn.remove();
        
        // Reset body overflow
        document.body.style.overflow = '';
    } else if (window.innerWidth <= 768) {
        // Recreate mobile menu if switching to mobile
        const existingMenu = document.getElementById('mobile-menu');
        if (!existingMenu) {
            createMobileMenu();
        }
    }
});
        </script>
<!-- CSS Loading Order Fix -->

<link rel="stylesheet" href="styles.css">

<!-- FOUC Prevention -->
<style>
    html { visibility: hidden; opacity: 0; }
    html.loaded { visibility: visible; opacity: 1; transition: opacity 0.3s ease; }
@media (max-width: 768px) {
            /* FORCE hide all desktop navigation */
            nav ul,
            nav li,
            .left-nav ul,
            .right-nav ul,
            .left-nav li,
            .right-nav li,
            .left-nav > ul,
            .right-nav > ul {
                display: none !important;
                visibility: hidden !important;
            }
            
            /* Ensure nav container works properly */
            nav {
                display: flex !important;
                justify-content: space-between !important;
                align-items: center !important;
                padding: 1rem !important;
                flex-wrap: nowrap !important;
            }
            
            /* Keep logo visible */
            .logo,
            .logo a {
                display: block !important;
                visibility: visible !important;
                font-size: 1.5rem !important;
                white-space: nowrap !important;
            }
            
            /* Force show mobile button if it exists */
            .mobile-menu-btn {
                display: flex !important;
                visibility: visible !important;
                flex-direction: column;
                background: none;
                border: none;
                cursor: pointer;
                padding: 0.5rem;
                z-index: 1001;
            }
            
            /* Mobile button styles */
            .mobile-menu-btn .hamburger {
                width: 25px;
                height: 3px;
                background: #ffffff;
                margin: 3px 0;
                transition: 0.3s;
                border-radius: 2px;
            }
            
            /* Ensure right-nav container shows mobile button */
            .right-nav {
                display: flex !important;
                align-items: center !important;
                visibility: visible !important;
            }
        }

        /* If no mobile button exists, add this emergency button */
        @media (max-width: 768px) {
            nav:not(:has(.mobile-menu-btn))::after {
                content: "☰";
                position: absolute;
                right: 1rem;
                top: 50%;
                transform: translateY(-50%);
                color: white;
                font-size: 1.5rem;
                cursor: pointer;
            }
        }
        .mobile-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(10, 10, 10, 0.98);
            backdrop-filter: blur(20px);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .mobile-menu.active {
            opacity: 1;
            visibility: visible;
        }

        .mobile-menu-content {
            height: 100%;
            display: flex;
            flex-direction: column;
            padding: 2rem;
        }

        .mobile-menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 2rem;
        }

        .mobile-menu-close {
            background: none;
            border: none;
            color: #ffffff;
            font-size: 2rem;
            cursor: pointer;
            padding: 0.5rem;
        }

        .mobile-menu-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .mobile-menu-link {
            color: #ffffff;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 500;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }

        .mobile-menu-link:hover {
            color: #f39c12;
            padding-left: 1rem;
        }

        .mobile-menu-link.mobile-cta {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: #000 !important;
            border-radius: 12px;
            margin-top: 1rem;
            text-align: center;
            font-weight: 600;
            border: none;
        }

        .mobile-menu-divider {
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
            margin: 1rem 0;
        }

        .mobile-menu-btn.active .hamburger:nth-child(1) {
            transform: rotate(-45deg) translate(-5px, 6px);
        }

        .mobile-menu-btn.active .hamburger:nth-child(2) {
            opacity: 0;
        }

        .mobile-menu-btn.active .hamburger:nth-child(3) {
            transform: rotate(45deg) translate(-5px, -6px);
        }

        /* Add this to your CSS to ensure mobile elements are hidden on desktop */
        @media (min-width: 769px) {
            .mobile-menu,
            .mobile-menu-btn {
                display: none !important;
                visibility: hidden !important;
            }
        }
    </style>
    <script>
        // Authentication-aware mobile menu
function createMobileMenu() {
    // Only create mobile menu on mobile devices
    if (window.innerWidth > 768) {
        return; // Exit early on desktop
    }
    
    // Check authentication status
    const authToken = localStorage.getItem('authToken');
    const userLoggedIn = localStorage.getItem('userLoggedIn');
    const isLoggedIn = !!(authToken || userLoggedIn === 'true');
    const username = localStorage.getItem('username') || 'User';
    
    console.log('Auth check:', { authToken, userLoggedIn, isLoggedIn, username }); // Debug log
    
    // Create mobile menu if it doesn't exist
    if (!document.getElementById('mobile-menu')) {
        const header = document.querySelector('header');
        const mobileMenu = document.createElement('div');
        mobileMenu.id = 'mobile-menu';
        mobileMenu.className = 'mobile-menu';
        
        // Generate auth-specific menu items
        let authMenuItems = '';
        if (isLoggedIn) {
            authMenuItems = `
                <div class="mobile-menu-divider"></div>
                <div class="mobile-user-info">
                    <span style="color: #f39c12; font-weight: 600; padding: 0.5rem 0;">Welcome, ${username}!</span>
                </div>
                <a href="dashboard.html" class="mobile-menu-link mobile-cta">Dashboard</a>
                <a href="profile.html" class="mobile-menu-link">Profile</a>
                <a href="#" class="mobile-menu-link" onclick="handleMobileLogout(event)">Logout</a>
            `;
        } else {
            authMenuItems = `
                <div class="mobile-menu-divider"></div>
                <a href="login.html" class="mobile-menu-link">Login</a>
                <a href="signup.html" class="mobile-menu-link mobile-cta">Start Training</a>
            `;
        }
        
        mobileMenu.innerHTML = `
            <div class="mobile-menu-content">
                <div class="mobile-menu-header">
                    <div class="logo"><a href="index.html">Vivify</a></div>
                    <button class="mobile-menu-close" onclick="closeMobileMenu()">×</button>
                </div>
                <div class="mobile-menu-links">
                    <a href="index.html" class="mobile-menu-link">Home</a>
                    <a href="index.html#training" class="mobile-menu-link">Training Areas</a>
                    <a href="habits-tracker.html" class="mobile-menu-link">Habits</a>
                    <a href="challenges.html" class="mobile-menu-link">Challenges</a>
                    <a href="about.html" class="mobile-menu-link">About</a>
                    <a href="community.html" class="mobile-menu-link">Community</a>
                    ${authMenuItems}
                </div>
            </div>
        `;
        header.appendChild(mobileMenu);
    }
    
    // Create mobile button if it doesn't exist
    if (!document.getElementById('mobile-menu-btn')) {
        const nav = document.querySelector('nav');
        const rightNav = nav.querySelector('.right-nav') || nav;
        const mobileBtn = document.createElement('button');
        mobileBtn.id = 'mobile-menu-btn';
        mobileBtn.className = 'mobile-menu-btn';
        mobileBtn.onclick = toggleMobileMenu;
        mobileBtn.innerHTML = `
            <span class="hamburger"></span>
            <span class="hamburger"></span>
            <span class="hamburger"></span>
        `;
        rightNav.appendChild(mobileBtn);
    }
}

function handleMobileLogout(event) {
    event.preventDefault();
    if (confirm('Are you sure you want to logout?')) {
        // Clear all auth data
        localStorage.clear();
        
        // Close mobile menu
        closeMobileMenu();
        
        // Refresh the page to update UI
        window.location.reload();
    }
}

function toggleMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    const btn = document.getElementById('mobile-menu-btn');
    
    menu.classList.toggle('active');
    btn.classList.toggle('active');
    
    if (menu.classList.contains('active')) {
        document.body.style.overflow = 'hidden';
    } else {
        document.body.style.overflow = '';
    }
}

function closeMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    const btn = document.getElementById('mobile-menu-btn');
    
    menu.classList.remove('active');
    btn.classList.remove('active');
    document.body.style.overflow = '';
}

// Function to update mobile menu when auth state changes
function updateMobileMenuAuth() {
    const existingMenu = document.getElementById('mobile-menu');
    if (existingMenu) {
        existingMenu.remove();
    }
    createMobileMenu();
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', createMobileMenu);

// Listen for auth state changes (if you have an auth system that fires events)
window.addEventListener('authStateChanged', updateMobileMenuAuth);

// Export functions for external use
window.updateMobileMenuAuth = updateMobileMenuAuth;
window.handleMobileLogout = handleMobileLogout;
// Add this at the end of your mobile menu script
window.addEventListener('resize', function() {
    if (window.innerWidth > 768) {
        // Remove mobile elements on desktop
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileBtn = document.getElementById('mobile-menu-btn');
        
        if (mobileMenu) mobileMenu.remove();
        if (mobileBtn) mobileBtn.remove();
        
        // Reset body overflow
        document.body.style.overflow = '';
    } else if (window.innerWidth <= 768) {
        // Recreate mobile menu if switching to mobile
        const existingMenu = document.getElementById('mobile-menu');
        if (!existingMenu) {
            createMobileMenu();
        }
    }
});
        </script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        document.documentElement.classList.add('loaded');
    });
    window.addEventListener('load', function() {
        document.documentElement.classList.add('loaded');
    });
</script>
<script src="js/vivify-stats.js"></script>
<script src="js/leaderboard-system.js"></script>
</head>
<body>
    <div class="wrapper">
        <header>
            <nav>
                <div class="left-nav">
                    <div class="logo">
                        <a href="index.html" aria-label="Home Page"><h1>Vivify</h1></a>
                    </div>
                    <ul>
                        <li><a href="about.html" aria-label="About Us Page">About</a></li>
                        <li class="dropdown" id="categoryDropdown">
                            <a href="#" class="dropbtn" aria-label="Categories Dropdown">Training</a>
                            <div class="dropdown-content">
                                <a href="fitness.html" aria-label="Fitness Page">Fitness</a>
                                <a href="nutrition.html" aria-label="Nutrition Page">Nutrition</a>
                                <a href="focus-resilience.html" class="active" aria-label="Focus & Resilience Page">Focus & Resilience</a>
                                <a href="life-mastery.html" aria-label="Life Lessons Page">Life Mastery</a>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="right-nav">
                    <ul>
                        <li><a href="dashboard.html" id="dashboardLink" aria-label="Dashboard">Performance Hub</a></li>
                        <li><a href="profile.html" id="profileLink" aria-label="Profile Page">Profile</a></li>
                        <li><a href="#" id="logoutLink" aria-label="Logout">Logout</a></li>
                        <li><a href="login.html" id="loginLink" style="display: none;" aria-label="Login Page">Login</a></li>
                        <li><a href="signup.html" id="signupLink" style="display: none;" aria-label="Sign Up Page">Sign Up</a></li>
                    </ul>
                </div>
            </nav>
        </header>

        <!-- Hero Section -->
        <section class="exam-hero">
            <h1>Exam Preparation Meditation Playlist</h1>
            <p>A carefully curated series of guided meditations designed to optimize your mental state before, during, and after exams.</p>
            <a href="#exam-playlist" class="cta-button">View Playlist</a>
        </section>

        <div class="content-container">
            <!-- Introduction -->
            <div class="intro-text">
                <p>
                    Exams can be one of the most stressful aspects of student life. This specialized meditation playlist is designed to help you manage exam-related anxiety, improve focus, enhance memory recall, and maintain balance throughout your exam periods. Follow these meditations in sequence for optimal results, or select individual sessions based on your specific needs.
                </p>
            </div>

            <!-- Benefits Section -->
            <h2 class="section-title">How Meditation Helps During Exams</h2>
            <div class="benefits-container">
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h3>Enhanced Focus</h3>
                    <p>Regular meditation strengthens your ability to concentrate on complex material and ignore distractions during study sessions and exams.</p>
                </div>

                <div class="benefit-card">
                    <div class="benefit-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h3>Reduced Anxiety</h3>
                    <p>Meditation activates your parasympathetic nervous system, reducing test anxiety and helping you remain calm under pressure.</p>
                </div>

                <div class="benefit-card">
                    <div class="benefit-icon">
                        <i class="fas fa-memory"></i>
                    </div>
                    <h3>Improved Memory</h3>
                    <p>Studies show that mindfulness practices can enhance working memory and recall, helping you better access information during exams.</p>
                </div>

                <div class="benefit-card">
                    <div class="benefit-icon">
                        <i class="fas fa-balance-scale"></i>
                    </div>
                    <h3>Emotional Balance</h3>
                    <p>Maintain perspective and emotional equilibrium throughout the exam period, preventing burnout and promoting resilience.</p>
                </div>
            </div>

            <!-- Playlist Section -->
            <div id="exam-playlist" class="exam-playlist-section">
                <h2 class="playlist-title">Complete Exam Meditation Series</h2>
                <p class="playlist-description">This five-part meditation series guides you through the entire exam process—from preparation to recovery. Each meditation builds upon the previous one, creating a comprehensive approach to exam-related stress and performance.</p>
                
                <div class="meditations-list">
                    <!-- Meditation 1 -->
                    <div class="meditation-item">
                        <div class="meditation-order">1</div>
                        <div class="meditation-details">
                            <h3>Exam Preparation Focus</h3>
                            <div class="meditation-meta">
                                <span><i class="fas fa-clock"></i> 10 minutes</span>
                                <span><i class="fas fa-headphones"></i> Dr. James Wilson</span>
                                <span><i class="fas fa-calendar"></i> Use 3-7 days before exam</span>
                            </div>
                            <p class="meditation-description">This meditation helps establish a focused, calm study state. It introduces breathing techniques and visualization to optimize your study sessions and information retention.</p>
                            <div class="meditation-tags">
                                <span class="meditation-tag">Focus</span>
                                <span class="meditation-tag">Study Optimization</span>
                                <span class="meditation-tag">Information Retention</span>
                            </div>
                        </div>
                        <div class="meditation-controls">
                            <button class="play-btn" onclick="playMeditation('Exam Preparation Focus', 'Dr. James Wilson', '10:00')">
                                <i class="fas fa-play"></i> Play
                            </button>
                        </div>
                    </div>
                    
                    <!-- Meditation 2 -->
                    <div class="meditation-item">
                        <div class="meditation-order">2</div>
                        <div class="meditation-details">
                            <h3>Anxiety Release & Confidence Building</h3>
                            <div class="meditation-meta">
                                <span><i class="fas fa-clock"></i> 12 minutes</span>
                                <span><i class="fas fa-headphones"></i> Dr. Emma Rodriguez</span>
                                <span><i class="fas fa-calendar"></i> Use 1-2 days before exam</span>
                            </div>
                            <p class="meditation-description">Address pre-exam jitters and build confidence with this guided practice. Includes techniques to release physical tension and reframe anxious thoughts into positive expectations.</p>
                            <div class="meditation-tags">
                                <span class="meditation-tag">Anxiety Reduction</span>
                                <span class="meditation-tag">Confidence</span>
                                <span class="meditation-tag">Positive Visualization</span>
                            </div>
                        </div>
                        <div class="meditation-controls">
                            <button class="play-btn" onclick="playMeditation('Anxiety Release & Confidence Building', 'Dr. Emma Rodriguez', '12:00')">
                                <i class="fas fa-play"></i> Play
                            </button>
                        </div>
                    </div>
                    
                    <!-- Meditation 3 -->
                    <div class="meditation-item">
                        <div class="meditation-order">3</div>
                        <div class="meditation-details">
                            <h3>Morning of Exam Clarity</h3>
                            <div class="meditation-meta">
                                <span><i class="fas fa-clock"></i> 8 minutes</span>
                                <span><i class="fas fa-headphones"></i> Prof. Sarah Johnson</span>
                                <span><i class="fas fa-calendar"></i> Use morning of exam</span>
                            </div>
                            <p class="meditation-description">This short but powerful morning meditation helps you center yourself, establish calm alertness, and prepare your mind for optimal performance. Perfect to use before breakfast on exam day.</p>
                            <div class="meditation-tags">
                                <span class="meditation-tag">Morning Routine</span>
                                <span class="meditation-tag">Mental Clarity</span>
                                <span class="meditation-tag">Alertness</span>
                            </div>
                        </div>
                        <div class="meditation-controls">
                            <button class="play-btn" onclick="playMeditation('Morning of Exam Clarity', 'Prof. Sarah Johnson', '8:00')">
                                <i class="fas fa-play"></i> Play
                            </button>
                        </div>
                    </div>
                    
                    <!-- Meditation 4 -->
                    <div class="meditation-item">
                        <div class="meditation-order">4</div>
                        <div class="meditation-details">
                            <h3>Pre-Exam Calm (Just Before Entering)</h3>
                            <div class="meditation-meta">
                                <span><i class="fas fa-clock"></i> 5 minutes</span>
                                <span><i class="fas fa-headphones"></i> Thomas Wright</span>
                                <span><i class="fas fa-calendar"></i> Use 10-15 minutes before exam</span>
                            </div>
                            <p class="meditation-description">A quick 5-minute meditation designed to be used right before entering the exam room. Includes breathing techniques to calm your nervous system and a method to access your prepared knowledge.</p>
                            <div class="meditation-tags">
                                <span class="meditation-tag">Quick Relief</span>
                                <span class="meditation-tag">Performance State</span>
                                <span class="meditation-tag">Last-Minute Calm</span>
                            </div>
                        </div>
                        <div class="meditation-controls">
                            <button class="play-btn" onclick="playMeditation('Pre-Exam Calm', 'Thomas Wright', '5:00')">
                                <i class="fas fa-play"></i> Play
                            </button>
                        </div>
                    </div>
                    
                    <!-- Meditation 5 -->
                    <div class="meditation-item">
                        <div class="meditation-order">5</div>
                        <div class="meditation-details">
                            <h3>Post-Exam Release & Recovery</h3>
                            <div class="meditation-meta">
                                <span><i class="fas fa-clock"></i> 15 minutes</span>
                                <span><i class="fas fa-headphones"></i> Dr. Maya Patel</span>
                                <span><i class="fas fa-calendar"></i> Use after completing exam</span>
                            </div>
                            <p class="meditation-description">This practice helps you release the built-up tension after an exam, let go of self-criticism, and restore your energy. Especially useful when you have multiple exams in a short period.</p>
                            <div class="meditation-tags">
                                <span class="meditation-tag">Stress Release</span>
                                <span class="meditation-tag">Self-Compassion</span>
                                <span class="meditation-tag">Energy Recovery</span>
                            </div>
                        </div>
                        <div class="meditation-controls">
                            <button class="play-btn" onclick="playMeditation('Post-Exam Release & Recovery', 'Dr. Maya Patel', '15:00')">
                                <i class="fas fa-play"></i> Play
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="cta-section">
                    <a href="#" class="cta-button" onclick="playFullPlaylist()">Play Full Series</a>
                </div>
            </div>

            <!-- Testimonials Section -->
            <div class="testimonials-section">
                <h2 class="section-title">Student Experiences</h2>
                
                <div class="testimonial-card">
                    <p class="testimonial-text">I used to get so anxious before exams that I couldn't sleep the night before, which made everything worse. This meditation series completely changed my approach. The anxiety release meditation especially helped me break that cycle of stress. I just finished my finals with my highest GPA yet!</p>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <img src="https://randomuser.me/api/portraits/women/45.jpg" alt="Student testimonial">
                        </div>
                        <div class="author-info">
                            <h4>Jessica L.</h4>
                            <p>Biology Major, Junior</p>
                        </div>
                    </div>
                </div>
                
                <div class="testimonial-card">
                    <p class="testimonial-text">As an engineering student with back-to-back technical exams, I was struggling with mental fatigue. The post-exam recovery meditation helped me reset between tests and maintain focus throughout finals week. I'm now using these meditations for all my major assessments.</p>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <img src="https://randomuser.me/api/portraits/men/22.jpg" alt="Student testimonial">
                        </div>
                        <div class="author-info">
                            <h4>Michael T.</h4>
                            <p>Mechanical Engineering, Senior</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Additional Tips Section -->
            <div class="tips-section">
                <h2>Additional Exam Success Tips</h2>
                <div class="tips-container">
                    <div class="tip-card">
                        <div class="tip-number">1</div>
                        <h3>Combine with Visualization</h3>
                        <p>After your meditation practice, spend 2-3 minutes visualizing yourself confidently taking the exam, recalling information easily, and completing it successfully.</p>
                    </div>
                    
                    <div class="tip-card">
                        <div class="tip-number">2</div>
                        <h3>Create a Pre-Exam Ritual</h3>
                        <p>Develop a consistent pre-exam routine that includes meditation, light exercise, proper nutrition, and review of key concepts to signal to your brain it's time to perform.</p>
                    </div>
                    
                    <div class="tip-card">
                        <div class="tip-number">3</div>
                        <h3>Use Mini-Mindfulness During Exams</h3>
                        <p>If you feel anxiety rising during an exam, take 30 seconds to focus on your breath. Three deep breaths can reset your nervous system and help you refocus.</p>
                    </div>
                    
                    <div class="tip-card">
                        <div class="tip-number">4</div>
                        <h3>Practice Regularly, Not Just Before Exams</h3>
                        <p>Regular meditation practice (even just 5 minutes daily) builds your mental resilience and focus over time, creating a stronger foundation for exam performance.</p>
                    </div>
                </div>
            </div>

            <!-- Call to Action -->
            <div class="cta-section">
                <h2 class="section-title">Take Your Exam Preparation to the Next Level</h2>
                <div class="cta-buttons">
                    <a href="guided-meditations.html" class="cta-button">Explore All Meditations</a>
                    <a href="stress-management.html" class="cta-button secondary">View Stress Management Tools</a>
                </div>
            </div>
        </div>

        <!-- Audio Player -->
        <div class="audio-player" id="audioPlayer">
            <div class="player-content">
                <div class="player-info">
                    <div class="player-details">
                        <h4 id="playerTitle">Meditation Title</h4>
                        <p id="playerInstructor">Instructor Name</p>
                    </div>
                </div>
                
                <div class="player-controls">
                    <button class="player-btn" id="prevBtn">
                        <i class="fas fa-step-backward"></i>
                    </button>
                    <button class="player-btn play-pause" id="playPauseBtn">
                        <i class="fas fa-play" id="playPauseIcon"></i>
                    </button>
                    <button class="player-btn" id="nextBtn">
                        <i class="fas fa-step-forward"></i>
                    </button>
                </div>
                
                <div class="player-timeline">
                    <div class="timeline-container">
                        <span class="time" id="currentTime">0:00</span>
                        <div class="timeline">
                            <div class="timeline-progress" id="timelineProgress"></div>
                        </div>
                        <span class="time" id="totalTime">0:00</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer>
            <p>&copy; 2024 Vivify. All rights reserved.</p>
            <ul class="footer-links">
                <li><a href="privacy.html" aria-label="Privacy Policy">Privacy Policy</a></li>
                <li><a href="terms.html" aria-label="Terms of Service">Terms of Service</a></li>
                <li><a href="contact.html" aria-label="Contact Us">Contact Us</a></li>
            </ul>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is logged in
            const isLoggedIn = localStorage.getItem('userLoggedIn') === 'true';
            
            // Update UI based on login status
            document.getElementById('loginLink').style.display = isLoggedIn ? 'none' : 'inline';
            document.getElementById('signupLink').style.display = isLoggedIn ? 'none' : 'inline';
            document.getElementById('logoutLink').style.display = isLoggedIn ? 'inline' : 'none';
            document.getElementById('profileLink').style.display = isLoggedIn ? 'inline' : 'none';
            document.getElementById('dashboardLink').style.display = isLoggedIn ? 'inline' : 'none';
            
            // Handle logout
            document.getElementById('logoutLink').addEventListener('click', function(e) {
                e.preventDefault();
                localStorage.removeItem('userLoggedIn');
                localStorage.removeItem('authToken');
                window.location.href = 'index.html';
            });
        });
        
        // Audio player functionality
        const audioPlayer = document.getElementById('audioPlayer');
        const playerTitle = document.getElementById('playerTitle');
        const playerInstructor = document.getElementById('playerInstructor');
        const currentTimeEl = document.getElementById('currentTime');
        const totalTimeEl = document.getElementById('totalTime');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const playPauseIcon = document.getElementById('playPauseIcon');
        const timelineProgress = document.getElementById('timelineProgress');
        const timeline = document.querySelector('.timeline');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        
        // Audio element
        const audioElement = new Audio();
        let isPlaying = false;
        let currentMeditationIndex = -1;
        
        // Create meditation playlist with audio sources
        const examMeditationPlaylist = [
            {
                title: 'Exam Preparation Focus',
                instructor: 'Dr. James Wilson',
                duration: '10:00',
                audioSrc: 'audio/meditations/exam-preparation-focus.mp3'
            },
            {
                title: 'Anxiety Release & Confidence Building',
                instructor: 'Dr. Emma Rodriguez',
                duration: '12:00',
                audioSrc: 'audio/meditations/anxiety-release-confidence.mp3'
            },
            {
                title: 'Morning of Exam Clarity',
                instructor: 'Prof. Sarah Johnson',
                duration: '8:00',
                audioSrc: 'audio/meditations/morning-exam-clarity.mp3'
            },
            {
                title: 'Pre-Exam Calm',
                instructor: 'Thomas Wright',
                duration: '5:00',
                audioSrc: 'audio/meditations/pre-exam-calm.mp3'
            },
            {
                title: 'Post-Exam Release & Recovery',
                instructor: 'Dr. Maya Patel',
                duration: '15:00',
                audioSrc: 'audio/meditations/post-exam-release.mp3'
            }
        ];
        
        // Function to play meditation
        function playMeditation(title, instructor, duration, audioSrc, index = -1) {
            // Find the meditation in the playlist if not provided
            if (!audioSrc) {
                const meditation = examMeditationPlaylist.find(m => m.title === title && m.instructor === instructor);
                if (meditation) {
                    audioSrc = meditation.audioSrc;
                    // Find index in playlist if not provided
                    if (index === -1) {
                        index = examMeditationPlaylist.findIndex(m => m.title === title && m.instructor === instructor);
                    }
                }
            }
            
            // Show player
            audioPlayer.style.display = 'block';
            
            // Update player info
            playerTitle.textContent = title;
            playerInstructor.textContent = instructor;
            
            // Set total time from duration
            totalTimeEl.textContent = duration;
            
            // Set audio source if available
            if (audioSrc) {
                audioElement.src = audioSrc;
                audioElement.load();
            }
            
            // Save current index if provided
            if (index >= 0) {
                currentMeditationIndex = index;
            }
            
            // Play audio if source is available
            if (audioSrc) {
                const playPromise = audioElement.play();
                
                // Handle play promise (avoid uncaught promise errors)
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        // Playback started successfully
                        isPlaying = true;
                        playPauseIcon.className = 'fas fa-pause';
                    }).catch(error => {
                        // Auto-play was prevented
                        console.log("Playback was prevented:", error);
                        isPlaying = false;
                        playPauseIcon.className = 'fas fa-play';
                    });
                }
            } else {
                // If no audio source, just display information
                console.log("No audio source available for this meditation");
            }
            
            // Log meditation play to user history
            logMeditationPlay(title, instructor, duration);
        }
        
        // Play full playlist function
        function playFullPlaylist() {
            if (examMeditationPlaylist.length > 0) {
                const firstMeditation = examMeditationPlaylist[0];
                playMeditation(
                    firstMeditation.title,
                    firstMeditation.instructor,
                    firstMeditation.duration,
                    firstMeditation.audioSrc,
                    0
                );
            }
        }
        
        // Set up audio event listeners
        audioElement.addEventListener('timeupdate', () => {
            // Update current time
            const minutes = Math.floor(audioElement.currentTime / 60);
            const seconds = Math.floor(audioElement.currentTime % 60);
            currentTimeEl.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            // Update progress bar
            const progress = (audioElement.currentTime / audioElement.duration) * 100;
            timelineProgress.style.width = `${progress}%`;
        });
        
        audioElement.addEventListener('ended', () => {
            isPlaying = false;
            playPauseIcon.className = 'fas fa-play';
            
            // Auto-play next meditation if in playlist
            if (currentMeditationIndex >= 0 && currentMeditationIndex < examMeditationPlaylist.length - 1) {
                currentMeditationIndex++;
                const nextMeditation = examMeditationPlaylist[currentMeditationIndex];
                playMeditation(
                    nextMeditation.title, 
                    nextMeditation.instructor, 
                    nextMeditation.duration, 
                    nextMeditation.audioSrc, 
                    currentMeditationIndex
                );
            }
        });
        
        // Timeline seeking
        timeline.addEventListener('click', (e) => {
            const rect = timeline.getBoundingClientRect();
            const pos = (e.clientX - rect.left) / rect.width;
            audioElement.currentTime = pos * audioElement.duration;
        });
        
        // Toggle play/pause
        playPauseBtn.addEventListener('click', () => {
            if (audioElement.paused) {
                audioElement.play();
                isPlaying = true;
                playPauseIcon.className = 'fas fa-pause';
            } else {
                audioElement.pause();
                isPlaying = false;
                playPauseIcon.className = 'fas fa-play';
            }
        });
        
        // Previous and Next buttons
        prevBtn.addEventListener('click', () => {
            if (currentMeditationIndex > 0) {
                currentMeditationIndex--;
                const prevMeditation = examMeditationPlaylist[currentMeditationIndex];
                playMeditation(
                    prevMeditation.title, 
                    prevMeditation.instructor, 
                    prevMeditation.duration, 
                    prevMeditation.audioSrc, 
                    currentMeditationIndex
                );
            }
        });
        
        nextBtn.addEventListener('click', () => {
            if (currentMeditationIndex < examMeditationPlaylist.length - 1) {
                currentMeditationIndex++;
                const nextMeditation = examMeditationPlaylist[currentMeditationIndex];
                playMeditation(
                    nextMeditation.title, 
                    nextMeditation.instructor, 
                    nextMeditation.duration, 
                    nextMeditation.audioSrc, 
                    currentMeditationIndex
                );
            }
        });
        
        // Log meditation play to user history (for analytics)
        function logMeditationPlay(title, instructor, duration) {
            // Get existing log or create new array
            let meditationLog = JSON.parse(localStorage.getItem('meditationLog')) || [];
            
            // Add new entry
            meditationLog.push({
                title,
                instructor,
                duration,
                category: 'Exam Preparation',
                timestamp: Date.now()
            });
            
            // Save to localStorage (in a real application, this would be sent to a server)
            localStorage.setItem('meditationLog', JSON.stringify(meditationLog));
            
            // Update user stats if logged in
            if (localStorage.getItem('userLoggedIn') === 'true') {
                updateUserMeditationStats(duration);
            }
        }
        
        // Update user meditation statistics
        function updateUserMeditationStats(duration) {
            // Parse duration to minutes
            const durationMatch = duration.match(/^(\d+):(\d+)$/);
            if (durationMatch) {
                const minutes = parseInt(durationMatch[1]);
                const seconds = parseInt(durationMatch[2]) / 60;
                const totalMinutes = minutes + seconds;
                
                // Get existing stats or create new object
                let meditationStats = JSON.parse(localStorage.getItem('meditationStats')) || {
                    totalSessions: 0,
                    totalMinutes: 0,
                    lastSession: null,
                    streak: 0
                };
                
                // Update stats
                meditationStats.totalSessions += 1;
                meditationStats.totalMinutes += totalMinutes;
                meditationStats.lastSession = Date.now();
                
                // Check and update streak
                const lastSessionDate = meditationStats.lastSession ? new Date(meditationStats.lastSession) : null;
                const today = new Date();
                
                if (lastSessionDate) {
                    const lastDay = lastSessionDate.setHours(0, 0, 0, 0);
                    const todayDay = today.setHours(0, 0, 0, 0);
                    
                    // If last session was yesterday, increase streak
                    if ((todayDay - lastDay) === 86400000) {
                        meditationStats.streak += 1;
                    } 
                    // If last session was today, maintain streak
                    else if (todayDay === lastDay) {
                        // No change to streak
                    } 
                    // Otherwise, reset streak
                    else {
                        meditationStats.streak = 1;
                    }
                } else {
                    meditationStats.streak = 1;
                }
                
                // Save updated stats
                localStorage.setItem('meditationStats', JSON.stringify(meditationStats));
            }
        }
    </script>
<script src="js/flexible-mobile-nav.js"></script> </body>
</html>