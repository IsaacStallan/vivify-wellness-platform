<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Connection Assessment - Vivify</title>
    
    
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* Footer styles to ensure it stays at bottom */
        footer {
            background-color: #000;
            color: white;
            text-align: center;
            padding: 2rem 0;
            width: 100%;
            margin-top: auto;
            border-top: 1px solid #333;
        }

        footer .footer-links {
            list-style: none;
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 1rem 0 0 0;
            padding: 0;
        }

        footer .footer-links a {
            color: #a0a0a0;
            text-decoration: none;
            transition: color 0.3s;
        }

        footer .footer-links a:hover {
            color: #f39c12;
        }
        
        .assessment-hero {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
                        url('https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 6rem 2rem;
            text-align: center;
        }

        .assessment-hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .assessment-hero p {
            font-size: 1.25rem;
            max-width: 800px;
            margin: 0 auto 2rem;
        }
        
        .section-title {
            color: #f39c12;
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            text-align: center;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #333;
        }

        .section-subtitle {
            color: #f39c12;
            font-size: 1.8rem;
            margin-bottom: 1rem;
        }

        .content-section {
            max-width: 1000px;
            margin: 3rem auto;
            padding: 0 2rem;
        }

        .intro-text {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 2rem;
        }

        .disclaimer-box {
            background-color: #2c3e50;
            border-radius: 10px;
            padding: 2rem;
            margin-bottom: 2rem;
            border-left: 5px solid #3498db;
        }

        .disclaimer-box h3 {
            color: #3498db;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
        }

        .disclaimer-box h3 i {
            margin-right: 10px;
        }

        .social-benefits {
            background-color: #2c3e50;
            border-radius: 10px;
            padding: 2rem;
            margin: 3rem 0;
            border-left: 5px solid #3498db;
        }

        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .benefit-item {
            background-color: rgba(52, 152, 219, 0.1);
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
        }

        .benefit-icon {
            color: #3498db;
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .assessment-container {
            max-width: 800px;
            margin: 3rem auto;
            padding: 0 2rem;
        }

        .progress-text {
            text-align: center;
            margin-bottom: 1rem;
            color: #f39c12;
            font-weight: 500;
        }

        .progress-bar {
            height: 10px;
            background-color: #333;
            border-radius: 5px;
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: #f39c12;
            width: 0%;
            transition: width 0.3s ease;
        }

        .question-card {
            background-color: #222;
            border-radius: 10px;
            padding: 2rem;
            margin-bottom: 2rem;
            display: none;
        }

        .question-card.active {
            display: block;
        }

        .question-title {
            color: #f39c12;
            font-size: 1.25rem;
            margin-bottom: 1.5rem;
            line-height: 1.4;
        }

        .answer-options {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .answer-option {
            background-color: #333;
            border: 2px solid transparent;
            border-radius: 8px;
            padding: 1rem 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .answer-option:hover {
            background-color: #444;
            border-color: #f39c12;
        }

        .answer-option.selected {
            background-color: rgba(243, 156, 18, 0.2);
            border-color: #f39c12;
        }

        .answer-option input[type="radio"] {
            margin-right: 1rem;
        }

        .assessment-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 5px;
            font-weight: 500;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .btn-secondary {
            background-color: #333;
            color: white;
        }

        .btn-secondary:hover {
            background-color: #444;
        }

        .btn-primary {
            background-color: #f39c12;
            color: black;
        }

        .btn-primary:hover {
            background-color: #e67e22;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .results-section {
            display: none;
            background-color: #222;
            border-radius: 10px;
            padding: 2rem;
            margin-top: 2rem;
        }

        .results-section.show {
            display: block;
        }

        .score-display {
            text-align: center;
            margin-bottom: 2rem;
        }

        .score-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background-color: #f39c12;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            font-size: 2rem;
            font-weight: bold;
            color: black;
        }

        .cta-button {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            background-color: #f39c12;
            color: #000;
            text-decoration: none;
            border-radius: 5px;
            font-weight: 700;
            transition: background-color 0.3s, transform 0.3s;
            text-align: center;
        }

        .cta-button:hover {
            background-color: #e67e22;
            transform: scale(1.05);
        }

        .warning-card {
            background-color: rgba(231, 76, 60, 0.1);
            border: 2px solid #e74c3c;
            border-radius: 8px;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
        }

        .warning-card h3 {
            color: #e74c3c;
            margin-bottom: 1rem;
        }

        .emergency-button {
            background-color: #e74c3c;
            color: white;
            margin: 0.5rem;
        }

        .emergency-button:hover {
            background-color: #c0392b;
        }

        @media (max-width: 768px) {
            .assessment-hero h1 {
                font-size: 2.5rem;
            }
            
            .benefits-grid {
                grid-template-columns: 1fr;
            }
            
            .assessment-buttons {
                flex-direction: column;
                gap: 1rem;
            }
        }
    @media (max-width: 768px) {
            /* FORCE hide all desktop navigation */
            nav ul,
            nav li,
            .left-nav ul,
            .right-nav ul,
            .left-nav li,
            .right-nav li,
            .left-nav > ul,
            .right-nav > ul {
                display: none !important;
                visibility: hidden !important;
            }
            
            /* Ensure nav container works properly */
            nav {
                display: flex !important;
                justify-content: space-between !important;
                align-items: center !important;
                padding: 1rem !important;
                flex-wrap: nowrap !important;
            }
            
            /* Keep logo visible */
            .logo,
            .logo a {
                display: block !important;
                visibility: visible !important;
                font-size: 1.5rem !important;
                white-space: nowrap !important;
            }
            
            /* Force show mobile button if it exists */
            .mobile-menu-btn {
                display: flex !important;
                visibility: visible !important;
                flex-direction: column;
                background: none;
                border: none;
                cursor: pointer;
                padding: 0.5rem;
                z-index: 1001;
            }
            
            /* Mobile button styles */
            .mobile-menu-btn .hamburger {
                width: 25px;
                height: 3px;
                background: #ffffff;
                margin: 3px 0;
                transition: 0.3s;
                border-radius: 2px;
            }
            
            /* Ensure right-nav container shows mobile button */
            .right-nav {
                display: flex !important;
                align-items: center !important;
                visibility: visible !important;
            }
        }

        /* If no mobile button exists, add this emergency button */
        @media (max-width: 768px) {
            nav:not(:has(.mobile-menu-btn))::after {
                content: "☰";
                position: absolute;
                right: 1rem;
                top: 50%;
                transform: translateY(-50%);
                color: white;
                font-size: 1.5rem;
                cursor: pointer;
            }
        }
        .mobile-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(10, 10, 10, 0.98);
            backdrop-filter: blur(20px);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .mobile-menu.active {
            opacity: 1;
            visibility: visible;
        }

        .mobile-menu-content {
            height: 100%;
            display: flex;
            flex-direction: column;
            padding: 2rem;
        }

        .mobile-menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 2rem;
        }

        .mobile-menu-close {
            background: none;
            border: none;
            color: #ffffff;
            font-size: 2rem;
            cursor: pointer;
            padding: 0.5rem;
        }

        .mobile-menu-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .mobile-menu-link {
            color: #ffffff;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 500;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }

        .mobile-menu-link:hover {
            color: #f39c12;
            padding-left: 1rem;
        }

        .mobile-menu-link.mobile-cta {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: #000 !important;
            border-radius: 12px;
            margin-top: 1rem;
            text-align: center;
            font-weight: 600;
            border: none;
        }

        .mobile-menu-divider {
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
            margin: 1rem 0;
        }

        .mobile-menu-btn.active .hamburger:nth-child(1) {
            transform: rotate(-45deg) translate(-5px, 6px);
        }

        .mobile-menu-btn.active .hamburger:nth-child(2) {
            opacity: 0;
        }

        .mobile-menu-btn.active .hamburger:nth-child(3) {
            transform: rotate(45deg) translate(-5px, -6px);
        }

        /* Add this to your CSS to ensure mobile elements are hidden on desktop */
        @media (min-width: 769px) {
            .mobile-menu,
            .mobile-menu-btn {
                display: none !important;
                visibility: hidden !important;
            }
        }
    </style>
    <script>
        // Authentication-aware mobile menu
function createMobileMenu() {
    // Only create mobile menu on mobile devices
    if (window.innerWidth > 768) {
        return; // Exit early on desktop
    }
    
    // Check authentication status
    const authToken = localStorage.getItem('authToken');
    const userLoggedIn = localStorage.getItem('userLoggedIn');
    const isLoggedIn = !!(authToken || userLoggedIn === 'true');
    const username = localStorage.getItem('username') || 'User';
    
    console.log('Auth check:', { authToken, userLoggedIn, isLoggedIn, username }); // Debug log
    
    // Create mobile menu if it doesn't exist
    if (!document.getElementById('mobile-menu')) {
        const header = document.querySelector('header');
        const mobileMenu = document.createElement('div');
        mobileMenu.id = 'mobile-menu';
        mobileMenu.className = 'mobile-menu';
        
        // Generate auth-specific menu items
        let authMenuItems = '';
        if (isLoggedIn) {
            authMenuItems = `
                <div class="mobile-menu-divider"></div>
                <div class="mobile-user-info">
                    <span style="color: #f39c12; font-weight: 600; padding: 0.5rem 0;">Welcome, ${username}!</span>
                </div>
                <a href="dashboard.html" class="mobile-menu-link mobile-cta">Dashboard</a>
                <a href="profile.html" class="mobile-menu-link">Profile</a>
                <a href="#" class="mobile-menu-link" onclick="handleMobileLogout(event)">Logout</a>
            `;
        } else {
            authMenuItems = `
                <div class="mobile-menu-divider"></div>
                <a href="login.html" class="mobile-menu-link">Login</a>
                <a href="signup.html" class="mobile-menu-link mobile-cta">Start Training</a>
            `;
        }
        
        mobileMenu.innerHTML = `
            <div class="mobile-menu-content">
                <div class="mobile-menu-header">
                    <div class="logo"><a href="index.html">Vivify</a></div>
                    <button class="mobile-menu-close" onclick="closeMobileMenu()">×</button>
                </div>
                <div class="mobile-menu-links">
                    <a href="index.html" class="mobile-menu-link">Home</a>
                    <a href="index.html#training" class="mobile-menu-link">Training Areas</a>
                    <a href="index.html#habits" class="mobile-menu-link">Habits & Challenges</a>
                    <a href="about.html" class="mobile-menu-link">About</a>
                    <a href="community.html" class="mobile-menu-link">Community</a>
                    ${authMenuItems}
                </div>
            </div>
        `;
        header.appendChild(mobileMenu);
    }
    
    // Create mobile button if it doesn't exist
    if (!document.getElementById('mobile-menu-btn')) {
        const nav = document.querySelector('nav');
        const rightNav = nav.querySelector('.right-nav') || nav;
        const mobileBtn = document.createElement('button');
        mobileBtn.id = 'mobile-menu-btn';
        mobileBtn.className = 'mobile-menu-btn';
        mobileBtn.onclick = toggleMobileMenu;
        mobileBtn.innerHTML = `
            <span class="hamburger"></span>
            <span class="hamburger"></span>
            <span class="hamburger"></span>
        `;
        rightNav.appendChild(mobileBtn);
    }
}

function handleMobileLogout(event) {
    event.preventDefault();
    if (confirm('Are you sure you want to logout?')) {
        // Clear all auth data
        localStorage.clear();
        
        // Close mobile menu
        closeMobileMenu();
        
        // Refresh the page to update UI
        window.location.reload();
    }
}

function toggleMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    const btn = document.getElementById('mobile-menu-btn');
    
    menu.classList.toggle('active');
    btn.classList.toggle('active');
    
    if (menu.classList.contains('active')) {
        document.body.style.overflow = 'hidden';
    } else {
        document.body.style.overflow = '';
    }
}

function closeMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    const btn = document.getElementById('mobile-menu-btn');
    
    menu.classList.remove('active');
    btn.classList.remove('active');
    document.body.style.overflow = '';
}

// Function to update mobile menu when auth state changes
function updateMobileMenuAuth() {
    const existingMenu = document.getElementById('mobile-menu');
    if (existingMenu) {
        existingMenu.remove();
    }
    createMobileMenu();
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', createMobileMenu);

// Listen for auth state changes (if you have an auth system that fires events)
window.addEventListener('authStateChanged', updateMobileMenuAuth);

// Export functions for external use
window.updateMobileMenuAuth = updateMobileMenuAuth;
window.handleMobileLogout = handleMobileLogout;
// Add this at the end of your mobile menu script
window.addEventListener('resize', function() {
    if (window.innerWidth > 768) {
        // Remove mobile elements on desktop
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileBtn = document.getElementById('mobile-menu-btn');
        
        if (mobileMenu) mobileMenu.remove();
        if (mobileBtn) mobileBtn.remove();
        
        // Reset body overflow
        document.body.style.overflow = '';
    } else if (window.innerWidth <= 768) {
        // Recreate mobile menu if switching to mobile
        const existingMenu = document.getElementById('mobile-menu');
        if (!existingMenu) {
            createMobileMenu();
        }
    }
});
        </script>
<!-- CSS Loading Order Fix -->

<link rel="stylesheet" href="styles.css">

<!-- FOUC Prevention -->
<style>
    html { visibility: hidden; opacity: 0; }
    html.loaded { visibility: visible; opacity: 1; transition: opacity 0.3s ease; }
@media (max-width: 768px) {
            /* FORCE hide all desktop navigation */
            nav ul,
            nav li,
            .left-nav ul,
            .right-nav ul,
            .left-nav li,
            .right-nav li,
            .left-nav > ul,
            .right-nav > ul {
                display: none !important;
                visibility: hidden !important;
            }
            
            /* Ensure nav container works properly */
            nav {
                display: flex !important;
                justify-content: space-between !important;
                align-items: center !important;
                padding: 1rem !important;
                flex-wrap: nowrap !important;
            }
            
            /* Keep logo visible */
            .logo,
            .logo a {
                display: block !important;
                visibility: visible !important;
                font-size: 1.5rem !important;
                white-space: nowrap !important;
            }
            
            /* Force show mobile button if it exists */
            .mobile-menu-btn {
                display: flex !important;
                visibility: visible !important;
                flex-direction: column;
                background: none;
                border: none;
                cursor: pointer;
                padding: 0.5rem;
                z-index: 1001;
            }
            
            /* Mobile button styles */
            .mobile-menu-btn .hamburger {
                width: 25px;
                height: 3px;
                background: #ffffff;
                margin: 3px 0;
                transition: 0.3s;
                border-radius: 2px;
            }
            
            /* Ensure right-nav container shows mobile button */
            .right-nav {
                display: flex !important;
                align-items: center !important;
                visibility: visible !important;
            }
        }

        /* If no mobile button exists, add this emergency button */
        @media (max-width: 768px) {
            nav:not(:has(.mobile-menu-btn))::after {
                content: "☰";
                position: absolute;
                right: 1rem;
                top: 50%;
                transform: translateY(-50%);
                color: white;
                font-size: 1.5rem;
                cursor: pointer;
            }
        }
        .mobile-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(10, 10, 10, 0.98);
            backdrop-filter: blur(20px);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .mobile-menu.active {
            opacity: 1;
            visibility: visible;
        }

        .mobile-menu-content {
            height: 100%;
            display: flex;
            flex-direction: column;
            padding: 2rem;
        }

        .mobile-menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 2rem;
        }

        .mobile-menu-close {
            background: none;
            border: none;
            color: #ffffff;
            font-size: 2rem;
            cursor: pointer;
            padding: 0.5rem;
        }

        .mobile-menu-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .mobile-menu-link {
            color: #ffffff;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 500;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }

        .mobile-menu-link:hover {
            color: #f39c12;
            padding-left: 1rem;
        }

        .mobile-menu-link.mobile-cta {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: #000 !important;
            border-radius: 12px;
            margin-top: 1rem;
            text-align: center;
            font-weight: 600;
            border: none;
        }

        .mobile-menu-divider {
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
            margin: 1rem 0;
        }

        .mobile-menu-btn.active .hamburger:nth-child(1) {
            transform: rotate(-45deg) translate(-5px, 6px);
        }

        .mobile-menu-btn.active .hamburger:nth-child(2) {
            opacity: 0;
        }

        .mobile-menu-btn.active .hamburger:nth-child(3) {
            transform: rotate(45deg) translate(-5px, -6px);
        }

        /* Add this to your CSS to ensure mobile elements are hidden on desktop */
        @media (min-width: 769px) {
            .mobile-menu,
            .mobile-menu-btn {
                display: none !important;
                visibility: hidden !important;
            }
        }
    </style>
    <script>
        // Authentication-aware mobile menu
function createMobileMenu() {
    // Only create mobile menu on mobile devices
    if (window.innerWidth > 768) {
        return; // Exit early on desktop
    }
    
    // Check authentication status
    const authToken = localStorage.getItem('authToken');
    const userLoggedIn = localStorage.getItem('userLoggedIn');
    const isLoggedIn = !!(authToken || userLoggedIn === 'true');
    const username = localStorage.getItem('username') || 'User';
    
    console.log('Auth check:', { authToken, userLoggedIn, isLoggedIn, username }); // Debug log
    
    // Create mobile menu if it doesn't exist
    if (!document.getElementById('mobile-menu')) {
        const header = document.querySelector('header');
        const mobileMenu = document.createElement('div');
        mobileMenu.id = 'mobile-menu';
        mobileMenu.className = 'mobile-menu';
        
        // Generate auth-specific menu items
        let authMenuItems = '';
        if (isLoggedIn) {
            authMenuItems = `
                <div class="mobile-menu-divider"></div>
                <div class="mobile-user-info">
                    <span style="color: #f39c12; font-weight: 600; padding: 0.5rem 0;">Welcome, ${username}!</span>
                </div>
                <a href="dashboard.html" class="mobile-menu-link mobile-cta">Dashboard</a>
                <a href="profile.html" class="mobile-menu-link">Profile</a>
                <a href="#" class="mobile-menu-link" onclick="handleMobileLogout(event)">Logout</a>
            `;
        } else {
            authMenuItems = `
                <div class="mobile-menu-divider"></div>
                <a href="login.html" class="mobile-menu-link">Login</a>
                <a href="signup.html" class="mobile-menu-link mobile-cta">Start Training</a>
            `;
        }
        
        mobileMenu.innerHTML = `
            <div class="mobile-menu-content">
                <div class="mobile-menu-header">
                    <div class="logo"><a href="index.html">Vivify</a></div>
                    <button class="mobile-menu-close" onclick="closeMobileMenu()">×</button>
                </div>
                <div class="mobile-menu-links">
                    <a href="index.html" class="mobile-menu-link">Home</a>
                    <a href="index.html#training" class="mobile-menu-link">Training Areas</a>
                    <a href="index.html#habits" class="mobile-menu-link">Habits & Challenges</a>
                    <a href="about.html" class="mobile-menu-link">About</a>
                    <a href="community.html" class="mobile-menu-link">Community</a>
                    ${authMenuItems}
                </div>
            </div>
        `;
        header.appendChild(mobileMenu);
    }
    
    // Create mobile button if it doesn't exist
    if (!document.getElementById('mobile-menu-btn')) {
        const nav = document.querySelector('nav');
        const rightNav = nav.querySelector('.right-nav') || nav;
        const mobileBtn = document.createElement('button');
        mobileBtn.id = 'mobile-menu-btn';
        mobileBtn.className = 'mobile-menu-btn';
        mobileBtn.onclick = toggleMobileMenu;
        mobileBtn.innerHTML = `
            <span class="hamburger"></span>
            <span class="hamburger"></span>
            <span class="hamburger"></span>
        `;
        rightNav.appendChild(mobileBtn);
    }
}

function handleMobileLogout(event) {
    event.preventDefault();
    if (confirm('Are you sure you want to logout?')) {
        // Clear all auth data
        localStorage.clear();
        
        // Close mobile menu
        closeMobileMenu();
        
        // Refresh the page to update UI
        window.location.reload();
    }
}

function toggleMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    const btn = document.getElementById('mobile-menu-btn');
    
    menu.classList.toggle('active');
    btn.classList.toggle('active');
    
    if (menu.classList.contains('active')) {
        document.body.style.overflow = 'hidden';
    } else {
        document.body.style.overflow = '';
    }
}

function closeMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    const btn = document.getElementById('mobile-menu-btn');
    
    menu.classList.remove('active');
    btn.classList.remove('active');
    document.body.style.overflow = '';
}

// Function to update mobile menu when auth state changes
function updateMobileMenuAuth() {
    const existingMenu = document.getElementById('mobile-menu');
    if (existingMenu) {
        existingMenu.remove();
    }
    createMobileMenu();
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', createMobileMenu);

// Listen for auth state changes (if you have an auth system that fires events)
window.addEventListener('authStateChanged', updateMobileMenuAuth);

// Export functions for external use
window.updateMobileMenuAuth = updateMobileMenuAuth;
window.handleMobileLogout = handleMobileLogout;
// Add this at the end of your mobile menu script
window.addEventListener('resize', function() {
    if (window.innerWidth > 768) {
        // Remove mobile elements on desktop
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileBtn = document.getElementById('mobile-menu-btn');
        
        if (mobileMenu) mobileMenu.remove();
        if (mobileBtn) mobileBtn.remove();
        
        // Reset body overflow
        document.body.style.overflow = '';
    } else if (window.innerWidth <= 768) {
        // Recreate mobile menu if switching to mobile
        const existingMenu = document.getElementById('mobile-menu');
        if (!existingMenu) {
            createMobileMenu();
        }
    }
});
        </script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        document.documentElement.classList.add('loaded');
    });
    window.addEventListener('load', function() {
        document.documentElement.classList.add('loaded');
    });
</script>
<script src="js/vivify-stats.js"></script>
<script src="js/leaderboard-system.js"></script>
</head>
<body>
    <div class="wrapper">
        <header>
            <nav>
                <div class="left-nav">
                    <div class="logo">
                        <a href="index.html" aria-label="Home Page"><h1>Vivify</h1></a>
                    </div>
                    <ul>
                        <li><a href="about.html" aria-label="About Us Page">About</a></li>
                        <li class="dropdown" id="categoryDropdown">
                            <a href="#" class="dropbtn" aria-label="Categories Dropdown">Training</a>
                            <div class="dropdown-content">
                                <a href="fitness.html" aria-label="Fitness Page">Fitness</a>
                                <a href="nutrition.html" aria-label="Nutrition Page">Nutrition</a>
                                <a href="focus-resilience.html" aria-label="Focus & Resilience Page">Focus & Resilience</a>
                                <a href="life-mastery.html" aria-label="Life Lessons Page">Life Mastery</a>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="right-nav">
                    <ul>
                        <li><a href="dashboard.html" id="dashboardLink" aria-label="Dashboard">Performance Hub</a></li>
                        <li><a href="profile.html" id="profileLink" aria-label="Profile Page">Profile</a></li>
                        <li><a href="#" id="logoutLink" aria-label="Logout">Logout</a></li>
                        <li><a href="login.html" id="loginLink" style="display: none;" aria-label="Login Page">Login</a></li>
                        <li><a href="signup.html" id="signupLink" style="display: none;" aria-label="Sign Up Page">Sign Up</a></li>
                    </ul>
                </div>
            </nav>
        </header>

        <!-- Hero Section -->
        <section class="assessment-hero">
            <h1><i class="fas fa-users"></i> Social Connection Assessment</h1>
            <p>Understand your social wellbeing and discover strategies to build meaningful connections during your student journey.</p>
            <a href="#assessment-start" class="cta-button">Start Assessment</a>
        </section>

        <!-- Important Disclaimer -->
        <section class="content-section">
            <div class="disclaimer-box">
                <h3><i class="fas fa-info-circle"></i> Assessment Information</h3>
                <p><strong>This assessment helps you reflect on your social connections and sense of belonging.</strong></p>
                <p>Your responses are completely confidential and will help generate personalized recommendations for building social connections. This tool is designed to support your wellbeing, not to diagnose any conditions.</p>
            </div>
        </section>

        <!-- Introduction Section -->
        <section class="content-section">
            <h2 class="section-title">Understanding Social Connection</h2>
            <p class="intro-text">
                Social connections are fundamental to our wellbeing, especially during the university years when many students are building new relationships and finding their community. This assessment explores various aspects of your social life, including friendship quality, sense of belonging, social support, and social skills. Taking about 8 minutes to complete, it will provide insights into your social wellbeing and suggest practical strategies for enhancing your connections.
            </p>
        </section>

        <!-- Benefits of Social Connection -->
        <section class="content-section">
            <div class="social-benefits">
                <h2><i class="fas fa-heart"></i> Why Social Connections Matter for Students</h2>
                <p>Strong social connections during university don't just make life more enjoyable—they're essential for your academic success, Focus & Resilience, and future career prospects.</p>
                
                <div class="benefits-grid">
                    <div class="benefit-item">
                        <div class="benefit-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <h4>Academic Performance</h4>
                        <p>Students with strong social connections show better academic outcomes, increased motivation, and lower dropout rates.</p>
                    </div>
                    
                    <div class="benefit-item">
                        <div class="benefit-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h4>Focus & Resilience</h4>
                        <p>Social support acts as a buffer against stress, anxiety, and depression, helping you navigate university challenges.</p>
                    </div>
                    
                    <div class="benefit-item">
                        <div class="benefit-icon">
                            <i class="fas fa-lightbulb"></i>
                        </div>
                        <h4>Personal Growth</h4>
                        <p>Diverse friendships expose you to new perspectives, ideas, and opportunities for self-discovery.</p>
                    </div>
                    
                    <div class="benefit-item">
                        <div class="benefit-icon">
                            <i class="fas fa-network-wired"></i>
                        </div>
                        <h4>Career Opportunities</h4>
                        <p>University connections often become professional networks that benefit your career long after graduation.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Assessment Section -->
        <section id="assessment-start" class="content-section">
            <div class="assessment-container">
                <div class="progress-text">Question <span id="currentQuestion">1</span> of <span id="totalQuestions">16</span></div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>

                <div id="questionsContainer">
                    <!-- Questions will be dynamically loaded here -->
                </div>

                <div class="assessment-buttons">
                    <button class="btn btn-secondary" id="prevBtn" onclick="previousQuestion()">Previous</button>
                    <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()">Next</button>
                    <button class="btn btn-primary" id="submitBtn" onclick="calculateResults()" style="display: none;">See Results</button>
                </div>
            </div>
        </section>

        <!-- Results Section -->
        <section class="content-section">
            <div class="results-section" id="resultsSection">
                <h2 class="section-subtitle">Your Social Connection Results</h2>
                
                <div class="score-display">
                    <div class="score-circle">
                        <span id="totalScore">0%</span>
                    </div>
                    <h3 id="scoreCategory">Loading...</h3>
                    <p id="scoreDescription">Loading...</p>
                </div>
                
                <div id="resultDescription"></div>
                <div id="recommendations"></div>
                
                <div style="text-align: center; margin-top: 2rem;">
                    <button onclick="restartAssessment()" class="cta-button">Take Assessment Again</button>
                    <a href="social-connection.html" class="cta-button">Learn More About Social Connection</a>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer>
            <p>&copy; 2024 Vivify. All rights reserved.</p>
            <ul class="footer-links">
                <li><a href="privacy.html" aria-label="Privacy Policy">Privacy Policy</a></li>
                <li><a href="terms.html" aria-label="Terms of Service">Terms of Service</a></li>
                <li><a href="contact.html" aria-label="Contact Us">Contact Us</a></li>
            </ul>
        </footer>
    </div>

    <script>
        // Social Connection Assessment Questions
        const questions = [
            {
                text: "How often do you feel that you have someone to talk to when you need support?",
                options: [
                    { text: "Always", value: 4 },
                    { text: "Most of the time", value: 3 },
                    { text: "Sometimes", value: 2 },
                    { text: "Rarely", value: 1 },
                    { text: "Never", value: 0 }
                ]
            },
            {
                text: "How satisfied are you with the number of close friends you have?",
                options: [
                    { text: "Very satisfied", value: 4 },
                    { text: "Somewhat satisfied", value: 3 },
                    { text: "Neutral", value: 2 },
                    { text: "Somewhat dissatisfied", value: 1 },
                    { text: "Very dissatisfied", value: 0 }
                ]
            },
            {
                text: "How often do you participate in social activities on campus (clubs, events, gatherings)?",
                options: [
                    { text: "Very frequently (4+ times per week)", value: 4 },
                    { text: "Frequently (2-3 times per week)", value: 3 },
                    { text: "Occasionally (once per week)", value: 2 },
                    { text: "Rarely (few times per month)", value: 1 },
                    { text: "Never", value: 0 }
                ]
            },
            {
                text: "How comfortable do you feel starting conversations with new people?",
                options: [
                    { text: "Very comfortable", value: 4 },
                    { text: "Somewhat comfortable", value: 3 },
                    { text: "Neutral", value: 2 },
                    { text: "Somewhat uncomfortable", value: 1 },
                    { text: "Very uncomfortable", value: 0 }
                ]
            },
            {
                text: "How often do you feel lonely or isolated?",
                options: [
                    { text: "Never", value: 4 },
                    { text: "Rarely", value: 3 },
                    { text: "Sometimes", value: 2 },
                    { text: "Often", value: 1 },
                    { text: "Always", value: 0 }
                ]
            },
            {
                text: "How well do you feel you fit in with your peer group at university?",
                options: [
                    { text: "Very well", value: 4 },
                    { text: "Well", value: 3 },
                    { text: "Somewhat", value: 2 },
                    { text: "Not very well", value: 1 },
                    { text: "Not at all", value: 0 }
                ]
            },
            {
                text: "How easy is it for you to maintain friendships?",
                options: [
                    { text: "Very easy", value: 4 },
                    { text: "Somewhat easy", value: 3 },
                    { text: "Neither easy nor difficult", value: 2 },
                    { text: "Somewhat difficult", value: 1 },
                    { text: "Very difficult", value: 0 }
                ]
            },
            {
                text: "How often do you spend quality time with people you care about?",
                options: [
                    { text: "Daily", value: 4 },
                    { text: "Several times a week", value: 3 },
                    { text: "Once a week", value: 2 },
                    { text: "A few times a month", value: 1 },
                    { text: "Rarely or never", value: 0 }
                ]
            },
            {
                text: "How supported do you feel by your friends when facing challenges?",
                options: [
                    { text: "Very supported", value: 4 },
                    { text: "Supported", value: 3 },
                    { text: "Somewhat supported", value: 2 },
                    { text: "Not very supported", value: 1 },
                    { text: "Not supported at all", value: 0 }
                ]
            },
            {
                text: "How often do you feel like you can be your authentic self around others?",
                options: [
                    { text: "Always", value: 4 },
                    { text: "Most of the time", value: 3 },
                    { text: "Sometimes", value: 2 },
                    { text: "Rarely", value: 1 },
                    { text: "Never", value: 0 }
                ]
            },
            {
                text: "How comfortable are you with asking for help from friends or classmates?",
                options: [
                    { text: "Very comfortable", value: 4 },
                    { text: "Comfortable", value: 3 },
                    { text: "Somewhat comfortable", value: 2 },
                    { text: "Uncomfortable", value: 1 },
                    { text: "Very uncomfortable", value: 0 }
                ]
            },
            {
                text: "How often do you engage in meaningful conversations with others?",
                options: [
                    { text: "Daily", value: 4 },
                    { text: "Several times a week", value: 3 },
                    { text: "Once a week", value: 2 },
                    { text: "A few times a month", value: 1 },
                    { text: "Rarely or never", value: 0 }
                ]
            },
            {
                text: "How satisfied are you with the quality of your relationships?",
                options: [
                    { text: "Very satisfied", value: 4 },
                    { text: "Satisfied", value: 3 },
                    { text: "Somewhat satisfied", value: 2 },
                    { text: "Dissatisfied", value: 1 },
                    { text: "Very dissatisfied", value: 0 }
                ]
            },
            {
                text: "How often do you feel understood by the people in your life?",
                options: [
                    { text: "Always", value: 4 },
                    { text: "Most of the time", value: 3 },
                    { text: "Sometimes", value: 2 },
                    { text: "Rarely", value: 1 },
                    { text: "Never", value: 0 }
                ]
            },
            {
                text: "How confident do you feel in social situations?",
                options: [
                    { text: "Very confident", value: 4 },
                    { text: "Confident", value: 3 },
                    { text: "Somewhat confident", value: 2 },
                    { text: "Not very confident", value: 1 },
                    { text: "Not confident at all", value: 0 }
                ]
            },
            {
                text: "How likely are you to reach out to someone when you're feeling down?",
                options: [
                    { text: "Very likely", value: 4 },
                    { text: "Likely", value: 3 },
                    { text: "Somewhat likely", value: 2 },
                    { text: "Unlikely", value: 1 },
                    { text: "Very unlikely", value: 0 }
                ]
            }
        ];

        let currentQuestionIndex = 0;
        let answers = [];
        const maxScore = questions.length * 4;

        function initializeAssessment() {
            document.getElementById('totalQuestions').textContent = questions.length;
            loadQuestion();
            updateProgress();
        }

        function loadQuestion() {
            const questionsContainer = document.getElementById('questionsContainer');
            const question = questions[currentQuestionIndex];
            
            questionsContainer.innerHTML = `
                <div class="question-card active">
                    <h3 class="question-title">${question.text}</h3>
                    <div class="answer-options">
                        ${question.options.map((option, index) => `
                            <div class="answer-option" onclick="selectAnswer(${option.value}, this)">
                                <input type="radio" name="question${currentQuestionIndex}" value="${option.value}" id="q${currentQuestionIndex}_${index}">
                                <label for="q${currentQuestionIndex}_${index}">${option.text}</label>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            // Restore previous answer if exists
            if (answers[currentQuestionIndex] !== undefined) {
                const value = answers[currentQuestionIndex];
                const selectedOption = questionsContainer.querySelector(`input[value="${value}"]`);
                if (selectedOption) {
                    selectedOption.checked = true;
                    selectedOption.closest('.answer-option').classList.add('selected');
                }
            }
        }

        function selectAnswer(value, element) {
            // Remove selection from all options
            element.parentElement.querySelectorAll('.answer-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Select this option
            element.classList.add('selected');
            element.querySelector('input').checked = true;
            
            // Store answer
            answers[currentQuestionIndex] = value;
        }

        function updateProgress() {
            const progress = ((currentQuestionIndex) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            
            // Update button visibility
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            if (currentQuestionIndex === questions.length - 1) {
                document.getElementById('nextBtn').style.display = 'none';
                document.getElementById('submitBtn').style.display = 'inline-block';
            } else {
                document.getElementById('nextBtn').style.display = 'inline-block';
                document.getElementById('submitBtn').style.display = 'none';
            }
        }

        function nextQuestion() {
            if (answers[currentQuestionIndex] === undefined) {
                alert('Please select an answer before continuing.');
                return;
            }
            
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
                updateProgress();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
                updateProgress();
            }
        }

        function calculateResults() {
            if (answers[currentQuestionIndex] === undefined) {
                alert('Please select an answer before submitting.');
                return;
            }

            const totalScore = answers.reduce((sum, answer) => sum + answer, 0);
            const percentageScore = Math.round((totalScore / maxScore) * 100);
            
            let category, description, recommendations;

            if (percentageScore >= 80) {
                category = "Excellent Social Connections";
                description = `
                    <p><strong>Outstanding!</strong> You have excellent social connections and a strong sense of belonging. You appear to have good social support systems and feel comfortable in social situations.</p>
                    <p>Your social wellbeing is a significant strength that likely supports your academic success and overall Focus & Resilience. You're doing a great job maintaining meaningful relationships and engaging with your university community.</p>
                `;
                recommendations = `
                    <h3>Ways to Maintain Your Social Wellbeing:</h3>
                    <ul>
                        <li>Continue nurturing your existing relationships through regular contact and shared activities</li>
                        <li>Consider becoming a mentor or peer support person for other students</li>
                        <li>Use your social confidence to help others who may be struggling with connections</li>
                        <li>Join leadership roles in clubs or societies to expand your impact</li>
                        <li>Practice gratitude for your social connections and express appreciation to friends</li>
                    </ul>
                `;
            } else if (percentageScore >= 60) {
                category = "Good Social Connections";
                description = `
                    <p><strong>Well done!</strong> You have good social connections with room for growth. You likely have some meaningful relationships but may occasionally feel disconnected or want to expand your social circle.</p>
                    <p>Your social foundation is solid, and with some focused effort, you can strengthen your connections and sense of belonging even further.</p>
                `;
                recommendations = `
                    <h3>Strategies to Strengthen Your Connections:</h3>
                    <ul>
                        <li>Challenge yourself to attend one new social event or activity each week</li>
                        <li>Practice initiating conversations with classmates or peers</li>
                        <li>Join a club or society related to your interests or career goals</li>
                        <li>Schedule regular catch-ups with friends to deepen existing relationships</li>
                        <li>Consider volunteering for causes you care about to meet like-minded people</li>
                        <li>Practice active listening skills to strengthen your interactions</li>
                    </ul>
                `;
            } else if (percentageScore >= 40) {
                category = "Moderate Social Connections";
                description = `
                    <p>Your assessment suggests that you have some social connections but may be experiencing challenges with loneliness, belonging, or social confidence. This is common among university students, especially during transitions.</p>
                    <p>The good news is that social skills can be developed, and meaningful connections can be built with patience and practice.</p>
                `;
                recommendations = `
                    <h3>Building Stronger Connections:</h3>
                    <ul>
                        <li>Start small - aim for one meaningful social interaction each day</li>
                        <li>Join structured activities like study groups, fitness classes, or hobby clubs</li>
                        <li>Practice conversation starters and active listening skills</li>
                        <li>Attend campus events regularly, even if you go alone initially</li>
                        <li>Consider counseling services for social skills support</li>
                        <li>Use technology to stay connected with friends and family</li>
                        <li>Be patient with yourself - building relationships takes time</li>
                    </ul>
                `;
            } else {
                category = "Social Connections Need Attention";
                description = `
                    <p>Your responses suggest you may be experiencing significant challenges with social connections and feelings of isolation. This can be really difficult, but please know that you're not alone and that these feelings can improve with support and effort.</p>
                    <p>Many students go through periods of loneliness, especially during major life transitions. The important thing is to take steps toward building connections and seeking support when needed.</p>
                `;
                recommendations = `
                    <h3>Priority Actions for Building Connections:</h3>
                    <ul>
                        <li>Consider reaching out to campus counseling services for personalized support</li>
                        <li>Start with low-pressure social opportunities like study groups or campus events</li>
                        <li>Join structured activities where conversation flows naturally (exercise classes, volunteer work)</li>
                        <li>Practice self-compassion - social anxiety and loneliness are very common</li>
                        <li>Consider online communities related to your interests as a starting point</li>
                        <li>Reach out to family members or old friends for emotional support</li>
                        <li>Focus on your Focus & Resilience with professional guidance if needed</li>
                    </ul>
                `;
                showSupportResources();
            }

            // Track completion
            if (window.vivifyTracker && typeof window.vivifyTracker.trackActivity === 'function') {
                window.vivifyTracker.trackActivity(
                    'social_assessment_complete',
                    'mental',
                    `Completed social connection assessment - ${category}`,
                    15
                );
            }

            // Save results to localStorage
            const assessmentResults = {
                type: 'social_connection',
                score: totalScore,
                percentage: percentageScore,
                category: category,
                date: new Date().toISOString(),
                answers: answers
            };
            
            const existingResults = JSON.parse(localStorage.getItem('assessmentResults') || '[]');
            existingResults.push(assessmentResults);
            localStorage.setItem('assessmentResults', JSON.stringify(existingResults));

            // Display results
            document.getElementById('totalScore').textContent = percentageScore + '%';
            document.getElementById('scoreCategory').textContent = category;
            document.getElementById('scoreDescription').textContent = `Score: ${totalScore}/${maxScore}`;
            document.getElementById('resultDescription').innerHTML = description;
            document.getElementById('recommendations').innerHTML = recommendations;

            // Show results section and hide assessment
            document.querySelector('.assessment-container').style.display = 'none';
            document.getElementById('resultsSection').classList.add('show');

            // Scroll to results
            document.getElementById('resultsSection').scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
        }

        function showSupportResources() {
            const alertHtml = `
                <div class="warning-card">
                    <h3><i class="fas fa-heart"></i> Additional Support Available</h3>
                    <p><strong>Building social connections can be challenging, and that's completely normal.</strong></p>
                    <p>If you're feeling isolated or struggling with social anxiety, remember that professional support is available and can be incredibly helpful. Many students benefit from counselling services, social skills workshops, or peer support groups.</p>
                    <div style="margin: 1.5rem 0;">
                        <a href="tel:1800551800" class="cta-button emergency-button">Kids Helpline: 1800 55 1800</a>
                        <a href="tel:131114" class="cta-button emergency-button">Lifeline: 13 11 14</a>
                    </div>
                    <p>University counselling services are also excellent resources for developing social skills and building confidence. You deserve meaningful connections and support.</p>
                </div>
            `;
            document.getElementById('resultsSection').insertAdjacentHTML('afterbegin', alertHtml);
        }

        function restartAssessment() {
            currentQuestionIndex = 0;
            answers = [];
            document.querySelector('.assessment-container').style.display = 'block';
            document.getElementById('resultsSection').classList.remove('show');
            initializeAssessment();
        }

        // Initialize assessment when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Standard login/logout handling
            const isLoggedIn = localStorage.getItem('userLoggedIn') === 'true';
            
            document.getElementById('loginLink').style.display = isLoggedIn ? 'none' : 'inline';
            document.getElementById('signupLink').style.display = isLoggedIn ? 'none' : 'inline';
            document.getElementById('logoutLink').style.display = isLoggedIn ? 'inline' : 'none';
            document.getElementById('profileLink').style.display = isLoggedIn ? 'inline' : 'none';
            document.getElementById('dashboardLink').style.display = isLoggedIn ? 'inline' : 'none';
            
            // Handle logout
            document.getElementById('logoutLink').addEventListener('click', function(e) {
                e.preventDefault();
                localStorage.removeItem('userLoggedIn');
                localStorage.removeItem('authToken');
                window.location.href = 'index.html';
            });

            // Initialize the assessment
            initializeAssessment();

            // Smooth scrolling for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        });
    </script>
<script src="js/flexible-mobile-nav.js"></script> </body>
</html>