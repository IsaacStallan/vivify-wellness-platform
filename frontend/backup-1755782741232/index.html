<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vivify - Student Performance Platform</title>
    
    
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#f39c12">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <style>
        /* Fixed Header Navigation Alignment */
        header {
            background-color: black;
            padding: 1em 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        nav {
            display: flex;
            justify-content: space-between;
            width: 90%;
            max-width: 1200px;
            align-items: center;
        }

        .left-nav, .right-nav {
            display: flex;
            align-items: center;
        }

        .left-nav .logo {
            margin-right: 2em;
        }

        nav .logo a {
            text-decoration: none;
            color: white;
        }

        nav ul {
            list-style: none;
            display: flex;
            margin: 0;
            padding: 0;
            align-items: center; /* Key fix: ensure all items align properly */
        }

        nav ul li {
            margin: 0 1em;
            display: flex; /* Make each li a flex container */
            align-items: center; /* Center content vertically */
        }

        /* Standard navigation links */
        nav ul li a {
            color: white;
            text-decoration: none;
            padding: 0.5em 1em;
            transition: background-color 0.3s;
            display: block;
            white-space: nowrap; /* Prevent text wrapping */
        }

        nav ul li a:hover {
            background-color: #333;
        }

        /* Fixed Dropdown Styles */
        .dropdown {
            position: relative;
            display: flex; /* Changed from inline-block to flex */
            align-items: center; /* Center the dropdown button vertically */
        }

        .dropdown .dropbtn {
            background-color: black;
            color: white;
            padding: 0.5em 1em;
            border: none;
            cursor: pointer;
            text-decoration: none;
            display: block;
            white-space: nowrap;
            /* Remove any margin/padding that might cause misalignment */
            margin: 0;
            font-family: inherit;
            font-size: inherit;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #333;
            min-width: 180px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.3);
            z-index: 1000;
            top: 100%;
            left: 0;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 2px;
            /* Smooth transitions */
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.2s ease;
        }

        .dropdown-content a {
            color: white;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            transition: background-color 0.2s ease;
            border: none;
            width: 100%;
            box-sizing: border-box;
        }

        .dropdown-content a:hover {
            background-color: #f39c12;
            color: black;
        }

        .dropdown-content a.active {
            background-color: #f39c12;
            color: black;
        }

        /* Show dropdown on hover */
        .dropdown:hover .dropdown-content {
            display: block;
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown:hover .dropbtn {
            background-color: #444;
        }

        /* Invisible bridge to prevent hover loss */
        .dropdown:before {
            content: '';
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            height: 4px;
            background: transparent;
            z-index: 999;
        }

        /* Mobile responsiveness */
        @media (max-width: 768px) {
            nav {
                flex-direction: column;
                gap: 1rem;
            }
            
            .left-nav, .right-nav {
                flex-direction: column;
                width: 100%;
                justify-content: center;
            }
            
            nav ul {
                flex-direction: column;
                width: 100%;
                text-align: center;
            }
            
            nav ul li {
                margin: 0.5em 0;
                width: 100%;
            }
            
            .dropdown-content {
                position: static;
                display: none;
                min-width: 100%;
                box-shadow: none;
                margin-top: 0;
            }
            
            .dropdown:hover .dropdown-content {
                position: static;
            }
        }
        /* Fixed Dropdown Menu Styles */
        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown .dropbtn {
            background-color: black;
            color: white;
            padding: 0.5em 1em;
            border: none;
            cursor: pointer;
            text-decoration: none;
            display: block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #333;
            min-width: 180px; /* Increased width for better hover area */
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.3);
            z-index: 1000; /* Higher z-index to ensure it stays on top */
            top: 100%; /* Position it right below the button */
            left: 0;
            border-radius: 4px; /* Slightly rounded corners */
            overflow: hidden;
            /* Add a small gap buffer */
            margin-top: 2px;
        }

        .dropdown-content a {
            color: white;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            transition: background-color 0.2s ease;
            border: none;
            /* Ensure full width coverage */
            width: 100%;
            box-sizing: border-box;
        }

        .dropdown-content a:hover {
            background-color: #f39c12;
            color: black;
        }

        .dropdown-content a.active {
            background-color: #f39c12;
            color: black;
        }

        /* Critical fix: Ensure dropdown stays visible when hovering over content */
        .dropdown:hover .dropdown-content {
            display: block;
        }

        .dropdown:hover .dropbtn {
            background-color: #444;
        }

        /* Alternative approach using CSS pseudo-element to create invisible bridge */
        .dropdown:before {
            content: '';
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            height: 4px; /* Small invisible area to bridge any gap */
            background: transparent;
            z-index: 999;
        }

        /* For better mobile experience */
        @media (max-width: 768px) {
            .dropdown-content {
                min-width: 200px;
                right: 0;
                left: auto;
            }
        }

        /* Optional: Add smooth transition */
        .dropdown-content {
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.2s ease;
        }

        .dropdown:hover .dropdown-content {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
            display: block;
        }
        /* Footer styles to ensure it stays at bottom */
        footer {
            background-color: #000;
            color: white;
            text-align: center;
            padding: 2rem 0;
            width: 100%;
            margin-top: auto;
            border-top: 1px solid #333;
        }

        footer .footer-links {
            list-style: none;
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 1rem 0 0 0;
            padding: 0;
        }

        footer .footer-links a {
            color: #a0a0a0;
            text-decoration: none;
            transition: color 0.3s;
        }

        footer .footer-links a:hover {
            color: #f39c12;
        }
        
        /* Additional styles for the homepage */
        .hero-content h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
        }
        
        .hero-content p {
            font-size: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .hero-cta {
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        .hero-cta .btn {
            padding: 12px 25px;
            font-size: 1.1rem;
            font-weight: 600;
        }
        
        .btn-primary {
            background-color: #f39c12;
            color: black;
        }
        
        .btn-secondary {
            background-color: transparent;
            color: white;
            border: 2px solid white;
        }
        
        .btn-secondary:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        /* New performance-themed button */
        .btn-performance {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
            border: none;
        }

        .btn-performance:hover {
            background: linear-gradient(45deg, #219a52, #27ae60);
            transform: translateY(-2px);
        }

        /* Button animations */
        .pulse-btn {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(243, 156, 18, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(243, 156, 18, 0); }
            100% { box-shadow: 0 0 0 0 rgba(243, 156, 18, 0); }
        }

        .glow-btn:hover {
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }

        /* Add some floating particles effect */
        .welcome-back::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(243, 156, 18, 0.1) 1px, transparent 1px),
                radial-gradient(circle at 80% 70%, rgba(52, 152, 219, 0.1) 1px, transparent 1px),
                radial-gradient(circle at 60% 20%, rgba(39, 174, 96, 0.1) 1px, transparent 1px),
                radial-gradient(circle at 30% 80%, rgba(155, 89, 182, 0.1) 1px, transparent 1px);
            background-size: 400px 400px, 350px 350px, 300px 300px, 450px 450px;
            animation: float 20s ease-in-out infinite;
            z-index: 1;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(30px, -30px) rotate(120deg); }
            66% { transform: translate(-20px, 20px) rotate(240deg); }
        }

        /* Welcome back section for logged in users */
        .welcome-back {
            background: linear-gradient(135deg, rgba(26, 26, 26, 0.9) 0%, rgba(45, 45, 45, 0.9) 100%), 
                        url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            padding: 4rem 2rem;
            text-align: center;
            border-radius: 20px;
            margin: 2rem auto;
            max-width: 1000px;
            border: 1px solid rgba(243, 156, 18, 0.3);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .welcome-back::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, 
                rgba(243, 156, 18, 0.1) 0%, 
                rgba(230, 126, 34, 0.1) 25%, 
                rgba(52, 152, 219, 0.1) 50%, 
                rgba(39, 174, 96, 0.1) 75%, 
                rgba(155, 89, 182, 0.1) 100%);
            animation: gradientShift 8s ease-in-out infinite;
            z-index: 1;
        }

        .welcome-back > * {
            position: relative;
            z-index: 2;
        }

        @keyframes gradientShift {
            0%, 100% { opacity: 0.1; }
            50% { opacity: 0.2; }
        }

        .welcome-back h2 {
            color: #f39c12;
            font-size: 2.8rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .welcome-back p {
            color: #f0f0f0;
            font-size: 1.2rem;
            margin-bottom: 2rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            font-weight: 400;
        }

        .quick-stats {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 3rem 0;
            flex-wrap: wrap;
        }

        .stat-item {
            text-align: center;
            background: linear-gradient(145deg, rgba(34, 34, 34, 0.9), rgba(68, 68, 68, 0.9));
            backdrop-filter: blur(10px);
            padding: 2rem 1.5rem;
            border-radius: 15px;
            min-width: 140px;
            border: 2px solid rgba(243, 156, 18, 0.3);
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .stat-item:hover {
            transform: translateY(-5px) scale(1.05);
            border-color: #f39c12;
            box-shadow: 0 12px 30px rgba(243, 156, 18, 0.2);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #f39c12;
            display: block;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 2;
        }

        .stat-label {
            color: #e0e0e0;
            font-size: 0.95rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            z-index: 2;
        }

        #motivational-quote {
            position: absolute;
            bottom: 20px;  /* Change this value - smaller numbers push it down more */
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            color: #f39c12;
            font-style: italic;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(243, 156, 18, 0.3);
            opacity: 0.8;
            z-index: 3;
            max-width: 80%;
            text-align: center;
        }


        /* Add motivational icons to stats */
        .stat-item:nth-child(1)::after {
            content: '🔥';
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2rem;
            opacity: 0.7;
        }

        .stat-item:nth-child(2)::after {
            content: '💪';
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2rem;
            opacity: 0.7;
        }

        .stat-item:nth-child(3)::after {
            content: '⭐';
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2rem;
            opacity: 0.7;
        }
        
        .performance-pillars {
            padding: 4rem 2rem;
            text-align: center;
        }
        
        .performance-pillars h2 {
            font-size: 2.2rem;
            margin-bottom: 1rem;
            color: #f39c12;
        }
        
        .performance-pillars p {
            max-width: 800px;
            margin: 0 auto 3rem;
            color: #ddd;
            font-size: 1.1rem;
        }
        
        .pillar-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .pillar-card {
            background-color: #222;
            border-radius: 10px;
            padding: 2rem;
            text-align: center;
            transition: transform 0.3s, box-shadow 0.3s;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .pillar-card .btn {
            margin-top: auto;
        }
        
        .pillar-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }
        
        .pillar-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: rgba(243, 156, 18, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 0.5rem;
        }
        
        .pillar-icon i {
            font-size: 2.5rem;
            color: #f39c12;
        }
        
        .pillar-card h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #f39c12;
        }
        
        .pillar-card p {
            font-size: 1rem;
            margin-bottom: 1.5rem;
            color: #ddd;
        }
        
        .features-section {
            padding: 4rem 2rem;
            background-color: #111;
        }
        
        .features-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .features-section h2 {
            font-size: 2.2rem;
            margin-bottom: 3rem;
            color: #f39c12;
            text-align: center;
        }
        
        .feature-item {
            display: flex;
            align-items: center;
            margin-bottom: 3rem;
        }
        
        .feature-item:nth-child(even) {
            flex-direction: row-reverse;
        }
        
        .feature-image {
            flex: 1;
            padding: 1rem;
        }
        
        .feature-image img {
            width: 100%;
            border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }
        
        .feature-content {
            flex: 1;
            padding: 2rem;
        }
        
        .feature-content h3 {
            font-size: 1.8rem;
            margin-bottom: 1rem;
            color: #f39c12;
        }
        
        .feature-content p {
            margin-bottom: 1.5rem;
            color: #ddd;
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        .testimonials {
            padding: 4rem 2rem;
            text-align: center;
        }
        
        .testimonials h2 {
            font-size: 2.2rem;
            margin-bottom: 3rem;
            color: #f39c12;
        }
        
        .testimonial-cards {
            display: flex;
            gap: 2rem;
            max-width: 1200px;
            margin: 0 auto;
            overflow-x: auto;
            padding-bottom: 2rem;
        }
        
        .testimonial-card {
            background-color: #222;
            border-radius: 10px;
            padding: 2rem;
            min-width: 300px;
            text-align: left;
        }
        
        .testimonial-text {
            color: #ddd;
            font-style: italic;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }
        
        .testimonial-author {
            display: flex;
            align-items: center;
        }
        
        .author-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #333;
            margin-right: 1rem;
            overflow: hidden;
        }
        
        .author-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .author-info h4 {
            margin: 0;
            color: #f39c12;
        }
        
        .author-info p {
            margin: 0;
            color: #aaa;
            font-size: 0.9rem;
        }
        
        .cta-section {
            padding: 4rem 2rem;
            text-align: center;
            background-color: #111;
            border-radius: 10px;
            margin: 2rem auto;
            max-width: 1000px;
        }
        
        .cta-section h2 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            color: #f39c12;
        }
        
        .cta-section p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            color: #ddd;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Hidden by default */
        .hidden {
            display: none !important;
        }
        
        @media (max-width: 768px) {
            .feature-item {
                flex-direction: column;
            }
            
            .feature-item:nth-child(even) {
                flex-direction: column;
            }
            
            .hero-cta {
                flex-direction: column;
                align-items: center;
            }

            .hero-cta .btn {
                width: 200px;
            }

            .quick-stats {
                flex-direction: column;
                align-items: center;
            }

            .stat-item {
                width: 100%;
                max-width: 200px;
            }
        }
    @media (max-width: 768px) {
            /* FORCE hide all desktop navigation */
            nav ul,
            nav li,
            .left-nav ul,
            .right-nav ul,
            .left-nav li,
            .right-nav li,
            .left-nav > ul,
            .right-nav > ul {
                display: none !important;
                visibility: hidden !important;
            }
            
            /* Ensure nav container works properly */
            nav {
                display: flex !important;
                justify-content: space-between !important;
                align-items: center !important;
                padding: 1rem !important;
                flex-wrap: nowrap !important;
            }
            
            /* Keep logo visible */
            .logo,
            .logo a {
                display: block !important;
                visibility: visible !important;
                font-size: 1.5rem !important;
                white-space: nowrap !important;
            }
            
            /* Force show mobile button if it exists */
            .mobile-menu-btn {
                display: flex !important;
                visibility: visible !important;
                flex-direction: column;
                background: none;
                border: none;
                cursor: pointer;
                padding: 0.5rem;
                z-index: 1001;
            }
            
            /* Mobile button styles */
            .mobile-menu-btn .hamburger {
                width: 25px;
                height: 3px;
                background: #ffffff;
                margin: 3px 0;
                transition: 0.3s;
                border-radius: 2px;
            }
            
            /* Ensure right-nav container shows mobile button */
            .right-nav {
                display: flex !important;
                align-items: center !important;
                visibility: visible !important;
            }
        }

        /* If no mobile button exists, add this emergency button */
        @media (max-width: 768px) {
            nav:not(:has(.mobile-menu-btn))::after {
                content: "☰";
                position: absolute;
                right: 1rem;
                top: 50%;
                transform: translateY(-50%);
                color: white;
                font-size: 1.5rem;
                cursor: pointer;
            }
        }
        .mobile-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(10, 10, 10, 0.98);
            backdrop-filter: blur(20px);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .mobile-menu.active {
            opacity: 1;
            visibility: visible;
        }

        .mobile-menu-content {
            height: 100%;
            display: flex;
            flex-direction: column;
            padding: 2rem;
        }

        .mobile-menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 2rem;
        }

        .mobile-menu-close {
            background: none;
            border: none;
            color: #ffffff;
            font-size: 2rem;
            cursor: pointer;
            padding: 0.5rem;
        }

        .mobile-menu-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .mobile-menu-link {
            color: #ffffff;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 500;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }

        .mobile-menu-link:hover {
            color: #f39c12;
            padding-left: 1rem;
        }

        .mobile-menu-link.mobile-cta {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: #000 !important;
            border-radius: 12px;
            margin-top: 1rem;
            text-align: center;
            font-weight: 600;
            border: none;
        }

        .mobile-menu-divider {
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
            margin: 1rem 0;
        }

        .mobile-menu-btn.active .hamburger:nth-child(1) {
            transform: rotate(-45deg) translate(-5px, 6px);
        }

        .mobile-menu-btn.active .hamburger:nth-child(2) {
            opacity: 0;
        }

        .mobile-menu-btn.active .hamburger:nth-child(3) {
            transform: rotate(45deg) translate(-5px, -6px);
        }

        /* Add this to your CSS to ensure mobile elements are hidden on desktop */
        @media (min-width: 769px) {
            .mobile-menu,
            .mobile-menu-btn {
                display: none !important;
                visibility: hidden !important;
            }
        }
    </style>
    <script>
        // Authentication-aware mobile menu
function createMobileMenu() {
    // Only create mobile menu on mobile devices
    if (window.innerWidth > 768) {
        return; // Exit early on desktop
    }
    
    // Check authentication status
    const authToken = localStorage.getItem('authToken');
    const userLoggedIn = localStorage.getItem('userLoggedIn');
    const isLoggedIn = !!(authToken || userLoggedIn === 'true');
    const username = localStorage.getItem('username') || 'User';
    
    console.log('Auth check:', { authToken, userLoggedIn, isLoggedIn, username }); // Debug log
    
    // Create mobile menu if it doesn't exist
    if (!document.getElementById('mobile-menu')) {
        const header = document.querySelector('header');
        const mobileMenu = document.createElement('div');
        mobileMenu.id = 'mobile-menu';
        mobileMenu.className = 'mobile-menu';
        
        // Generate auth-specific menu items
        let authMenuItems = '';
        if (isLoggedIn) {
            authMenuItems = `
                <div class="mobile-menu-divider"></div>
                <div class="mobile-user-info">
                    <span style="color: #f39c12; font-weight: 600; padding: 0.5rem 0;">Welcome, ${username}!</span>
                </div>
                <a href="dashboard.html" class="mobile-menu-link mobile-cta">Dashboard</a>
                <a href="profile.html" class="mobile-menu-link">Profile</a>
                <a href="#" class="mobile-menu-link" onclick="handleMobileLogout(event)">Logout</a>
            `;
        } else {
            authMenuItems = `
                <div class="mobile-menu-divider"></div>
                <a href="login.html" class="mobile-menu-link">Login</a>
                <a href="signup.html" class="mobile-menu-link mobile-cta">Start Training</a>
            `;
        }
        
        mobileMenu.innerHTML = `
            <div class="mobile-menu-content">
                <div class="mobile-menu-header">
                    <div class="logo"><a href="index.html">Vivify</a></div>
                    <button class="mobile-menu-close" onclick="closeMobileMenu()">×</button>
                </div>
                <div class="mobile-menu-links">
                    <a href="index.html" class="mobile-menu-link">Home</a>
                    <a href="index.html#training" class="mobile-menu-link">Training Areas</a>
                    <a href="index.html#habits" class="mobile-menu-link">Habits & Challenges</a>
                    <a href="about.html" class="mobile-menu-link">About</a>
                    <a href="community.html" class="mobile-menu-link">Community</a>
                    ${authMenuItems}
                </div>
            </div>
        `;
        header.appendChild(mobileMenu);
    }
    
    // Create mobile button if it doesn't exist
    if (!document.getElementById('mobile-menu-btn')) {
        const nav = document.querySelector('nav');
        const rightNav = nav.querySelector('.right-nav') || nav;
        const mobileBtn = document.createElement('button');
        mobileBtn.id = 'mobile-menu-btn';
        mobileBtn.className = 'mobile-menu-btn';
        mobileBtn.onclick = toggleMobileMenu;
        mobileBtn.innerHTML = `
            <span class="hamburger"></span>
            <span class="hamburger"></span>
            <span class="hamburger"></span>
        `;
        rightNav.appendChild(mobileBtn);
    }
}

function handleMobileLogout(event) {
    event.preventDefault();
    if (confirm('Are you sure you want to logout?')) {
        // Clear all auth data
        localStorage.clear();
        
        // Close mobile menu
        closeMobileMenu();
        
        // Refresh the page to update UI
        window.location.reload();
    }
}

function toggleMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    const btn = document.getElementById('mobile-menu-btn');
    
    menu.classList.toggle('active');
    btn.classList.toggle('active');
    
    if (menu.classList.contains('active')) {
        document.body.style.overflow = 'hidden';
    } else {
        document.body.style.overflow = '';
    }
}

function closeMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    const btn = document.getElementById('mobile-menu-btn');
    
    menu.classList.remove('active');
    btn.classList.remove('active');
    document.body.style.overflow = '';
}

// Function to update mobile menu when auth state changes
function updateMobileMenuAuth() {
    const existingMenu = document.getElementById('mobile-menu');
    if (existingMenu) {
        existingMenu.remove();
    }
    createMobileMenu();
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', createMobileMenu);

// Listen for auth state changes (if you have an auth system that fires events)
window.addEventListener('authStateChanged', updateMobileMenuAuth);

// Export functions for external use
window.updateMobileMenuAuth = updateMobileMenuAuth;
window.handleMobileLogout = handleMobileLogout;
// Add this at the end of your mobile menu script
window.addEventListener('resize', function() {
    if (window.innerWidth > 768) {
        // Remove mobile elements on desktop
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileBtn = document.getElementById('mobile-menu-btn');
        
        if (mobileMenu) mobileMenu.remove();
        if (mobileBtn) mobileBtn.remove();
        
        // Reset body overflow
        document.body.style.overflow = '';
    } else if (window.innerWidth <= 768) {
        // Recreate mobile menu if switching to mobile
        const existingMenu = document.getElementById('mobile-menu');
        if (!existingMenu) {
            createMobileMenu();
        }
    }
});
        </script>
<!-- CSS Loading Order Fix -->

<link rel="stylesheet" href="styles.css">

<!-- FOUC Prevention -->
<style>
    html { visibility: hidden; opacity: 0; }
    html.loaded { visibility: visible; opacity: 1; transition: opacity 0.3s ease; }
@media (max-width: 768px) {
            /* FORCE hide all desktop navigation */
            nav ul,
            nav li,
            .left-nav ul,
            .right-nav ul,
            .left-nav li,
            .right-nav li,
            .left-nav > ul,
            .right-nav > ul {
                display: none !important;
                visibility: hidden !important;
            }
            
            /* Ensure nav container works properly */
            nav {
                display: flex !important;
                justify-content: space-between !important;
                align-items: center !important;
                padding: 1rem !important;
                flex-wrap: nowrap !important;
            }
            
            /* Keep logo visible */
            .logo,
            .logo a {
                display: block !important;
                visibility: visible !important;
                font-size: 1.5rem !important;
                white-space: nowrap !important;
            }
            
            /* Force show mobile button if it exists */
            .mobile-menu-btn {
                display: flex !important;
                visibility: visible !important;
                flex-direction: column;
                background: none;
                border: none;
                cursor: pointer;
                padding: 0.5rem;
                z-index: 1001;
            }
            
            /* Mobile button styles */
            .mobile-menu-btn .hamburger {
                width: 25px;
                height: 3px;
                background: #ffffff;
                margin: 3px 0;
                transition: 0.3s;
                border-radius: 2px;
            }
            
            /* Ensure right-nav container shows mobile button */
            .right-nav {
                display: flex !important;
                align-items: center !important;
                visibility: visible !important;
            }
        }

        /* If no mobile button exists, add this emergency button */
        @media (max-width: 768px) {
            nav:not(:has(.mobile-menu-btn))::after {
                content: "☰";
                position: absolute;
                right: 1rem;
                top: 50%;
                transform: translateY(-50%);
                color: white;
                font-size: 1.5rem;
                cursor: pointer;
            }
        }
        .mobile-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(10, 10, 10, 0.98);
            backdrop-filter: blur(20px);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .mobile-menu.active {
            opacity: 1;
            visibility: visible;
        }

        .mobile-menu-content {
            height: 100%;
            display: flex;
            flex-direction: column;
            padding: 2rem;
        }

        .mobile-menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 2rem;
        }

        .mobile-menu-close {
            background: none;
            border: none;
            color: #ffffff;
            font-size: 2rem;
            cursor: pointer;
            padding: 0.5rem;
        }

        .mobile-menu-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .mobile-menu-link {
            color: #ffffff;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 500;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }

        .mobile-menu-link:hover {
            color: #f39c12;
            padding-left: 1rem;
        }

        .mobile-menu-link.mobile-cta {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: #000 !important;
            border-radius: 12px;
            margin-top: 1rem;
            text-align: center;
            font-weight: 600;
            border: none;
        }

        .mobile-menu-divider {
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
            margin: 1rem 0;
        }

        .mobile-menu-btn.active .hamburger:nth-child(1) {
            transform: rotate(-45deg) translate(-5px, 6px);
        }

        .mobile-menu-btn.active .hamburger:nth-child(2) {
            opacity: 0;
        }

        .mobile-menu-btn.active .hamburger:nth-child(3) {
            transform: rotate(45deg) translate(-5px, -6px);
        }

        /* Add this to your CSS to ensure mobile elements are hidden on desktop */
        @media (min-width: 769px) {
            .mobile-menu,
            .mobile-menu-btn {
                display: none !important;
                visibility: hidden !important;
            }
        }
    </style>
    <script>
        // Authentication-aware mobile menu
function createMobileMenu() {
    // Only create mobile menu on mobile devices
    if (window.innerWidth > 768) {
        return; // Exit early on desktop
    }
    
    // Check authentication status
    const authToken = localStorage.getItem('authToken');
    const userLoggedIn = localStorage.getItem('userLoggedIn');
    const isLoggedIn = !!(authToken || userLoggedIn === 'true');
    const username = localStorage.getItem('username') || 'User';
    
    console.log('Auth check:', { authToken, userLoggedIn, isLoggedIn, username }); // Debug log
    
    // Create mobile menu if it doesn't exist
    if (!document.getElementById('mobile-menu')) {
        const header = document.querySelector('header');
        const mobileMenu = document.createElement('div');
        mobileMenu.id = 'mobile-menu';
        mobileMenu.className = 'mobile-menu';
        
        // Generate auth-specific menu items
        let authMenuItems = '';
        if (isLoggedIn) {
            authMenuItems = `
                <div class="mobile-menu-divider"></div>
                <div class="mobile-user-info">
                    <span style="color: #f39c12; font-weight: 600; padding: 0.5rem 0;">Welcome, ${username}!</span>
                </div>
                <a href="dashboard.html" class="mobile-menu-link mobile-cta">Dashboard</a>
                <a href="profile.html" class="mobile-menu-link">Profile</a>
                <a href="#" class="mobile-menu-link" onclick="handleMobileLogout(event)">Logout</a>
            `;
        } else {
            authMenuItems = `
                <div class="mobile-menu-divider"></div>
                <a href="login.html" class="mobile-menu-link">Login</a>
                <a href="signup.html" class="mobile-menu-link mobile-cta">Start Training</a>
            `;
        }
        
        mobileMenu.innerHTML = `
            <div class="mobile-menu-content">
                <div class="mobile-menu-header">
                    <div class="logo"><a href="index.html">Vivify</a></div>
                    <button class="mobile-menu-close" onclick="closeMobileMenu()">×</button>
                </div>
                <div class="mobile-menu-links">
                    <a href="index.html" class="mobile-menu-link">Home</a>
                    <a href="index.html#training" class="mobile-menu-link">Training Areas</a>
                    <a href="index.html#habits" class="mobile-menu-link">Habits & Challenges</a>
                    <a href="about.html" class="mobile-menu-link">About</a>
                    <a href="community.html" class="mobile-menu-link">Community</a>
                    ${authMenuItems}
                </div>
            </div>
        `;
        header.appendChild(mobileMenu);
    }
    
    // Create mobile button if it doesn't exist
    if (!document.getElementById('mobile-menu-btn')) {
        const nav = document.querySelector('nav');
        const rightNav = nav.querySelector('.right-nav') || nav;
        const mobileBtn = document.createElement('button');
        mobileBtn.id = 'mobile-menu-btn';
        mobileBtn.className = 'mobile-menu-btn';
        mobileBtn.onclick = toggleMobileMenu;
        mobileBtn.innerHTML = `
            <span class="hamburger"></span>
            <span class="hamburger"></span>
            <span class="hamburger"></span>
        `;
        rightNav.appendChild(mobileBtn);
    }
}

function handleMobileLogout(event) {
    event.preventDefault();
    if (confirm('Are you sure you want to logout?')) {
        // Clear all auth data
        localStorage.clear();
        
        // Close mobile menu
        closeMobileMenu();
        
        // Refresh the page to update UI
        window.location.reload();
    }
}

function toggleMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    const btn = document.getElementById('mobile-menu-btn');
    
    menu.classList.toggle('active');
    btn.classList.toggle('active');
    
    if (menu.classList.contains('active')) {
        document.body.style.overflow = 'hidden';
    } else {
        document.body.style.overflow = '';
    }
}

function closeMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    const btn = document.getElementById('mobile-menu-btn');
    
    menu.classList.remove('active');
    btn.classList.remove('active');
    document.body.style.overflow = '';
}

// Function to update mobile menu when auth state changes
function updateMobileMenuAuth() {
    const existingMenu = document.getElementById('mobile-menu');
    if (existingMenu) {
        existingMenu.remove();
    }
    createMobileMenu();
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', createMobileMenu);

// Listen for auth state changes (if you have an auth system that fires events)
window.addEventListener('authStateChanged', updateMobileMenuAuth);

// Export functions for external use
window.updateMobileMenuAuth = updateMobileMenuAuth;
window.handleMobileLogout = handleMobileLogout;
// Add this at the end of your mobile menu script
window.addEventListener('resize', function() {
    if (window.innerWidth > 768) {
        // Remove mobile elements on desktop
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileBtn = document.getElementById('mobile-menu-btn');
        
        if (mobileMenu) mobileMenu.remove();
        if (mobileBtn) mobileBtn.remove();
        
        // Reset body overflow
        document.body.style.overflow = '';
    } else if (window.innerWidth <= 768) {
        // Recreate mobile menu if switching to mobile
        const existingMenu = document.getElementById('mobile-menu');
        if (!existingMenu) {
            createMobileMenu();
        }
    }
});
        </script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        document.documentElement.classList.add('loaded');
    });
    window.addEventListener('load', function() {
        document.documentElement.classList.add('loaded');
    });
</script>
<script src="js/vivify-stats.js"></script>
<script src="js/leaderboard-system.js"></script>
</head>
<body>
    <div class="wrapper">
        <header>
            <nav>
                <div class="left-nav">
                    <div class="logo">
                        <a href="/" aria-label="Home Page"><h1>Vivify</h1></a>
                    </div>
                    <ul>
                        <li><a href="about.html" aria-label="About Us Page">About</a></li>
                        <li class="dropdown" id="categoryDropdown" style="display: none;">
                            <a href="#" class="dropbtn" aria-label="Categories Dropdown">Training</a>
                            <div class="dropdown-content">
                                <a href="fitness.html" aria-label="Fitness Page">Fitness</a>
                                <a href="nutrition.html" aria-label="Nutrition Page">Nutrition</a>
                                <a href="focus-resilience.html" aria-label="Focus & Resilience Page">Focus & Resilience</a>
                                <a href="life-mastery.html" aria-label="Life Lessons Page">Life Mastery</a>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="right-nav">
                    <ul>
                        <li><a href="dashboard.html" id="dashboard-link" aria-label="Dashboard" style="display: none;">Performance Hub</a></li>
                        <li><a href="profile.html" id="profile-link" aria-label="Profile Page" style="display: none;">Profile</a></li>
                        <li><a href="#" id="logout-link" aria-label="Logout" style="display: none;">Logout</a></li>
                        <li><a href="signup.html" id="signup-link" aria-label="Sign Up Page">Sign Up</a></li>
                        <li><a href="login.html" id="login-link" aria-label="Login Page">Login</a></li>
                    </ul>
                </div>
            </nav>
        </header>
        <main>
            <!-- Hero Section for Non-Logged In Users -->
            <section class="hero home-hero" id="hero-section">
                <div class="hero-content">
                    <h1>Thrive in Your Student Life</h1>
                    <p>Your comprehensive performance companion for a balanced and successful academic journey.</p>
                    <div class="hero-cta">
                        <button onclick="window.location.href='signup.html'" class="btn btn-primary" aria-label="Get Started with Vivify">Get Started</button>
                        <button onclick="window.location.href='about.html'" class="btn btn-secondary" aria-label="Learn More About Vivify">Learn More</button>
                    </div>
                </div>
            </section>

            <!-- Welcome Back Section for Logged In Users -->
            <section class="welcome-back hidden" id="welcome-section">
                <div class="success-badge" id="success-badge" style="display: none;">
                    <i class="fas fa-check-circle"></i> Welcome back, champion!
                </div>
                
                <h2>Welcome Back, <span id="student-name">Student</span>!</h2>
                <p>Continue your performance journey and keep building healthy habits for academic success.</p>
                
                <div class="quick-stats" id="quick-stats">
                    <div class="stat-item">
                        <span class="stat-value" id="current-streak">0</span>
                        <span class="stat-label">Day Streak</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="performance-score">0</span>
                        <span class="stat-label">performance Score</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="activities-count">0</span>
                        <span class="stat-label">Activities Done</span>
                    </div>
                </div>

                <div class="hero-cta">
                    <button onclick="window.location.href='dashboard.html'" class="btn btn-primary pulse-btn" aria-label="View Your Dashboard">
                        <i class="fas fa-chart-line"></i> View Dashboard
                    </button>
                    <button onclick="window.location.href='expense-tracker.html'" class="btn btn-secondary glow-btn" aria-label="Track Your Expenses">
                        <i class="fas fa-wallet"></i> Track Expenses
                    </button>
                    <button onclick="window.location.href='focus-resilience.html'" class="btn btn-performance" aria-label="Mental performance">
                        <i class="fas fa-leaf"></i> Mindfulness
                    </button>
                </div>

                <div class="motivational-quote" id="motivational-quote">
                    "Every small step towards performance is a victory worth celebrating! 🌟"
                </div>
            </section>
            
            <section class="performance-pillars">
                <h2>The Four Pillars of Student performance</h2>
                <p>Our holistic approach addresses every aspect of student wellbeing.</p>
                
                <div class="pillar-cards">
                    <div class="pillar-card">
                        <div class="pillar-icon">
                            <i class="fas fa-dumbbell"></i>
                        </div>
                        <h3>Physical Health</h3>
                        <p>Fitness programs designed for students, including outdoor activities, gym routines, and sport club recommendations to stay active on a budget.</p>
                        <a href="fitness.html" class="btn restricted" aria-label="Explore Fitness Resources">Explore Fitness</a>
                    </div>
                    
                    <div class="pillar-card">
                        <div class="pillar-icon">
                            <i class="fas fa-apple-alt"></i>
                        </div>
                        <h3>Nutrition</h3>
                        <p>Budget-friendly meal plans, share house cooking tips, and nutritional guidance using local, affordable ingredients from Woolies and Coles.</p>
                        <a href="nutrition.html" class="btn restricted" aria-label="Explore Nutrition Resources">Explore Nutrition</a>
                    </div>
                    
                    <div class="pillar-card">
                        <div class="pillar-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <h3>Focus & Resilience</h3>
                        <p>Stress management for students, including accessing university counselling services, R U OK? Day resources, and mindfulness practices.</p>
                        <a href="focus-resilience.html" class="btn restricted" aria-label="Explore Focus & Resilience Resources">Explore Focus & Resilience</a>
                    </div>
                    
                    <div class="pillar-card">
                        <div class="pillar-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <h3>Life Skills</h3>
                        <p>Essential life skills including banking with the Big Four, Centrelink guidance, tax returns, rental applications, and budgeting.</p>
                        <a href="life-mastery.html" class="btn restricted" aria-label="Explore Life Skills Resources">Explore Life Skills</a>
                    </div>
                </div>
            </section>
            
            <section class="features-section">
                <div class="features-container">
                    <h2>Features Designed for Student Success</h2>
                    
                    <div class="feature-item">
                        <div class="feature-image">
                            <img src="https://images.unsplash.com/photo-1606761568499-6d2451b23c66?auto=format&fit=crop&w=1000&q=80" alt="Personal Dashboard Interface">
                        </div>
                        <div class="feature-content">
                            <h3>Personalised performance Dashboard</h3>
                            <p>Track your progress across all performance dimensions with our intuitive dashboard. Set goals, monitor habits, and celebrate achievements as you build a healthier student life.</p>
                            <a href="dashboard.html" class="btn restricted">View Dashboard</a>
                        </div>
                    </div>
                    
                    <div class="feature-item">
                        <div class="feature-image">
                            <img src="https://images.unsplash.com/photo-1434030216411-0b793f4b4173?auto=format&fit=crop&w=1000&q=80" alt="students in small group discussion">
                        </div>
                        <div class="feature-content">
                            <h3>Student Community</h3>
                            <p>Connect with fellow students who share similar performance goals. Exchange tips about uni life, share budget meal ideas, and build a supportive network that understands Aussie student challenges.</p>
                            <a href="community.html" class="btn restricted">Join Community</a>
                        </div>
                    </div>
                    
                    <div class="feature-item">
                        <div class="feature-image">
                            <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?auto=format&fit=crop&w=1000&q=80" alt="Students planning calendar and goals">
                        </div>
                        <div class="feature-content">
                            <h3>Smart Recommendations</h3>
                            <p>Receive personalised recommendations for resources, activities, and habits based on your goals and student lifestyle. Get tips tailored to your uni, city, and budget.</p>
                            <a href="recommendations.html" class="btn restricted">Get Recommendations</a>
                        </div>
                    </div>
                </div>
            </section>
            
            <section class="testimonials">
                <h2>What Students Say About Vivify</h2>
                <div class="testimonial-cards">
                    <div class="testimonial-card">
                        <p class="testimonial-text">"Vivify helped me establish healthy habits while managing my studies at UNSW. The budgeting tools were a lifesaver for my Centrelink payments!"</p>
                        <div class="testimonial-author">
                            <div class="author-avatar">
                                <img src="https://randomuser.me/api/portraits/women/43.jpg" alt="Student testimonial">
                            </div>
                            <div class="author-info">
                                <h4>Sarah Chen</h4>
                                <p>Computer Science, UNSW Sydney</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="testimonial-card">
                        <p class="testimonial-text">"The stress management resources got me through SWOTVAC. Learning to balance study with self-care actually improved my ATAR predictions!"</p>
                        <div class="testimonial-author">
                            <div class="author-avatar">
                                <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Student testimonial">
                            </div>
                            <div class="author-info">
                                <h4>James Mitchell</h4>
                                <p>Year 12, Melbourne High</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="testimonial-card">
                        <p class="testimonial-text">"As an international student, the life skills section taught me everything about banking, renting, and even how to do my tax return. Absolute game-changer!"</p>
                        <div class="testimonial-author">
                            <div class="author-avatar">
                                <img src="https://randomuser.me/api/portraits/women/58.jpg" alt="International student testimonial">
                            </div>
                            <div class="author-info">
                                <h4>Priya Patel</h4>
                                <p>Psychology, University of Melbourne</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- CTA Section (only shown to non-logged in users) -->
            <section class="cta-section" id="cta-section">
                <h2>Start Your performance Journey Today</h2>
                <p>Join thousands of students who are already benefiting from Vivify's holistic approach to student wellbeing.</p>
                <button onclick="window.location.href='signup.html'" class="btn btn-primary" aria-label="Sign Up for Vivify">Sign Up for Free</button>
            </section>
        </main>
        <footer>
            <p>&copy; 2024 Vivify. All rights reserved.</p>
            <ul class="footer-links">
                <li><a href="privacy.html" aria-label="Privacy Policy">Privacy Policy</a></li>
                <li><a href="terms.html" aria-label="Terms of Service">Terms of Service</a></li>
                <li><a href="contact.html" aria-label="Contact Us">Contact Us</a></li>
            </ul>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const loginLink = document.getElementById('login-link');
            const signupLink = document.getElementById('signup-link');
            const logoutLink = document.getElementById('logout-link');
            const profileLink = document.getElementById('profile-link');
            const dashboardLink = document.getElementById('dashboard-link');
            const categoryDropdown = document.getElementById('categoryDropdown');
            const restrictedLinks = document.querySelectorAll('.restricted');
            
            // Content sections
            const heroSection = document.getElementById('hero-section');
            const welcomeSection = document.getElementById('welcome-section');
            const ctaSection = document.getElementById('cta-section');

            // Function to update navigation links and content
            function updateAuthState(isLoggedIn) {
                // Update navigation
                loginLink.style.display = isLoggedIn ? 'none' : 'inline';
                signupLink.style.display = isLoggedIn ? 'none' : 'inline';
                logoutLink.style.display = isLoggedIn ? 'inline' : 'none';
                profileLink.style.display = isLoggedIn ? 'inline' : 'none';
                dashboardLink.style.display = isLoggedIn ? 'inline' : 'none';
                categoryDropdown.style.display = isLoggedIn ? 'block' : 'none';
                
                // Update content sections
                if (isLoggedIn) {
                    heroSection.classList.add('hidden');
                    ctaSection.classList.add('hidden');
                    welcomeSection.classList.remove('hidden');
                    loadUserStats();
                } else {
                    heroSection.classList.remove('hidden');
                    ctaSection.classList.remove('hidden');
                    welcomeSection.classList.add('hidden');
                }
                
                // Update restricted links behavior
                restrictedLinks.forEach(link => {
                    if (!isLoggedIn) {
                        const originalHref = link.getAttribute('href');
                        link.addEventListener('click', function(e) {
                            e.preventDefault();
                            window.location.href = 'login.html?redirect=' + encodeURIComponent(originalHref);
                        });
                        link.style.opacity = '0.7';
                        link.title = 'Please log in to access this feature';
                    } else {
                        link.style.opacity = '1';
                        link.removeAttribute('title');
                    }
                });
            }

            // Function to load user stats for welcome section
            function loadUserStats() {
                try {
                    // Get user profile data
                    const userProfile = JSON.parse(localStorage.getItem('userProfile') || '{}');
                    const performanceData = JSON.parse(localStorage.getItem('performanceData') || '{}');
                    
                    // Update student name
                    const studentName = userProfile.name || 'Student';
                    document.getElementById('student-name').textContent = studentName;
                    
                    // Update stats
                    const currentStreak = performanceData.streaks?.currentStreak || 0;
                    const performanceScore = performanceData.scores?.overall || 0;
                    const activitiesCount = performanceData.activities?.length || 0;
                    
                    document.getElementById('current-streak').textContent = currentStreak;
                    document.getElementById('performance-score').textContent = performanceScore;
                    document.getElementById('activities-count').textContent = activitiesCount;
                    
                    // Animate the numbers
                    animateNumber('current-streak', currentStreak);
                    animateNumber('performance-score', performanceScore);
                    animateNumber('activities-count', activitiesCount);
                } catch (error) {
                    console.error('Error loading user stats:', error);
                }
            }

            // Function to animate numbers
            function animateNumber(elementId, finalValue) {
                const element = document.getElementById(elementId);
                const startValue = 0;
                const duration = 1000; // 1 second
                const startTime = Date.now();
                
                function updateNumber() {
                    const elapsed = Date.now() - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    const currentValue = Math.floor(startValue + (finalValue - startValue) * progress);
                    
                    element.textContent = currentValue;
                    
                    if (progress < 1) {
                        requestAnimationFrame(updateNumber);
                    }
                }
                
                updateNumber();
            }

            // Check login status on page load
            const isLoggedIn = localStorage.getItem('authToken') || localStorage.getItem('userLoggedIn') === 'true';
            updateAuthState(isLoggedIn);

            // Logout functionality
            logoutLink.addEventListener('click', (e) => {
                e.preventDefault();
                localStorage.removeItem('authToken');
                localStorage.removeItem('userLoggedIn');
                updateAuthState(false);
                // Refresh the page to reset everything
                window.location.reload();
            });

            // Add some Australian-specific welcome messages based on time of day
            if (isLoggedIn) {
                setTimeout(() => {
                    const now = new Date();
                    const hour = now.getHours();
                    let greeting = '';
                    
                    if (hour < 12) {
                        greeting = 'Good Morning';
                    } else if (hour < 17) {
                        greeting = 'Good Afternoon';
                    } else {
                        greeting = 'Good Evening';
                    }
                    
                    const welcomeText = document.querySelector('.welcome-back h2');
                    if (welcomeText) {
                        const studentName = document.getElementById('student-name').textContent;
                        welcomeText.innerHTML = `${greeting}, <span id="student-name">${studentName}</span>!`;
                    }
                }, 100);
            }

            // Track page view for analytics (if user is logged in)
            if (isLoggedIn && window.vivifyTracker) {
                window.vivifyTracker.trackActivity('homepage_visit', 'general', 'Homepage viewed', 2);
            }

            // Initialize user profile if it doesn't exist but user is logged in
            if (isLoggedIn) {
                const userProfile = JSON.parse(localStorage.getItem('userProfile') || '{}');
                if (!userProfile.name) {
                    // Set default Australian student profile
                    const defaultProfile = {
                        name: 'Student',
                        joinDate: new Date().toISOString(),
                        country: 'Australia',
                        timezone: 'Australia/Sydney'
                    };
                    localStorage.setItem('userProfile', JSON.stringify(defaultProfile));
                }

                // Initialize performance data if it doesn't exist
                const performanceData = JSON.parse(localStorage.getItem('performanceData') || '{}');
                if (!performanceData.user) {
                    const defaultperformanceData = {
                        user: {
                            name: userProfile.name || 'Student',
                            country: 'Australia',
                            joinDate: new Date().toISOString(),
                            lastActive: new Date().toISOString(),
                            userId: 'user_' + Math.random().toString(36).substr(2, 9)
                        },
                        scores: {
                            physical: 0,
                            mental: 0,
                            nutrition: 0,
                            lifeSkills: 0,
                            overall: 0
                        },
                        activities: [],
                        streaks: {
                            currentStreak: 0,
                            longestStreak: 0,
                            lastActiveDate: null
                        }
                    };
                    localStorage.setItem('performanceData', JSON.stringify(defaultperformanceData));
                }
            }

            // Add Australian university recognition
            const australianUnis = [
                'University of Sydney', 'University of Melbourne', 'Australian National University',
                'University of Queensland', 'Monash University', 'University of Western Australia',
                'University of Adelaide', 'UNSW Sydney', 'University of Technology Sydney',
                'Queensland University of Technology', 'Curtin University', 'Deakin University',
                'Griffith University', 'Macquarie University', 'RMIT University',
                'University of South Australia', 'University of Tasmania', 'University of Wollongong',
                'Flinders University', 'La Trobe University', 'Murdoch University',
                'Southern Cross University', 'Swinburne University', 'Victoria University',
                'Western Sydney University', 'Bond University', 'University of Canberra'
            ];

            // Show university-specific tips if user has set their university
            if (isLoggedIn) {
                const userProfile = JSON.parse(localStorage.getItem('userProfile') || '{}');
                if (userProfile.school && australianUnis.some(uni => 
                    userProfile.school.toLowerCase().includes(uni.toLowerCase().split(' ')[0]))) {
                    
                    // Add university-specific content
                    setTimeout(() => {
                        const uniTip = document.createElement('div');
                        uniTip.style.cssText = `
                            background: rgba(243, 156, 18, 0.1);
                            border: 1px solid #f39c12;
                            border-radius: 8px;
                            padding: 1rem;
                            margin: 1rem 0;
                            text-align: center;
                            color: #f39c12;
                            font-weight: 500;
                        `;
                        uniTip.textContent = `🎓 We see you're studying at ${userProfile.school}! Check out our university-specific resources.`;
                        
                        const welcomeSection = document.getElementById('welcome-section');
                        if (welcomeSection && !welcomeSection.classList.contains('hidden')) {
                            welcomeSection.appendChild(uniTip);
                        }
                    }, 2000);
                }
            }

            // Subtle Australian touch - replace some terms in content
            if (Math.random() < 0.3) { // 30% chance
                setTimeout(() => {
                    const textElements = document.querySelectorAll('p, h1, h2, h3');
                    textElements.forEach(element => {
                        let text = element.textContent;
                        Object.keys(aussieTerms).forEach(term => {
                            if (text.toLowerCase().includes(term) && Math.random() < 0.5) {
                                text = text.replace(new RegExp(term, 'gi'), aussieTerms[term]);
                            }
                        });
                        if (text !== element.textContent) {
                            element.textContent = text;
                        }
                    });
                }, 1000);
            }
        });
    </script>
<script src="js/flexible-mobile-nav.js"></script> </body>
</html>