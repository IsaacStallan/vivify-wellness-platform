<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Self-Compassion Meditation Series - Vivify</title>
    
    
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Add Font Awesome for icons -->
    
    <style>
        /* Footer styles to ensure it stays at bottom */
        footer {
            background-color: #000;
            color: white;
            text-align: center;
            padding: 2rem 0;
            width: 100%;
            margin-top: auto;
            border-top: 1px solid #333;
        }

        footer .footer-links {
            list-style: none;
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 1rem 0 0 0;
            padding: 0;
        }

        footer .footer-links a {
            color: #a0a0a0;
            text-decoration: none;
            transition: color 0.3s;
        }

        footer .footer-links a:hover {
            color: #f39c12;
        }
        
        /* Self-Compassion Meditations specific styles */
        .compassion-hero {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
                        url('https://images.unsplash.com/photo-1515894715234-68d358a65d6b?auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 6rem 2rem;
            text-align: center;
        }

        .compassion-hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .compassion-hero p {
            font-size: 1.25rem;
            max-width: 800px;
            margin: 0 auto 2rem;
        }
        
        .section-title {
            color: #f39c12;
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            text-align: center;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #333;
        }

        .content-container {
            max-width: 1200px;
            margin: 3rem auto;
            padding: 0 2rem;
        }

        .intro-text {
            text-align: center;
            margin-bottom: 3rem;
            line-height: 1.6;
        }

        .benefits-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 4rem;
        }

        .benefit-card {
            background-color: #222;
            border-radius: 10px;
            padding: 1.5rem;
            width: 300px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .benefit-card:hover {
            transform: translateY(-5px);
        }

        .benefit-icon {
            color: #f39c12;
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .benefit-card h3 {
            color: #f39c12;
            margin-bottom: 1rem;
        }

        .benefit-card p {
            color: #ddd;
        }

        .compassion-playlist-section {
            background-color: #222;
            border-radius: 10px;
            padding: 2rem;
            margin-bottom: 4rem;
        }

        .playlist-title {
            color: #f39c12;
            margin-bottom: 1rem;
            font-size: 1.8rem;
        }

        .playlist-description {
            margin-bottom: 2rem;
            color: #ddd;
        }

        .meditations-list {
            margin-bottom: 2rem;
        }

        .meditation-item {
            background-color: #333;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            transition: transform 0.3s ease;
        }

        .meditation-item:hover {
            transform: translateY(-5px);
            background-color: #3a3a3a;
        }

        .meditation-order {
            background-color: #f39c12;
            color: black;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            margin-right: 1.5rem;
            flex-shrink: 0;
        }

        .meditation-details {
            flex-grow: 1;
        }

        .meditation-details h3 {
            color: #f39c12;
            margin-bottom: 0.5rem;
        }

        .meditation-meta {
            display: flex;
            color: #aaa;
            font-size: 0.9rem;
            margin-bottom: 0.8rem;
        }

        .meditation-meta span {
            display: flex;
            align-items: center;
            margin-right: 1.5rem;
        }

        .meditation-meta i {
            margin-right: 0.5rem;
        }

        .meditation-description {
            color: #ddd;
            margin-bottom: 1rem;
        }

        .meditation-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .meditation-tag {
            background-color: #444;
            color: #ddd;
            padding: 0.3rem 0.7rem;
            border-radius: 20px;
            font-size: 0.8rem;
        }

        .meditation-controls {
            display: flex;
            min-width: 150px;
            justify-content: center;
        }

        .play-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.7rem 1.2rem;
            background-color: #f39c12;
            color: black;
            border: none;
            border-radius: 5px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .play-btn:hover {
            background-color: #e67e22;
        }

        .info-section {
            background-color: #222;
            border-radius: 10px;
            padding: 2rem;
            margin-bottom: 4rem;
        }
        
        .info-section h2 {
            color: #f39c12;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .three-components {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            gap: 2rem;
            margin: 2rem 0;
        }
        
        .component-card {
            flex: 1 1 300px;
            background-color: #333;
            border-radius: 10px;
            padding: 1.5rem;
            border-left: 4px solid #f39c12;
        }
        
        .component-card h3 {
            color: #f39c12;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
        }
        
        .component-card h3 i {
            margin-right: 0.8rem;
            font-size: 1.5rem;
        }
        
        .component-card p {
            color: #ddd;
            margin-bottom: 0;
        }

        .testimonials-section {
            margin-bottom: 4rem;
        }

        .testimonial-card {
            background-color: #222;
            border-radius: 10px;
            padding: 2rem;
            margin-bottom: 2rem;
            position: relative;
        }

        .testimonial-card:before {
            content: '\201C';
            font-size: 5rem;
            color: rgba(243, 156, 18, 0.2);
            position: absolute;
            top: 10px;
            left: 15px;
        }

        .testimonial-text {
            font-style: italic;
            margin-bottom: 1.5rem;
            position: relative;
            z-index: 1;
            color: #ddd;
        }

        .testimonial-author {
            display: flex;
            align-items: center;
        }

        .author-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #444;
            margin-right: 1rem;
            overflow: hidden;
        }

        .author-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .author-info h4 {
            margin: 0;
            color: #f39c12;
        }

        .author-info p {
            margin: 0;
            color: #aaa;
            font-size: 0.9rem;
        }

        .exercises-section {
            background-color: #222;
            border-radius: 10px;
            padding: 2rem;
            margin-bottom: 4rem;
        }

        .exercises-section h2 {
            color: #f39c12;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .exercises-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        .exercise-card {
            background-color: #333;
            border-radius: 10px;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
        }

        .exercise-icon {
            color: #f39c12;
            font-size: 2rem;
            margin-bottom: 1rem;
            text-align: center;
        }

        .exercise-card h3 {
            color: #f39c12;
            margin-bottom: 1rem;
            text-align: center;
        }

        .exercise-card p {
            color: #ddd;
            flex-grow: 1;
        }

        .cta-section {
            text-align: center;
            margin: 3rem 0;
        }

        .cta-buttons {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
        }

        .cta-button {
            display: inline-block;
            padding: 1rem 2rem;
            background-color: #f39c12;
            color: black;
            text-decoration: none;
            border-radius: 5px;
            font-weight: 700;
            font-size: 1.1rem;
            transition: background-color 0.3s, transform 0.3s;
        }

        .cta-button:hover {
            background-color: #e67e22;
            transform: scale(1.05);
        }

        .cta-button.secondary {
            background-color: transparent;
            color: white;
            border: 2px solid #f39c12;
        }

        .cta-button.secondary:hover {
            background-color: rgba(243, 156, 18, 0.1);
        }

        .audio-player {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #1a1a1a;
            padding: 1rem;
            box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.3);
            z-index: 100;
        }

        .player-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1200px;
            margin: 0 auto;
        }

        .player-info {
            display: flex;
            align-items: center;
            flex: 1;
        }

        .player-details h4 {
            margin: 0;
            color: #f39c12;
        }

        .player-details p {
            margin: 0;
            font-size: 0.9rem;
            color: #aaa;
        }

        .player-controls {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .player-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.3s;
        }

        .player-btn:hover {
            color: #f39c12;
        }

        .player-btn.play-pause {
            font-size: 2rem;
            color: #f39c12;
        }

        .player-timeline {
            flex: 2;
            margin: 0 2rem;
        }

        .timeline-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .timeline {
            flex: 1;
            height: 4px;
            background-color: #444;
            border-radius: 2px;
            position: relative;
            cursor: pointer;
        }

        .timeline-progress {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background-color: #f39c12;
            border-radius: 2px;
            width: 30%;
        }

        .time {
            font-size: 0.9rem;
            color: #aaa;
        }

        @media (max-width: 768px) {
            .compassion-hero h1 {
                font-size: 2.5rem;
            }
            
            .meditation-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .meditation-order {
                margin-bottom: 1rem;
            }
            
            .meditation-controls {
                margin-top: 1rem;
                width: 100%;
            }
            
            .three-components {
                flex-direction: column;
            }
            
            .player-content {
                flex-direction: column;
                gap: 1rem;
            }
            
            .player-timeline {
                width: 100%;
                margin: 1rem 0;
            }
            
            .player-controls {
                width: 100%;
                justify-content: center;
            }
            
            .cta-buttons {
                flex-direction: column;
                gap: 1rem;
            }
        }
    @media (max-width: 768px) {
            /* FORCE hide all desktop navigation */
            nav ul,
            nav li,
            .left-nav ul,
            .right-nav ul,
            .left-nav li,
            .right-nav li,
            .left-nav > ul,
            .right-nav > ul {
                display: none !important;
                visibility: hidden !important;
            }
            
            /* Ensure nav container works properly */
            nav {
                display: flex !important;
                justify-content: space-between !important;
                align-items: center !important;
                padding: 1rem !important;
                flex-wrap: nowrap !important;
            }
            
            /* Keep logo visible */
            .logo,
            .logo a {
                display: block !important;
                visibility: visible !important;
                font-size: 1.5rem !important;
                white-space: nowrap !important;
            }
            
            /* Force show mobile button if it exists */
            .mobile-menu-btn {
                display: flex !important;
                visibility: visible !important;
                flex-direction: column;
                background: none;
                border: none;
                cursor: pointer;
                padding: 0.5rem;
                z-index: 1001;
            }
            
            /* Mobile button styles */
            .mobile-menu-btn .hamburger {
                width: 25px;
                height: 3px;
                background: #ffffff;
                margin: 3px 0;
                transition: 0.3s;
                border-radius: 2px;
            }
            
            /* Ensure right-nav container shows mobile button */
            .right-nav {
                display: flex !important;
                align-items: center !important;
                visibility: visible !important;
            }
        }

        /* If no mobile button exists, add this emergency button */
        @media (max-width: 768px) {
            nav:not(:has(.mobile-menu-btn))::after {
                content: "☰";
                position: absolute;
                right: 1rem;
                top: 50%;
                transform: translateY(-50%);
                color: white;
                font-size: 1.5rem;
                cursor: pointer;
            }
        }
        .mobile-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(10, 10, 10, 0.98);
            backdrop-filter: blur(20px);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .mobile-menu.active {
            opacity: 1;
            visibility: visible;
        }

        .mobile-menu-content {
            height: 100%;
            display: flex;
            flex-direction: column;
            padding: 2rem;
        }

        .mobile-menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 2rem;
        }

        .mobile-menu-close {
            background: none;
            border: none;
            color: #ffffff;
            font-size: 2rem;
            cursor: pointer;
            padding: 0.5rem;
        }

        .mobile-menu-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .mobile-menu-link {
            color: #ffffff;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 500;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }

        .mobile-menu-link:hover {
            color: #f39c12;
            padding-left: 1rem;
        }

        .mobile-menu-link.mobile-cta {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: #000 !important;
            border-radius: 12px;
            margin-top: 1rem;
            text-align: center;
            font-weight: 600;
            border: none;
        }

        .mobile-menu-divider {
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
            margin: 1rem 0;
        }

        .mobile-menu-btn.active .hamburger:nth-child(1) {
            transform: rotate(-45deg) translate(-5px, 6px);
        }

        .mobile-menu-btn.active .hamburger:nth-child(2) {
            opacity: 0;
        }

        .mobile-menu-btn.active .hamburger:nth-child(3) {
            transform: rotate(45deg) translate(-5px, -6px);
        }

    </style>
    <script>
        // Simple mobile menu toggle
        function createMobileMenu() {
            // Create mobile menu if it doesn't exist
            if (!document.getElementById('mobile-menu')) {
                const header = document.querySelector('header');
                const mobileMenu = document.createElement('div');
                mobileMenu.id = 'mobile-menu';
                mobileMenu.className = 'mobile-menu';
                mobileMenu.innerHTML = `
                    <div class="mobile-menu-content">
                        <div class="mobile-menu-header">
                            <div class="logo"><a href="index.html">Vivify</a></div>
                            <button class="mobile-menu-close" onclick="closeMobileMenu()">×</button>
                        </div>
                        <div class="mobile-menu-links">
                            <a href="index.html" class="mobile-menu-link">Home</a>
                            <a href="index.html#training" class="mobile-menu-link">Training Areas</a>
                            <a href="index.html#habits" class="mobile-menu-link">Habits & Challenges</a>
                            <a href="about.html" class="mobile-menu-link">About</a>
                            <a href="community.html" class="mobile-menu-link">Community</a>
                            <div class="mobile-menu-divider"></div>
                            <a href="login.html" class="mobile-menu-link">Login</a>
                            <a href="signup.html" class="mobile-menu-link mobile-cta">Start Training</a>
                        </div>
                    </div>
                `;
                header.appendChild(mobileMenu);
            }
            
            // Create mobile button if it doesn't exist
            if (!document.getElementById('mobile-menu-btn')) {
                const nav = document.querySelector('nav');
                const rightNav = nav.querySelector('.right-nav') || nav;
                const mobileBtn = document.createElement('button');
                mobileBtn.id = 'mobile-menu-btn';
                mobileBtn.className = 'mobile-menu-btn';
                mobileBtn.onclick = toggleMobileMenu;
                mobileBtn.innerHTML = `
                    <span class="hamburger"></span>
                    <span class="hamburger"></span>
                    <span class="hamburger"></span>
                `;
                rightNav.appendChild(mobileBtn);
            }
        }
        
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            const btn = document.getElementById('mobile-menu-btn');
            
            menu.classList.toggle('active');
            btn.classList.toggle('active');
            
            if (menu.classList.contains('active')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        }
        
        function closeMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            const btn = document.getElementById('mobile-menu-btn');
            
            menu.classList.remove('active');
            btn.classList.remove('active');
            document.body.style.overflow = '';
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', createMobileMenu);
        </script>

<!-- PWA Manifest -->
<link rel="manifest" href="/manifest.json">

<!-- iOS PWA Support -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="performance Hub">
<link rel="apple-touch-icon" href="/icons/icon-192x192.png">
<link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/icons/icon-180x180.png">

<!-- Microsoft Tiles -->
<meta name="msapplication-TileImage" content="/icons/icon-144x144.png">
<meta name="msapplication-TileColor" content="#f39c12">

<!-- Theme Color -->
<meta name="theme-color" content="#f39c12">

<!-- Viewport for PWA -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

<!-- Preload PWA installer script -->
<link rel="preload" href="/pwa-install.js" as="script">
<!-- CSS Loading Order Fix -->

<link rel="stylesheet" href="styles.css">

<!-- FOUC Prevention -->
<style>
    html { visibility: hidden; opacity: 0; }
    html.loaded { visibility: visible; opacity: 1; transition: opacity 0.3s ease; }
@media (max-width: 768px) {
            /* FORCE hide all desktop navigation */
            nav ul,
            nav li,
            .left-nav ul,
            .right-nav ul,
            .left-nav li,
            .right-nav li,
            .left-nav > ul,
            .right-nav > ul {
                display: none !important;
                visibility: hidden !important;
            }
            
            /* Ensure nav container works properly */
            nav {
                display: flex !important;
                justify-content: space-between !important;
                align-items: center !important;
                padding: 1rem !important;
                flex-wrap: nowrap !important;
            }
            
            /* Keep logo visible */
            .logo,
            .logo a {
                display: block !important;
                visibility: visible !important;
                font-size: 1.5rem !important;
                white-space: nowrap !important;
            }
            
            /* Force show mobile button if it exists */
            .mobile-menu-btn {
                display: flex !important;
                visibility: visible !important;
                flex-direction: column;
                background: none;
                border: none;
                cursor: pointer;
                padding: 0.5rem;
                z-index: 1001;
            }
            
            /* Mobile button styles */
            .mobile-menu-btn .hamburger {
                width: 25px;
                height: 3px;
                background: #ffffff;
                margin: 3px 0;
                transition: 0.3s;
                border-radius: 2px;
            }
            
            /* Ensure right-nav container shows mobile button */
            .right-nav {
                display: flex !important;
                align-items: center !important;
                visibility: visible !important;
            }
        }

        /* If no mobile button exists, add this emergency button */
        @media (max-width: 768px) {
            nav:not(:has(.mobile-menu-btn))::after {
                content: "☰";
                position: absolute;
                right: 1rem;
                top: 50%;
                transform: translateY(-50%);
                color: white;
                font-size: 1.5rem;
                cursor: pointer;
            }
        }
        .mobile-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(10, 10, 10, 0.98);
            backdrop-filter: blur(20px);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .mobile-menu.active {
            opacity: 1;
            visibility: visible;
        }

        .mobile-menu-content {
            height: 100%;
            display: flex;
            flex-direction: column;
            padding: 2rem;
        }

        .mobile-menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 2rem;
        }

        .mobile-menu-close {
            background: none;
            border: none;
            color: #ffffff;
            font-size: 2rem;
            cursor: pointer;
            padding: 0.5rem;
        }

        .mobile-menu-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .mobile-menu-link {
            color: #ffffff;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 500;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }

        .mobile-menu-link:hover {
            color: #f39c12;
            padding-left: 1rem;
        }

        .mobile-menu-link.mobile-cta {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: #000 !important;
            border-radius: 12px;
            margin-top: 1rem;
            text-align: center;
            font-weight: 600;
            border: none;
        }

        .mobile-menu-divider {
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
            margin: 1rem 0;
        }

        .mobile-menu-btn.active .hamburger:nth-child(1) {
            transform: rotate(-45deg) translate(-5px, 6px);
        }

        .mobile-menu-btn.active .hamburger:nth-child(2) {
            opacity: 0;
        }

        .mobile-menu-btn.active .hamburger:nth-child(3) {
            transform: rotate(45deg) translate(-5px, -6px);
        }

    </style>
    <script>
        // Simple mobile menu toggle
        function createMobileMenu() {
            // Create mobile menu if it doesn't exist
            if (!document.getElementById('mobile-menu')) {
                const header = document.querySelector('header');
                const mobileMenu = document.createElement('div');
                mobileMenu.id = 'mobile-menu';
                mobileMenu.className = 'mobile-menu';
                mobileMenu.innerHTML = `
                    <div class="mobile-menu-content">
                        <div class="mobile-menu-header">
                            <div class="logo"><a href="index.html">Vivify</a></div>
                            <button class="mobile-menu-close" onclick="closeMobileMenu()">×</button>
                        </div>
                        <div class="mobile-menu-links">
                            <a href="index.html" class="mobile-menu-link">Home</a>
                            <a href="index.html#training" class="mobile-menu-link">Training Areas</a>
                            <a href="index.html#habits" class="mobile-menu-link">Habits & Challenges</a>
                            <a href="about.html" class="mobile-menu-link">About</a>
                            <a href="community.html" class="mobile-menu-link">Community</a>
                            <div class="mobile-menu-divider"></div>
                            <a href="login.html" class="mobile-menu-link">Login</a>
                            <a href="signup.html" class="mobile-menu-link mobile-cta">Start Training</a>
                        </div>
                    </div>
                `;
                header.appendChild(mobileMenu);
            }
            
            // Create mobile button if it doesn't exist
            if (!document.getElementById('mobile-menu-btn')) {
                const nav = document.querySelector('nav');
                const rightNav = nav.querySelector('.right-nav') || nav;
                const mobileBtn = document.createElement('button');
                mobileBtn.id = 'mobile-menu-btn';
                mobileBtn.className = 'mobile-menu-btn';
                mobileBtn.onclick = toggleMobileMenu;
                mobileBtn.innerHTML = `
                    <span class="hamburger"></span>
                    <span class="hamburger"></span>
                    <span class="hamburger"></span>
                `;
                rightNav.appendChild(mobileBtn);
            }
        }
        
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            const btn = document.getElementById('mobile-menu-btn');
            
            menu.classList.toggle('active');
            btn.classList.toggle('active');
            
            if (menu.classList.contains('active')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        }
        
        function closeMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            const btn = document.getElementById('mobile-menu-btn');
            
            menu.classList.remove('active');
            btn.classList.remove('active');
            document.body.style.overflow = '';
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', createMobileMenu);
        </script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        document.documentElement.classList.add('loaded');
    });
    window.addEventListener('load', function() {
        document.documentElement.classList.add('loaded');
    });
</script>
<script src="js/vivify-stats.js"></script>
<script src="js/leaderboard-system.js"></script>
</head>
<body>
    <div class="wrapper">
        <header>
            <nav>
                <div class="left-nav">
                    <div class="logo">
                        <a href="index.html" aria-label="Home Page"><h1>Vivify</h1></a>
                    </div>
                    <ul>
                        <li><a href="about.html" aria-label="About Us Page">About</a></li>
                        <li class="dropdown" id="categoryDropdown">
                            <a href="#" class="dropbtn" aria-label="Categories Dropdown">Training</a>
                            <div class="dropdown-content">
                                <a href="fitness.html" aria-label="Fitness Page">Fitness</a>
                                <a href="nutrition.html" aria-label="Nutrition Page">Nutrition</a>
                                <a href="focus-resilience.html" class="active" aria-label="Focus & Resilience Page">Focus & Resilience</a>
                                <a href="life-mastery.html" aria-label="Life Lessons Page">Life Mastery</a>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="right-nav">
                    <ul>
                        <li><a href="dashboard.html" id="dashboardLink" aria-label="Dashboard">Performance Hub</a></li>
                        <li><a href="profile.html" id="profileLink" aria-label="Profile Page">Profile</a></li>
                        <li><a href="#" id="logoutLink" aria-label="Logout">Logout</a></li>
                        <li><a href="login.html" id="loginLink" style="display: none;" aria-label="Login Page">Login</a></li>
                        <li><a href="signup.html" id="signupLink" style="display: none;" aria-label="Sign Up Page">Sign Up</a></li>
                    </ul>
                </div>
            </nav>
        </header>

        <!-- Hero Section -->
        <section class="compassion-hero">
            <h1>Self-Compassion Meditation Journey</h1>
            <p>Learn to treat yourself with the same kindness you would offer a good friend through our guided meditation series designed specifically for students.</p>
            <a href="#compassion-playlist" class="cta-button">Begin Your Journey</a>
        </section>

        <div class="content-container">
            <!-- Introduction -->
            <div class="intro-text">
                <p>
                    As students, you face unique pressures and challenges that can lead to self-criticism, perfectionism, and burnout. Self-compassion—the practice of treating yourself with kindness and understanding—is a powerful antidote to these challenges. This meditation series will guide you through a progressive journey to develop self-compassion skills that support your academic success and personal wellbeing.
                </p>
            </div>

            <!-- Benefits Section -->
            <h2 class="section-title">Benefits of Self-Compassion Practice</h2>
            <div class="benefits-container">
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3>Resilience to Setbacks</h3>
                    <p>Self-compassion provides emotional resources to bounce back from academic disappointments and failures with greater ease.</p>
                </div>

                <div class="benefit-card">
                    <div class="benefit-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h3>Reduced Anxiety</h3>
                    <p>Studies show that self-compassion practices significantly reduce academic anxiety, test anxiety, and performance pressure.</p>
                </div>

                <div class="benefit-card">
                    <div class="benefit-icon">
                        <i class="fas fa-seedling"></i>
                    </div>
                    <h3>Increased Motivation</h3>
                    <p>Contrary to common belief, self-compassion enhances motivation through encouragement rather than self-criticism.</p>
                </div>

                <div class="benefit-card">
                    <div class="benefit-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <h3>Healthier Relationships</h3>
                    <p>When you're kinder to yourself, you naturally extend more compassion and understanding to others around you.</p>
                </div>
            </div>

            <!-- What is Self-Compassion Section -->
            <div class="info-section">
                <h2>Understanding Self-Compassion</h2>
                
                <p>Self-compassion is not self-pity, self-indulgence, or making excuses. It's a healthy, balanced approach to your struggles that recognizes your shared humanity with others. According to Dr. Kristin Neff, a pioneering researcher in this field, self-compassion consists of three core components:</p>
                
                <div class="three-components">
                    <div class="component-card">
                        <h3><i class="fas fa-heart"></i> Self-Kindness</h3>
                        <p>Being warm and understanding toward yourself when you suffer, fail, or feel inadequate, rather than ignoring your pain or criticizing yourself.</p>
                    </div>
                    
                    <div class="component-card">
                        <h3><i class="fas fa-globe"></i> Common Humanity</h3>
                        <p>Recognizing that suffering and personal inadequacy are part of the shared human experience – something that we all go through rather than being something that happens to "me" alone.</p>
                    </div>
                    
                    <div class="component-card">
                        <h3><i class="fas fa-eye"></i> Mindfulness</h3>
                        <p>Taking a balanced approach to negative emotions so that feelings are neither suppressed nor exaggerated. Observing thoughts and feelings with openness and clarity.</p>
                    </div>
                </div>
                
                <p>Each meditation in this series addresses one or more of these components, helping you build a comprehensive self-compassion practice.</p>
            </div>

            <!-- Playlist Section -->
            <div id="compassion-playlist" class="compassion-playlist-section">
                <h2 class="playlist-title">Self-Compassion Meditation Series</h2>
                <p class="playlist-description">This six-part meditation series guides you through a progressive journey of developing self-compassion skills. Each meditation builds upon the previous ones, but they can also be used independently based on your specific needs.</p>
                
                <div class="meditations-list">
                    <!-- Meditation 1 -->
                    <div class="meditation-item">
                        <div class="meditation-order">1</div>
                        <div class="meditation-details">
                            <h3>Mindful Awareness of Self-Criticism</h3>
                            <div class="meditation-meta">
                                <span><i class="fas fa-clock"></i> 10 minutes</span>
                                <span><i class="fas fa-headphones"></i> Dr. Emma Rodriguez</span>
                                <span><i class="fas fa-tag"></i> Beginner Friendly</span>
                            </div>
                            <p class="meditation-description">This foundational meditation helps you identify and observe your self-critical thoughts with curiosity rather than judgment. The first step in developing self-compassion is becoming aware of how you talk to yourself.</p>
                            <div class="meditation-tags">
                                <span class="meditation-tag">Mindfulness</span>
                                <span class="meditation-tag">Awareness</span>
                                <span class="meditation-tag">Inner Critic</span>
                            </div>
                        </div>
                        <div class="meditation-controls">
                            <button class="play-btn" onclick="playMeditation('Mindful Awareness of Self-Criticism', 'Dr. Emma Rodriguez', '10:00')">
                                <i class="fas fa-play"></i> Play
                            </button>
                        </div>
                    </div>
                    
                    <!-- Meditation 2 -->
                    <div class="meditation-item">
                        <div class="meditation-order">2</div>
                        <div class="meditation-details">
                            <h3>Cultivating Self-Kindness</h3>
                            <div class="meditation-meta">
                                <span><i class="fas fa-clock"></i> 15 minutes</span>
                                <span><i class="fas fa-headphones"></i> Amanda Torres</span>
                                <span><i class="fas fa-tag"></i> All Levels</span>
                            </div>
                            <p class="meditation-description">Learn to respond to your struggles with warmth and understanding through this guided meditation that introduces gentle self-soothing techniques and kind self-talk.</p>
                            <div class="meditation-tags">
                                <span class="meditation-tag">Self-Kindness</span>
                                <span class="meditation-tag">Comfort</span>
                                <span class="meditation-tag">Soothing Touch</span>
                            </div>
                        </div>
                        <div class="meditation-controls">
                            <button class="play-btn" onclick="playMeditation('Cultivating Self-Kindness', 'Amanda Torres', '15:00')">
                                <i class="fas fa-play"></i> Play
                            </button>
                        </div>
                    </div>
                    
                    <!-- Meditation 3 -->
                    <div class="meditation-item">
                        <div class="meditation-order">3</div>
                        <div class="meditation-details">
                            <h3>Common Humanity Connection</h3>
                            <div class="meditation-meta">
                                <span><i class="fas fa-clock"></i> 12 minutes</span>
                                <span><i class="fas fa-headphones"></i> Dr. James Wilson</span>
                                <span><i class="fas fa-tag"></i> All Levels</span>
                            </div>
                            <p class="meditation-description">This meditation helps you recognize that imperfection, failure, and struggle are part of the shared human experience. When you're struggling with academic challenges, this practice reduces feelings of isolation and shame.</p>
                            <div class="meditation-tags">
                                <span class="meditation-tag">Connection</span>
                                <span class="meditation-tag">Shared Experience</span>
                                <span class="meditation-tag">Belonging</span>
                            </div>
                        </div>
                        <div class="meditation-controls">
                            <button class="play-btn" onclick="playMeditation('Common Humanity Connection', 'Dr. James Wilson', '12:00')">
                                <i class="fas fa-play"></i> Play
                            </button>
                        </div>
                    </div>
                    
                    <!-- Meditation 4 -->
                    <div class="meditation-item">
                        <div class="meditation-order">4</div>
                        <div class="meditation-details">
                            <h3>Self-Compassion for Academic Stress</h3>
                            <div class="meditation-meta">
                                <span><i class="fas fa-clock"></i> 18 minutes</span>
                                <span><i class="fas fa-headphones"></i> Lisa Parker</span>
                                <span><i class="fas fa-tag"></i> Intermediate</span>
                            </div>
                            <p class="meditation-description">This specialized meditation addresses the unique pressures of student life—perfectionism, comparison, and academic expectations. Learn to apply self-compassion specifically to academic challenges.</p>
                            <div class="meditation-tags">
                                <span class="meditation-tag">Academic Stress</span>
                                <span class="meditation-tag">Perfectionism</span>
                                <span class="meditation-tag">Performance Anxiety</span>
                            </div>
                        </div>
                        <div class="meditation-controls">
                            <button class="play-btn" onclick="playMeditation('Self-Compassion for Academic Stress', 'Lisa Parker', '18:00')">
                                <i class="fas fa-play"></i> Play
                            </button>
                        </div>
                    </div>
                    
                    <!-- Meditation 5 -->
                    <div class="meditation-item">
                        <div class="meditation-order">5</div>
                        <div class="meditation-details">
                            <h3>Compassionate Motivation</h3>
                            <div class="meditation-meta">
                                <span><i class="fas fa-clock"></i> 15 minutes</span>
                                <span><i class="fas fa-headphones"></i> Dr. Maya Patel</span>
                                <span><i class="fas fa-tag"></i> Intermediate</span>
                            </div>
                            <p class="meditation-description">This meditation helps you cultivate motivation that comes from care and encouragement rather than criticism and fear. Learn to pursue your goals with kindness as your foundation.</p>
                            <div class="meditation-tags">
                                <span class="meditation-tag">Motivation</span>
                                <span class="meditation-tag">Goals</span>
                                <span class="meditation-tag">Encouragement</span>
                            </div>
                        </div>
                        <div class="meditation-controls">
                            <button class="play-btn" onclick="playMeditation('Compassionate Motivation', 'Dr. Maya Patel', '15:00')">
                                <i class="fas fa-play"></i> Play
                            </button>
                        </div>
                    </div>
                    
                    <!-- Meditation 6 -->
                    <div class="meditation-item">
                        <div class="meditation-order">6</div>
                        <div class="meditation-details">
                            <h3>Compassionate Friend Visualization</h3>
                            <div class="meditation-meta">
                                <span><i class="fas fa-clock"></i> 20 minutes</span>
                                <span><i class="fas fa-headphones"></i> Thomas Wright</span>
                                <span><i class="fas fa-tag"></i> All Levels</span>
                            </div>
                            <p class="meditation-description">This powerful visualization practice helps you access your innate capacity for compassion by imagining how you would support a good friend facing the same challenges you are experiencing.</p>
                            <div class="meditation-tags">
                                <span class="meditation-tag">Visualization</span>
                                <span class="meditation-tag">Friendship</span>
                                <span class="meditation-tag">Perspective Shift</span>
                            </div>
                        </div>
                        <div class="meditation-controls">
                            <button class="play-btn" onclick="playMeditation('Compassionate Friend Visualization', 'Thomas Wright', '20:00')">
                                <i class="fas fa-play"></i> Play
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="cta-section">
                    <a href="#" class="cta-button" onclick="playFullPlaylist()">Play Full Series</a>
                </div>
            </div>

            <!-- Testimonials Section -->
            <div class="testimonials-section">
                <h2 class="section-title">Student Experiences</h2>
                
                <div class="testimonial-card">
                    <p class="testimonial-text">I used to beat myself up over every mistake or imperfect grade. The Self-Compassion for Academic Stress meditation helped me recognize how harsh I was being to myself and find a more supportive approach. I still work hard and care about my grades, but now I don't fall apart when things aren't perfect.</p>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <img src="https://randomuser.me/api/portraits/women/33.jpg" alt="Student testimonial">
                        </div>
                        <div class="author-info">
                            <h4>Emily L.</h4>
                            <p>Pre-Med, Junior</p>
                        </div>
                    </div>
                </div>
                
                <div class="testimonial-card">
                    <p class="testimonial-text">As a first-generation college student, I constantly felt like I didn't belong and wasn't good enough. The Common Humanity meditation helped me realize that so many students feel this way—even ones who seem to have it all together. That realization alone reduced my anxiety tremendously.</p>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <img src="https://randomuser.me/api/portraits/men/52.jpg" alt="Student testimonial">
                        </div>
                        <div class="author-info">
                            <h4>Marcus T.</h4>
                            <p>Business Major, Sophomore</p>
                        </div>
                    </div>
                </div>
                
                <div class="testimonial-card">
                    <p class="testimonial-text">I was skeptical at first that self-compassion would just make me lazy or complacent. But after working with the Compassionate Motivation meditation for a few weeks, I've found the opposite is true. I'm actually more productive now because I'm not wasting energy on self-criticism and perfectionist paralysis.</p>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <img src="https://randomuser.me/api/portraits/women/74.jpg" alt="Student testimonial">
                        </div>
                        <div class="author-info">
                            <h4>Sophia R.</h4>
                            <p>Engineering, Senior</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Daily Exercises Section -->
            <div class="exercises-section">
                <h2>Quick Self-Compassion Practices for Daily Life</h2>
                <p>In addition to formal meditation practice, try incorporating these brief exercises into your daily student life:</p>
                
                <div class="exercises-list">
                    <div class="exercise-card">
                        <div class="exercise-icon">
                            <i class="fas fa-hand-holding-heart"></i>
                        </div>
                        <h3>Self-Compassion Break</h3>
                        <p>When you notice you're struggling, pause and place a hand on your heart. Acknowledge this is a moment of suffering, remember others also struggle, and offer yourself a phrase of kindness like "May I be kind to myself in this moment."</p>
                    </div>
                    
                    <div class="exercise-card">
                        <div class="exercise-icon">
                            <i class="fas fa-pen"></i>
                        </div>
                        <h3>Compassionate Letter</h3>
                        <p>Write a brief letter to yourself from the perspective of a wise, compassionate friend who knows your strengths and struggles. What would they say about this situation you're facing?</p>
                    </div>
                    
                    <div class="exercise-card">
                        <div class="exercise-icon">
                            <i class="fas fa-comments"></i>
                        </div>
                        <h3>Language Check-In</h3>
                        <p>Notice the language you use when talking to yourself about academic challenges. If it's harsh, ask: "Would I speak this way to a good friend?" If not, reframe it with more compassionate language.</p>
                    </div>
                    
                    <div class="exercise-card">
                        <div class="exercise-icon">
                            <i class="fas fa-lightbulb"></i>
                        </div>
                        <h3>Growth-Focused Reflection</h3>
                        <p>After receiving feedback or a grade, practice reflection that balances honest assessment with compassion: "What can I learn from this?" rather than "I'm not good enough."</p>
                    </div>
                </div>
            </div>

            <!-- Call to Action -->
            <div class="cta-section">
                <h2 class="section-title">Continue Your Self-Compassion Journey</h2>
                <div class="cta-buttons">
                    <a href="guided-meditations.html" class="cta-button">Explore All Meditations</a>
                    <a href="self-compassion.html" class="cta-button secondary">View Self-Compassion Resources</a>
                </div>
            </div>
        </div>

        <!-- Audio Player -->
        <div class="audio-player" id="audioPlayer">
            <div class="player-content">
                <div class="player-info">
                    <div class="player-details">
                        <h4 id="playerTitle">Meditation Title</h4>
                        <p id="playerInstructor">Instructor Name</p>
                    </div>
                </div>
                
                <div class="player-controls">
                    <button class="player-btn" id="prevBtn">
                        <i class="fas fa-step-backward"></i>
                    </button>
                    <button class="player-btn play-pause" id="playPauseBtn">
                        <i class="fas fa-play" id="playPauseIcon"></i>
                    </button>
                    <button class="player-btn" id="nextBtn">
                        <i class="fas fa-step-forward"></i>
                    </button>
                </div>
                
                <div class="player-timeline">
                    <div class="timeline-container">
                        <span class="time" id="currentTime">0:00</span>
                        <div class="timeline">
                            <div class="timeline-progress" id="timelineProgress"></div>
                        </div>
                        <span class="time" id="totalTime">0:00</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer>
            <p>&copy; 2025 Vivify. All rights reserved.</p>
            <ul class="footer-links">
                <li><a href="privacy.html" aria-label="Privacy Policy">Privacy Policy</a></li>
                <li><a href="terms.html" aria-label="Terms of Service">Terms of Service</a></li>
                <li><a href="contact.html" aria-label="Contact Us">Contact Us</a></li>
            </ul>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is logged in
            const isLoggedIn = localStorage.getItem('userLoggedIn') === 'true';
            
            // Update UI based on login status
            document.getElementById('loginLink').style.display = isLoggedIn ? 'none' : 'inline';
            document.getElementById('signupLink').style.display = isLoggedIn ? 'none' : 'inline';
            document.getElementById('logoutLink').style.display = isLoggedIn ? 'inline' : 'none';
            document.getElementById('profileLink').style.display = isLoggedIn ? 'inline' : 'none';
            document.getElementById('dashboardLink').style.display = isLoggedIn ? 'inline' : 'none';
            
            // Handle logout
            document.getElementById('logoutLink').addEventListener('click', function(e) {
                e.preventDefault();
                localStorage.removeItem('userLoggedIn');
                localStorage.removeItem('authToken');
                window.location.href = 'index.html';
            });
        });
        
        // Audio player functionality
        const audioPlayer = document.getElementById('audioPlayer');
        const playerTitle = document.getElementById('playerTitle');
        const playerInstructor = document.getElementById('playerInstructor');
        const currentTimeEl = document.getElementById('currentTime');
        const totalTimeEl = document.getElementById('totalTime');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const playPauseIcon = document.getElementById('playPauseIcon');
        const timelineProgress = document.getElementById('timelineProgress');
        const timeline = document.querySelector('.timeline');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        
        // Audio element
        const audioElement = new Audio();
        let isPlaying = false;
        let currentMeditationIndex = -1;
        
        // Create meditation playlist with audio sources
        const compassionMeditationPlaylist = [
            {
                title: 'Mindful Awareness of Self-Criticism',
                instructor: 'Dr. Emma Rodriguez',
                duration: '10:00',
                audioSrc: 'audio/meditations/mindful-awareness-self-criticism.mp3'
            },
            {
                title: 'Cultivating Self-Kindness',
                instructor: 'Amanda Torres',
                duration: '15:00',
                audioSrc: 'audio/meditations/cultivating-self-kindness.mp3'
            },
            {
                title: 'Common Humanity Connection',
                instructor: 'Dr. James Wilson',
                duration: '12:00',
                audioSrc: 'audio/meditations/common-humanity-connection.mp3'
            },
            {
                title: 'Self-Compassion for Academic Stress',
                instructor: 'Lisa Parker',
                duration: '18:00',
                audioSrc: 'audio/meditations/self-compassion-academic-stress.mp3'
            },
            {
                title: 'Compassionate Motivation',
                instructor: 'Dr. Maya Patel',
                duration: '15:00',
                audioSrc: 'audio/meditations/compassionate-motivation.mp3'
            },
            {
                title: 'Compassionate Friend Visualization',
                instructor: 'Thomas Wright',
                duration: '20:00',
                audioSrc: 'audio/meditations/compassionate-friend-visualization.mp3'
            }
        ];
        
        // Function to play meditation
        function playMeditation(title, instructor, duration, audioSrc, index = -1) {
            // Find the meditation in the playlist if not provided
            if (!audioSrc) {
                const meditation = compassionMeditationPlaylist.find(m => m.title === title && m.instructor === instructor);
                if (meditation) {
                    audioSrc = meditation.audioSrc;
                    // Find index in playlist if not provided
                    if (index === -1) {
                        index = compassionMeditationPlaylist.findIndex(m => m.title === title && m.instructor === instructor);
                    }
                }
            }
            
            // Show player
            audioPlayer.style.display = 'block';
            
            // Update player info
            playerTitle.textContent = title;
            playerInstructor.textContent = instructor;
            
            // Set total time from duration
            totalTimeEl.textContent = duration;
            
            // Set audio source if available
            if (audioSrc) {
                audioElement.src = audioSrc;
                audioElement.load();
            }
            
            // Save current index if provided
            if (index >= 0) {
                currentMeditationIndex = index;
            }
            
            // Play audio if source is available
            if (audioSrc) {
                const playPromise = audioElement.play();
                
                // Handle play promise (avoid uncaught promise errors)
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        // Playback started successfully
                        isPlaying = true;
                        playPauseIcon.className = 'fas fa-pause';
                    }).catch(error => {
                        // Auto-play was prevented
                        console.log("Playback was prevented:", error);
                        isPlaying = false;
                        playPauseIcon.className = 'fas fa-play';
                    });
                }
            } else {
                // If no audio source, just display information
                console.log("No audio source available for this meditation");
            }
            
            // Log meditation play to user history
            logMeditationPlay(title, instructor, duration);
        }
        
        // Play full playlist function
        function playFullPlaylist() {
            if (compassionMeditationPlaylist.length > 0) {
                const firstMeditation = compassionMeditationPlaylist[0];
                playMeditation(
                    firstMeditation.title,
                    firstMeditation.instructor,
                    firstMeditation.duration,
                    firstMeditation.audioSrc,
                    0
                );
            }
        }
        
        // Set up audio event listeners
        audioElement.addEventListener('timeupdate', () => {
            // Update current time
            const minutes = Math.floor(audioElement.currentTime / 60);
            const seconds = Math.floor(audioElement.currentTime % 60);
            currentTimeEl.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            // Update progress bar
            const progress = (audioElement.currentTime / audioElement.duration) * 100;
            timelineProgress.style.width = `${progress}%`;
        });
        
        audioElement.addEventListener('ended', () => {
            isPlaying = false;
            playPauseIcon.className = 'fas fa-play';
            
            // Auto-play next meditation if in playlist
            if (currentMeditationIndex >= 0 && currentMeditationIndex < compassionMeditationPlaylist.length - 1) {
                currentMeditationIndex++;
                const nextMeditation = compassionMeditationPlaylist[currentMeditationIndex];
                playMeditation(
                    nextMeditation.title, 
                    nextMeditation.instructor, 
                    nextMeditation.duration, 
                    nextMeditation.audioSrc, 
                    currentMeditationIndex
                );
            }
        });
        
        // Timeline seeking
        timeline.addEventListener('click', (e) => {
            const rect = timeline.getBoundingClientRect();
            const pos = (e.clientX - rect.left) / rect.width;
            audioElement.currentTime = pos * audioElement.duration;
        });
        
        // Toggle play/pause
        playPauseBtn.addEventListener('click', () => {
            if (audioElement.paused) {
                audioElement.play();
                isPlaying = true;
                playPauseIcon.className = 'fas fa-pause';
            } else {
                audioElement.pause();
                isPlaying = false;
                playPauseIcon.className = 'fas fa-play';
            }
        });
        
        // Previous and Next buttons
        prevBtn.addEventListener('click', () => {
            if (currentMeditationIndex > 0) {
                currentMeditationIndex--;
                const prevMeditation = compassionMeditationPlaylist[currentMeditationIndex];
                playMeditation(
                    prevMeditation.title, 
                    prevMeditation.instructor, 
                    prevMeditation.duration, 
                    prevMeditation.audioSrc, 
                    currentMeditationIndex
                );
            }
        });
        
        nextBtn.addEventListener('click', () => {
            if (currentMeditationIndex < compassionMeditationPlaylist.length - 1) {
                currentMeditationIndex++;
                const nextMeditation = compassionMeditationPlaylist[currentMeditationIndex];
                playMeditation(
                    nextMeditation.title, 
                    nextMeditation.instructor, 
                    nextMeditation.duration, 
                    nextMeditation.audioSrc, 
                    currentMeditationIndex
                );
            }
        });
        
        // Log meditation play to user history (for analytics)
        function logMeditationPlay(title, instructor, duration) {
            // Get existing log or create new array
            let meditationLog = JSON.parse(localStorage.getItem('meditationLog')) || [];
            
            // Add new entry
            meditationLog.push({
                title,
                instructor,
                duration,
                category: 'Self-Compassion',
                timestamp: Date.now()
            });
            
            // Save to localStorage (in a real application, this would be sent to a server)
            localStorage.setItem('meditationLog', JSON.stringify(meditationLog));
            
            // Update user stats if logged in
            if (localStorage.getItem('userLoggedIn') === 'true') {
                updateUserMeditationStats(duration);
            }
        }
        
        // Update user meditation statistics
        function updateUserMeditationStats(duration) {
            // Parse duration to minutes
            const durationMatch = duration.match(/^(\d+):(\d+)$/);
            if (durationMatch) {
                const minutes = parseInt(durationMatch[1]);
                const seconds = parseInt(durationMatch[2]) / 60;
                const totalMinutes = minutes + seconds;
                
                // Get existing stats or create new object
                let meditationStats = JSON.parse(localStorage.getItem('meditationStats')) || {
                    totalSessions: 0,
                    totalMinutes: 0,
                    lastSession: null,
                    streak: 0
                };
                
                // Update stats
                meditationStats.totalSessions += 1;
                meditationStats.totalMinutes += totalMinutes;
                meditationStats.lastSession = Date.now();
                
                // Check and update streak
                const lastSessionDate = meditationStats.lastSession ? new Date(meditationStats.lastSession) : null;
                const today = new Date();
                
                if (lastSessionDate) {
                    const lastDay = lastSessionDate.setHours(0, 0, 0, 0);
                    const todayDay = today.setHours(0, 0, 0, 0);
                    
                    // If last session was yesterday, increase streak
                    if ((todayDay - lastDay) === 86400000) {
                        meditationStats.streak += 1;
                    } 
                    // If last session was today, maintain streak
                    else if (todayDay === lastDay) {
                        // No change to streak
                    } 
                    // Otherwise, reset streak
                    else {
                        meditationStats.streak = 1;
                    }
                } else {
                    meditationStats.streak = 1;
                }
                
                // Save updated stats
                localStorage.setItem('meditationStats', JSON.stringify(meditationStats));
            }
        }
    </script>

<!-- PWA Scripts -->


<script>
// Additional PWA features for each page
document.addEventListener('DOMContentLoaded', function() {
    // Add PWA-specific styles
    if (window.matchMedia('(display-mode: standalone)').matches) {
        document.body.classList.add('pwa-mode');
        
        // Hide address bar on mobile when in PWA mode
        window.scrollTo(0, 1);
    }
    
    // Handle network status
    function updateOnlineStatus() {
        const statusElement = document.getElementById('network-status');
        if (statusElement) {
            if (navigator.onLine) {
                statusElement.textContent = 'Online';
                statusElement.className = 'online';
            } else {
                statusElement.textContent = 'Offline';
                statusElement.className = 'offline';
            }
        }
    }
    
    window.addEventListener('online', updateOnlineStatus);
    window.addEventListener('offline', updateOnlineStatus);
    updateOnlineStatus();
    
    // Add network status indicator if it doesn't exist
    if (!document.getElementById('network-status')) {
        const statusDiv = document.createElement('div');
        statusDiv.id = 'network-status';
        statusDiv.style.cssText = `
            position: fixed;
            top: 10px;
            left: 10px;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            z-index: 1000;
            transition: all 0.3s ease;
        `;
        document.body.appendChild(statusDiv);
        updateOnlineStatus();
    }
});
</script>
<script src="class-management.js"></script> <script src="js/flexible-mobile-nav.js"></script> </body>
</html>