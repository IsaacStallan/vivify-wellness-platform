<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stress Relief Meditation - Vivify</title>
    
    
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        footer {
            background-color: #000;
            color: white;
            text-align: center;
            padding: 2rem 0;
            width: 100%;
            margin-top: auto;
            border-top: 1px solid #333;
        }

        footer .footer-links {
            list-style: none;
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 1rem 0 0 0;
            padding: 0;
        }

        footer .footer-links a {
            color: #a0a0a0;
            text-decoration: none;
            transition: color 0.3s;
        }

        footer .footer-links a:hover {
            color: #f39c12;
        }

        .meditation-hero {
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            color: white;
            padding: 4rem 2rem;
            text-align: center;
            min-height: 60vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hero-content {
            max-width: 800px;
        }

        .meditation-hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .meditation-hero p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            opacity: 0.95;
        }

        .meditation-badge {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            padding: 0.5rem 1.5rem;
            border-radius: 25px;
            display: inline-block;
            margin-bottom: 2rem;
            font-weight: 500;
        }

        .content-section {
            max-width: 1000px;
            margin: 0 auto;
            padding: 3rem 2rem;
        }

        .meditation-benefits {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            border-radius: 15px;
            padding: 2rem;
            margin: 3rem 0;
            text-align: center;
        }

        .meditation-benefits h2 {
            color: #9b59b6;
            margin-bottom: 2rem;
            font-size: 2rem;
        }

        .benefits-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            display: block;
            font-size: 2.5rem;
            font-weight: bold;
            color: #9b59b6;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: #ecf0f1;
            font-size: 1rem;
        }

        .meditation-player {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border-radius: 20px;
            padding: 3rem 2rem;
            margin: 3rem 0;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(155, 89, 182, 0.2);
        }

        .floating-elements {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .stress-element {
            position: absolute;
            font-size: 1.5rem;
            animation: floatAway 10s infinite linear;
            opacity: 0;
            color: #9b59b6;
        }

        .stress-element:nth-child(1) { left: 15%; animation-delay: 0s; }
        .stress-element:nth-child(2) { left: 25%; animation-delay: 2s; }
        .stress-element:nth-child(3) { left: 35%; animation-delay: 4s; }
        .stress-element:nth-child(4) { left: 65%; animation-delay: 1s; }
        .stress-element:nth-child(5) { left: 75%; animation-delay: 3s; }
        .stress-element:nth-child(6) { left: 85%; animation-delay: 5s; }

        @keyframes floatAway {
            0% { 
                transform: translateY(100vh) scale(0.8); 
                opacity: 0; 
            }
            10% { 
                opacity: 1; 
            }
            90% { 
                opacity: 1; 
            }
            100% { 
                transform: translateY(-100px) scale(1.2); 
                opacity: 0; 
            }
        }

        .player-title {
            color: #9b59b6;
            font-size: 2rem;
            margin-bottom: 1rem;
            text-shadow: 0 2px 10px rgba(155, 89, 182, 0.3);
        }

        .duration-display {
            color: #bdc3c7;
            font-size: 1.1rem;
            margin-bottom: 2rem;
        }

        .stress-visualization {
            width: 200px;
            height: 200px;
            margin: 2rem auto;
            position: relative;
            border-radius: 50%;
            background: linear-gradient(45deg, #8e44ad, #9b59b6);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 50px rgba(155, 89, 182, 0.4);
            transition: all 0.5s ease;
        }

        .stress-visualization.active {
            transform: scale(1.1);
            box-shadow: 0 0 80px rgba(155, 89, 182, 0.6);
        }

        .relaxation-circle {
            width: 160px;
            height: 160px;
            border-radius: 50%;
            background: linear-gradient(45deg, #3498db, #2980b9);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            animation: relaxationPulse 4s ease-in-out infinite;
        }

        @keyframes relaxationPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .relaxation-icon {
            font-size: 3rem;
            color: white;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .stress-instruction {
            font-size: 1.3rem;
            font-weight: 400;
            color: #9b59b6;
            margin-top: 1.5rem;
            transition: color 0.5s ease;
        }

        .meditation-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .control-btn {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 5px 15px rgba(155, 89, 182, 0.3);
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(155, 89, 182, 0.4);
        }

        .control-btn.play {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .control-btn.pause {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .control-btn.reset {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
        }

        .meditation-script {
            background: #1a1a2e;
            border-radius: 15px;
            padding: 2rem;
            margin: 3rem 0;
            max-height: 350px;
            overflow-y: auto;
            border-left: 4px solid #9b59b6;
        }

        .script-section {
            margin-bottom: 2rem;
            opacity: 0.5;
            transition: opacity 0.5s ease;
        }

        .script-section.active {
            opacity: 1;
            color: #f4f6f7;
        }

        .script-section h4 {
            color: #9b59b6;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .progress-bar {
            background: #333;
            height: 6px;
            border-radius: 3px;
            margin: 2rem 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #9b59b6, #3498db);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 3px;
        }

        .time-display {
            display: flex;
            justify-content: space-between;
            color: #aaa;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .stress-techniques {
            background: #222;
            border-radius: 15px;
            padding: 2rem;
            margin: 3rem 0;
        }

        .techniques-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .technique-card {
            background: #333;
            padding: 1.5rem;
            border-radius: 10px;
            border-left: 4px solid #9b59b6;
        }

        .technique-card h4 {
            color: #f39c12;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .technique-card ul {
            padding-left: 1.5rem;
        }

        .technique-card li {
            margin-bottom: 0.5rem;
        }

        .tips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .tip-category {
            background: rgba(255, 255, 255, 0.05);
            padding: 1.5rem;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tip-category h4 {
            color: #9b59b6;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .related-resources {
            background: #1a1a1a;
            border-radius: 15px;
            padding: 2rem;
            margin: 3rem 0;
            border: 1px solid #333;
        }

        .resource-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .resource-card {
            background: #2a2a2a;
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .resource-card:hover {
            transform: translateY(-5px);
        }

        .resource-card i {
            font-size: 2rem;
            color: #9b59b6;
            margin-bottom: 1rem;
        }

        .resource-card h4 {
            color: #f39c12;
            margin-bottom: 1rem;
        }

        .cta-button {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: #000;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-block;
            margin-top: 1rem;
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(243, 156, 18, 0.4);
        }

        .back-link {
            background: transparent;
            color: #9b59b6;
            border: 2px solid #9b59b6;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-block;
            margin: 2rem 0;
        }

        .back-link:hover {
            background: #9b59b6;
            color: white;
        }

        .meditation-instructions {
            background: rgba(155, 89, 182, 0.1);
            border: 1px solid #9b59b6;
            border-radius: 10px;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .meditation-instructions h3 {
            color: #9b59b6;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        @media (max-width: 768px) {
            .meditation-hero h1 {
                font-size: 2.2rem;
            }
            
            .meditation-controls {
                flex-direction: column;
                align-items: center;
            }
            
            .control-btn {
                width: 200px;
                justify-content: center;
            }
            
            .stress-visualization {
                width: 150px;
                height: 150px;
            }
            
            .relaxation-circle {
                width: 120px;
                height: 120px;
            }
            
            .relaxation-icon {
                font-size: 2rem;
            }
            
            .content-section {
                padding: 2rem 1rem;
            }
        }
    @media (max-width: 768px) {
            /* FORCE hide all desktop navigation */
            nav ul,
            nav li,
            .left-nav ul,
            .right-nav ul,
            .left-nav li,
            .right-nav li,
            .left-nav > ul,
            .right-nav > ul {
                display: none !important;
                visibility: hidden !important;
            }
            
            /* Ensure nav container works properly */
            nav {
                display: flex !important;
                justify-content: space-between !important;
                align-items: center !important;
                padding: 1rem !important;
                flex-wrap: nowrap !important;
            }
            
            /* Keep logo visible */
            .logo,
            .logo a {
                display: block !important;
                visibility: visible !important;
                font-size: 1.5rem !important;
                white-space: nowrap !important;
            }
            
            /* Force show mobile button if it exists */
            .mobile-menu-btn {
                display: flex !important;
                visibility: visible !important;
                flex-direction: column;
                background: none;
                border: none;
                cursor: pointer;
                padding: 0.5rem;
                z-index: 1001;
            }
            
            /* Mobile button styles */
            .mobile-menu-btn .hamburger {
                width: 25px;
                height: 3px;
                background: #ffffff;
                margin: 3px 0;
                transition: 0.3s;
                border-radius: 2px;
            }
            
            /* Ensure right-nav container shows mobile button */
            .right-nav {
                display: flex !important;
                align-items: center !important;
                visibility: visible !important;
            }
        }

        /* If no mobile button exists, add this emergency button */
        @media (max-width: 768px) {
            nav:not(:has(.mobile-menu-btn))::after {
                content: "☰";
                position: absolute;
                right: 1rem;
                top: 50%;
                transform: translateY(-50%);
                color: white;
                font-size: 1.5rem;
                cursor: pointer;
            }
        }
        .mobile-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(10, 10, 10, 0.98);
            backdrop-filter: blur(20px);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .mobile-menu.active {
            opacity: 1;
            visibility: visible;
        }

        .mobile-menu-content {
            height: 100%;
            display: flex;
            flex-direction: column;
            padding: 2rem;
        }

        .mobile-menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 2rem;
        }

        .mobile-menu-close {
            background: none;
            border: none;
            color: #ffffff;
            font-size: 2rem;
            cursor: pointer;
            padding: 0.5rem;
        }

        .mobile-menu-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .mobile-menu-link {
            color: #ffffff;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 500;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }

        .mobile-menu-link:hover {
            color: #f39c12;
            padding-left: 1rem;
        }

        .mobile-menu-link.mobile-cta {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: #000 !important;
            border-radius: 12px;
            margin-top: 1rem;
            text-align: center;
            font-weight: 600;
            border: none;
        }

        .mobile-menu-divider {
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
            margin: 1rem 0;
        }

        .mobile-menu-btn.active .hamburger:nth-child(1) {
            transform: rotate(-45deg) translate(-5px, 6px);
        }

        .mobile-menu-btn.active .hamburger:nth-child(2) {
            opacity: 0;
        }

        .mobile-menu-btn.active .hamburger:nth-child(3) {
            transform: rotate(45deg) translate(-5px, -6px);
        }

        /* Add this to your CSS to ensure mobile elements are hidden on desktop */
        @media (min-width: 769px) {
            .mobile-menu,
            .mobile-menu-btn {
                display: none !important;
                visibility: hidden !important;
            }
        }
    </style>
    <script>
        // Authentication-aware mobile menu
function createMobileMenu() {
    // Only create mobile menu on mobile devices
    if (window.innerWidth > 768) {
        return; // Exit early on desktop
    }
    
    // Check authentication status
    const authToken = localStorage.getItem('authToken');
    const userLoggedIn = localStorage.getItem('userLoggedIn');
    const isLoggedIn = !!(authToken || userLoggedIn === 'true');
    const username = localStorage.getItem('username') || 'User';
    
    console.log('Auth check:', { authToken, userLoggedIn, isLoggedIn, username }); // Debug log
    
    // Create mobile menu if it doesn't exist
    if (!document.getElementById('mobile-menu')) {
        const header = document.querySelector('header');
        const mobileMenu = document.createElement('div');
        mobileMenu.id = 'mobile-menu';
        mobileMenu.className = 'mobile-menu';
        
        // Generate auth-specific menu items
        let authMenuItems = '';
        if (isLoggedIn) {
            authMenuItems = `
                <div class="mobile-menu-divider"></div>
                <div class="mobile-user-info">
                    <span style="color: #f39c12; font-weight: 600; padding: 0.5rem 0;">Welcome, ${username}!</span>
                </div>
                <a href="dashboard.html" class="mobile-menu-link mobile-cta">Dashboard</a>
                <a href="profile.html" class="mobile-menu-link">Profile</a>
                <a href="#" class="mobile-menu-link" onclick="handleMobileLogout(event)">Logout</a>
            `;
        } else {
            authMenuItems = `
                <div class="mobile-menu-divider"></div>
                <a href="login.html" class="mobile-menu-link">Login</a>
                <a href="signup.html" class="mobile-menu-link mobile-cta">Start Training</a>
            `;
        }
        
        mobileMenu.innerHTML = `
            <div class="mobile-menu-content">
                <div class="mobile-menu-header">
                    <div class="logo"><a href="index.html">Vivify</a></div>
                    <button class="mobile-menu-close" onclick="closeMobileMenu()">×</button>
                </div>
                <div class="mobile-menu-links">
                    <a href="index.html" class="mobile-menu-link">Home</a>
                    <a href="index.html#training" class="mobile-menu-link">Training Areas</a>
                    <a href="habits-tracker.html" class="mobile-menu-link">Habits</a>
                    <a href="challenges.html" class="mobile-menu-link">Challenges</a>
                    <a href="about.html" class="mobile-menu-link">About</a>
                    <a href="community.html" class="mobile-menu-link">Community</a>
                    ${authMenuItems}
                </div>
            </div>
        `;
        header.appendChild(mobileMenu);
    }
    
    // Create mobile button if it doesn't exist
    if (!document.getElementById('mobile-menu-btn')) {
        const nav = document.querySelector('nav');
        const rightNav = nav.querySelector('.right-nav') || nav;
        const mobileBtn = document.createElement('button');
        mobileBtn.id = 'mobile-menu-btn';
        mobileBtn.className = 'mobile-menu-btn';
        mobileBtn.onclick = toggleMobileMenu;
        mobileBtn.innerHTML = `
            <span class="hamburger"></span>
            <span class="hamburger"></span>
            <span class="hamburger"></span>
        `;
        rightNav.appendChild(mobileBtn);
    }
}

function handleMobileLogout(event) {
    event.preventDefault();
    if (confirm('Are you sure you want to logout?')) {
        // Clear all auth data
        localStorage.clear();
        
        // Close mobile menu
        closeMobileMenu();
        
        // Refresh the page to update UI
        window.location.reload();
    }
}

function toggleMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    const btn = document.getElementById('mobile-menu-btn');
    
    menu.classList.toggle('active');
    btn.classList.toggle('active');
    
    if (menu.classList.contains('active')) {
        document.body.style.overflow = 'hidden';
    } else {
        document.body.style.overflow = '';
    }
}

function closeMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    const btn = document.getElementById('mobile-menu-btn');
    
    menu.classList.remove('active');
    btn.classList.remove('active');
    document.body.style.overflow = '';
}

// Function to update mobile menu when auth state changes
function updateMobileMenuAuth() {
    const existingMenu = document.getElementById('mobile-menu');
    if (existingMenu) {
        existingMenu.remove();
    }
    createMobileMenu();
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', createMobileMenu);

// Listen for auth state changes (if you have an auth system that fires events)
window.addEventListener('authStateChanged', updateMobileMenuAuth);

// Export functions for external use
window.updateMobileMenuAuth = updateMobileMenuAuth;
window.handleMobileLogout = handleMobileLogout;
// Add this at the end of your mobile menu script
window.addEventListener('resize', function() {
    if (window.innerWidth > 768) {
        // Remove mobile elements on desktop
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileBtn = document.getElementById('mobile-menu-btn');
        
        if (mobileMenu) mobileMenu.remove();
        if (mobileBtn) mobileBtn.remove();
        
        // Reset body overflow
        document.body.style.overflow = '';
    } else if (window.innerWidth <= 768) {
        // Recreate mobile menu if switching to mobile
        const existingMenu = document.getElementById('mobile-menu');
        if (!existingMenu) {
            createMobileMenu();
        }
    }
});
        </script>

<!-- PWA Manifest -->
<link rel="manifest" href="/manifest.json">

<!-- iOS PWA Support -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="performance Hub">
<link rel="apple-touch-icon" href="/icons/icon-192x192.png">
<link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/icons/icon-180x180.png">

<!-- Microsoft Tiles -->
<meta name="msapplication-TileImage" content="/icons/icon-144x144.png">
<meta name="msapplication-TileColor" content="#f39c12">

<!-- Theme Color -->
<meta name="theme-color" content="#f39c12">

<!-- Viewport for PWA -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

<!-- Preload PWA installer script -->
<link rel="preload" href="/pwa-install.js" as="script">
<!-- CSS Loading Order Fix -->

<link rel="stylesheet" href="styles.css">

<!-- FOUC Prevention -->
<style>
    html { visibility: hidden; opacity: 0; }
    html.loaded { visibility: visible; opacity: 1; transition: opacity 0.3s ease; }
@media (max-width: 768px) {
            /* FORCE hide all desktop navigation */
            nav ul,
            nav li,
            .left-nav ul,
            .right-nav ul,
            .left-nav li,
            .right-nav li,
            .left-nav > ul,
            .right-nav > ul {
                display: none !important;
                visibility: hidden !important;
            }
            
            /* Ensure nav container works properly */
            nav {
                display: flex !important;
                justify-content: space-between !important;
                align-items: center !important;
                padding: 1rem !important;
                flex-wrap: nowrap !important;
            }
            
            /* Keep logo visible */
            .logo,
            .logo a {
                display: block !important;
                visibility: visible !important;
                font-size: 1.5rem !important;
                white-space: nowrap !important;
            }
            
            /* Force show mobile button if it exists */
            .mobile-menu-btn {
                display: flex !important;
                visibility: visible !important;
                flex-direction: column;
                background: none;
                border: none;
                cursor: pointer;
                padding: 0.5rem;
                z-index: 1001;
            }
            
            /* Mobile button styles */
            .mobile-menu-btn .hamburger {
                width: 25px;
                height: 3px;
                background: #ffffff;
                margin: 3px 0;
                transition: 0.3s;
                border-radius: 2px;
            }
            
            /* Ensure right-nav container shows mobile button */
            .right-nav {
                display: flex !important;
                align-items: center !important;
                visibility: visible !important;
            }
        }

        /* If no mobile button exists, add this emergency button */
        @media (max-width: 768px) {
            nav:not(:has(.mobile-menu-btn))::after {
                content: "☰";
                position: absolute;
                right: 1rem;
                top: 50%;
                transform: translateY(-50%);
                color: white;
                font-size: 1.5rem;
                cursor: pointer;
            }
        }
        .mobile-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(10, 10, 10, 0.98);
            backdrop-filter: blur(20px);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .mobile-menu.active {
            opacity: 1;
            visibility: visible;
        }

        .mobile-menu-content {
            height: 100%;
            display: flex;
            flex-direction: column;
            padding: 2rem;
        }

        .mobile-menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 2rem;
        }

        .mobile-menu-close {
            background: none;
            border: none;
            color: #ffffff;
            font-size: 2rem;
            cursor: pointer;
            padding: 0.5rem;
        }

        .mobile-menu-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .mobile-menu-link {
            color: #ffffff;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 500;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }

        .mobile-menu-link:hover {
            color: #f39c12;
            padding-left: 1rem;
        }

        .mobile-menu-link.mobile-cta {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: #000 !important;
            border-radius: 12px;
            margin-top: 1rem;
            text-align: center;
            font-weight: 600;
            border: none;
        }

        .mobile-menu-divider {
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
            margin: 1rem 0;
        }

        .mobile-menu-btn.active .hamburger:nth-child(1) {
            transform: rotate(-45deg) translate(-5px, 6px);
        }

        .mobile-menu-btn.active .hamburger:nth-child(2) {
            opacity: 0;
        }

        .mobile-menu-btn.active .hamburger:nth-child(3) {
            transform: rotate(45deg) translate(-5px, -6px);
        }

        /* Add this to your CSS to ensure mobile elements are hidden on desktop */
        @media (min-width: 769px) {
            .mobile-menu,
            .mobile-menu-btn {
                display: none !important;
                visibility: hidden !important;
            }
        }
    </style>
    <script>
        // Authentication-aware mobile menu
function createMobileMenu() {
    // Only create mobile menu on mobile devices
    if (window.innerWidth > 768) {
        return; // Exit early on desktop
    }
    
    // Check authentication status
    const authToken = localStorage.getItem('authToken');
    const userLoggedIn = localStorage.getItem('userLoggedIn');
    const isLoggedIn = !!(authToken || userLoggedIn === 'true');
    const username = localStorage.getItem('username') || 'User';
    
    console.log('Auth check:', { authToken, userLoggedIn, isLoggedIn, username }); // Debug log
    
    // Create mobile menu if it doesn't exist
    if (!document.getElementById('mobile-menu')) {
        const header = document.querySelector('header');
        const mobileMenu = document.createElement('div');
        mobileMenu.id = 'mobile-menu';
        mobileMenu.className = 'mobile-menu';
        
        // Generate auth-specific menu items
        let authMenuItems = '';
        if (isLoggedIn) {
            authMenuItems = `
                <div class="mobile-menu-divider"></div>
                <div class="mobile-user-info">
                    <span style="color: #f39c12; font-weight: 600; padding: 0.5rem 0;">Welcome, ${username}!</span>
                </div>
                <a href="dashboard.html" class="mobile-menu-link mobile-cta">Dashboard</a>
                <a href="profile.html" class="mobile-menu-link">Profile</a>
                <a href="#" class="mobile-menu-link" onclick="handleMobileLogout(event)">Logout</a>
            `;
        } else {
            authMenuItems = `
                <div class="mobile-menu-divider"></div>
                <a href="login.html" class="mobile-menu-link">Login</a>
                <a href="signup.html" class="mobile-menu-link mobile-cta">Start Training</a>
            `;
        }
        
        mobileMenu.innerHTML = `
            <div class="mobile-menu-content">
                <div class="mobile-menu-header">
                    <div class="logo"><a href="index.html">Vivify</a></div>
                    <button class="mobile-menu-close" onclick="closeMobileMenu()">×</button>
                </div>
                <div class="mobile-menu-links">
                    <a href="index.html" class="mobile-menu-link">Home</a>
                    <a href="index.html#training" class="mobile-menu-link">Training Areas</a>
                    <a href="habits-tracker.html" class="mobile-menu-link">Habits</a>
                    <a href="challenges.html" class="mobile-menu-link">Challenges</a>
                    <a href="about.html" class="mobile-menu-link">About</a>
                    <a href="community.html" class="mobile-menu-link">Community</a>
                    ${authMenuItems}
                </div>
            </div>
        `;
        header.appendChild(mobileMenu);
    }
    
    // Create mobile button if it doesn't exist
    if (!document.getElementById('mobile-menu-btn')) {
        const nav = document.querySelector('nav');
        const rightNav = nav.querySelector('.right-nav') || nav;
        const mobileBtn = document.createElement('button');
        mobileBtn.id = 'mobile-menu-btn';
        mobileBtn.className = 'mobile-menu-btn';
        mobileBtn.onclick = toggleMobileMenu;
        mobileBtn.innerHTML = `
            <span class="hamburger"></span>
            <span class="hamburger"></span>
            <span class="hamburger"></span>
        `;
        rightNav.appendChild(mobileBtn);
    }
}

function handleMobileLogout(event) {
    event.preventDefault();
    if (confirm('Are you sure you want to logout?')) {
        // Clear all auth data
        localStorage.clear();
        
        // Close mobile menu
        closeMobileMenu();
        
        // Refresh the page to update UI
        window.location.reload();
    }
}

function toggleMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    const btn = document.getElementById('mobile-menu-btn');
    
    menu.classList.toggle('active');
    btn.classList.toggle('active');
    
    if (menu.classList.contains('active')) {
        document.body.style.overflow = 'hidden';
    } else {
        document.body.style.overflow = '';
    }
}

function closeMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    const btn = document.getElementById('mobile-menu-btn');
    
    menu.classList.remove('active');
    btn.classList.remove('active');
    document.body.style.overflow = '';
}

// Function to update mobile menu when auth state changes
function updateMobileMenuAuth() {
    const existingMenu = document.getElementById('mobile-menu');
    if (existingMenu) {
        existingMenu.remove();
    }
    createMobileMenu();
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', createMobileMenu);

// Listen for auth state changes (if you have an auth system that fires events)
window.addEventListener('authStateChanged', updateMobileMenuAuth);

// Export functions for external use
window.updateMobileMenuAuth = updateMobileMenuAuth;
window.handleMobileLogout = handleMobileLogout;
// Add this at the end of your mobile menu script
window.addEventListener('resize', function() {
    if (window.innerWidth > 768) {
        // Remove mobile elements on desktop
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileBtn = document.getElementById('mobile-menu-btn');
        
        if (mobileMenu) mobileMenu.remove();
        if (mobileBtn) mobileBtn.remove();
        
        // Reset body overflow
        document.body.style.overflow = '';
    } else if (window.innerWidth <= 768) {
        // Recreate mobile menu if switching to mobile
        const existingMenu = document.getElementById('mobile-menu');
        if (!existingMenu) {
            createMobileMenu();
        }
    }
});
        </script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        document.documentElement.classList.add('loaded');
    });
    window.addEventListener('load', function() {
        document.documentElement.classList.add('loaded');
    });
</script>
<script src="js/vivify-stats.js"></script>
<script src="js/leaderboard-system.js"></script>
</head>
<body>
    <div class="wrapper">
        <header>
            <nav>
                <div class="left-nav">
                    <div class="logo">
                        <a href="index.html" aria-label="Home Page"><h1>Vivify</h1></a>
                    </div>
                    <ul>
                        <li><a href="about.html" aria-label="About Us Page">About</a></li>
                        <li class="dropdown" id="categoryDropdown">
                            <a href="#" class="dropbtn" aria-label="Categories Dropdown">Training</a>
                            <div class="dropdown-content">
                                <a href="fitness.html" aria-label="Fitness Page">Fitness</a>
                                <a href="nutrition.html" aria-label="Nutrition Page">Nutrition</a>
                                <a href="focus-resilience.html" class="active" aria-label="Focus & Resilience Page">Focus & Resilience</a>
                                <a href="life-mastery.html" aria-label="Life Lessons Page">Life Mastery</a>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="right-nav">
                    <ul>
                        <li><a href="dashboard.html" id="dashboardLink" aria-label="Dashboard">Performance Hub</a></li>
                        <li><a href="profile.html" id="profileLink" aria-label="Profile Page">Profile</a></li>
                        <li><a href="#" id="logoutLink" aria-label="Logout">Logout</a></li>
                        <li><a href="login.html" id="loginLink" style="display: none;" aria-label="Login Page">Login</a></li>
                        <li><a href="signup.html" id="signupLink" style="display: none;" aria-label="Sign Up Page">Sign Up</a></li>
                    </ul>
                </div>
            </nav>
        </header>

        <main>
            <!-- Hero Section -->
            <section class="meditation-hero">
                <div class="hero-content">
                    <div class="meditation-badge">
                        <i class="fas fa-leaf"></i> Stress Relief
                    </div>
                    <h1>Stress Relief Meditation</h1>
                    <p>Release tension, calm your mind, and find inner peace. Perfect for students dealing with academic pressure, exam stress, or the overwhelming demands of school life.</p>
                </div>
            </section>

            <div class="content-section">
                <!-- Benefits Section -->
                <div class="meditation-benefits">
                    <h2><i class="fas fa-spa"></i> Benefits of Stress Relief Meditation</h2>
                    <p>Scientific research demonstrates that regular stress relief meditation can significantly reduce cortisol levels and improve overall wellbeing.</p>
                    <div class="benefits-stats">
                        <div class="stat-item">
                            <span class="stat-number">68%</span>
                            <div class="stat-label">Reduction in Stress Levels</div>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">42%</span>
                            <div class="stat-label">Improved Sleep Quality</div>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">35%</span>
                            <div class="stat-label">Better Focus & Concentration</div>
                        </div>
                    </div>
                </div>

                <!-- Meditation Player -->
                <div class="meditation-player">
                    <div class="floating-elements">
                        <div class="stress-element">💨</div>
                        <div class="stress-element">🍃</div>
                        <div class="stress-element">✨</div>
                        <div class="stress-element">🌿</div>
                        <div class="stress-element">💙</div>
                        <div class="stress-element">🕊️</div>
                    </div>
                    
                    <h2 class="player-title">15-Minute Stress Relief Meditation</h2>
                    <div class="duration-display">Duration: 15:00 minutes</div>
                    
                    <div class="stress-visualization" id="stressVisualization">
                        <div class="relaxation-circle" id="relaxationCircle">
                            <div class="relaxation-icon" id="relaxationIcon">🧘‍♀️</div>
                        </div>
                    </div>
                    
                    <div class="stress-instruction" id="stressInstruction">Prepare to Release Stress</div>

                    <div class="meditation-controls">
                        <button class="control-btn play" id="playBtn">
                            <i class="fas fa-play"></i> Start Meditation
                        </button>
                        <button class="control-btn pause" id="pauseBtn" style="display: none;">
                            <i class="fas fa-pause"></i> Pause
                        </button>
                        <button class="control-btn reset" id="resetBtn">
                            <i class="fas fa-redo"></i> Reset
                        </button>
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    
                    <div class="time-display">
                        <span id="currentTime">0:00</span>
                        <span>15:00</span>
                    </div>
                </div>

                <!-- Meditation Script -->
                <div class="meditation-script" id="meditationScript">
                    <h3 style="color: #9b59b6; text-align: center; margin-bottom: 2rem;">
                        <i class="fas fa-scroll"></i> Stress Relief Meditation Script
                    </h3>
                    
                    <div class="script-section active" data-time="0">
                        <h4>Welcome & Settling (0:00 - 2:30)</h4>
                        <p>Welcome to this stress relief meditation. Find a comfortable position where you can fully relax. Whether you've had a challenging day at school, are feeling overwhelmed by assignments, or just need a mental break, this is your time to unwind.</p>
                        <p>Close your eyes and take a slow, deep breath in through your nose... and slowly exhale through your mouth, letting go of any tension you've been carrying. Allow yourself to arrive fully in this moment of peace.</p>
                    </div>

                    <div class="script-section" data-time="150">
                        <h4>Body Tension Release (2:30 - 5:30)</h4>
                        <p>Let's begin by scanning your body for areas of tension. Start with your face - notice if you're holding stress in your forehead, around your eyes, or in your jaw. Gently soften these areas.</p>
                        <p>Feel your shoulders. Many students carry stress here from hunching over desks or carrying heavy backpacks. Let your shoulders drop away from your ears. Release your arms, your hands, unclenching any fists you might be making.</p>
                        <p>Notice your back, your stomach. Breathe into any tight spots and let them soften with each exhale. Your legs, your feet - let everything become heavy and relaxed.</p>
                    </div>

                    <div class="script-section" data-time="330">
                        <h4>Stress Release Visualization (5:30 - 9:00)</h4>
                        <p>Now imagine your stress as a dark cloud that has been following you around. See it clearly - all your worries about grades, social situations, future plans, or family expectations. This cloud has been weighing you down.</p>
                        <p>With each exhale, imagine this cloud getting lighter and lighter. The wind is beginning to blow it away, piece by piece. Watch as your stress dissolves into the air, leaving you feeling lighter and more at peace.</p>
                        <p>In place of that dark cloud, imagine warm, golden sunlight surrounding you. This light represents calm, clarity, and confidence. Let it fill every cell of your body with peace and relaxation.</p>
                    </div>

                    <div class="script-section" data-time="540">
                        <h4>Calm Breathing Practice (9:00 - 12:00)</h4>
                        <p>Now let's practice a simple breathing technique you can use anytime you feel stressed. Breathe in slowly for four counts... hold for four counts... and exhale for six counts. This longer exhale activates your body's relaxation response.</p>
                        <p>Continue this pattern: In for four... hold for four... out for six. With each breath, you're training your nervous system to stay calm and centered, even when life gets hectic.</p>
                        <p>Remember, you always have your breath as an anchor. No matter what's happening around you - difficult tests, social drama, or family stress - you can return to this calm breathing to find your center.</p>
                    </div>

                    <div class="script-section" data-time="720">
                        <h4>Integration & Closing (12:00 - 15:00)</h4>
                        <p>As we finish this practice, take a moment to appreciate yourself for taking this time to care for your Focus & Resilience. This isn't selfish - it's necessary. A calm, centered mind will serve you better in everything you do.</p>
                        <p>Set an intention to carry this sense of peace with you. When you feel stress building up again, remember you can always return to your breath and this feeling of calm.</p>
                        <p>Take three more deep breaths, wiggle your fingers and toes, and when you're ready, slowly open your eyes. You are calm, you are capable, and you can handle whatever comes your way.</p>
                    </div>
                </div>

                <!-- Stress Management Techniques -->
                <div class="stress-techniques">
                    <h2 style="color: #9b59b6; text-align: center; margin-bottom: 2rem;">
                        <i class="fas fa-toolbox"></i> Stress Management Techniques for Students
                    </h2>
                    <div class="techniques-grid">
                        <div class="technique-card">
                            <h4><i class="fas fa-lungs"></i> Quick Breathing Exercises</h4>
                            <ul>
                                <li>4-7-8 breathing: Inhale for 4, hold for 7, exhale for 8</li>
                                <li>Box breathing: 4 counts in, hold 4, out 4, hold 4</li>
                                <li>Belly breathing: Focus on expanding your diaphragm</li>
                                <li>Use these between classes or before exams</li>
                            </ul>
                        </div>

                        <div class="technique-card">
                            <h4><i class="fas fa-clock"></i> Time Management</h4>
                            <ul>
                                <li>Break large assignments into smaller, manageable tasks</li>
                                <li>Use the Pomodoro technique: 25 minutes focused work, 5 minute break</li>
                                <li>Prioritize tasks using urgent vs important matrix</li>
                                <li>Set realistic deadlines and build in buffer time</li>
                            </ul>
                        </div>

                        <div class="technique-card">
                            <h4><i class="fas fa-brain"></i> Mindful Study Habits</h4>
                            <ul>
                                <li>Take regular breaks to prevent mental fatigue</li>
                                <li>Practice single-tasking instead of multitasking</li>
                                <li>Create a calm, organized study environment</li>
                                <li>Use mindful transitions between subjects</li>
                            </ul>
                        </div>

                        <div class="technique-card">
                            <h4><i class="fas fa-heart"></i> Self-Care Strategies</h4>
                            <ul>
                                <li>Maintain regular sleep schedule (8-9 hours for teens)</li>
                                <li>Stay hydrated and eat nutritious meals</li>
                                <li>Make time for physical activity and fresh air</li>
                                <li>Connect with friends and family regularly</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Quick Tips -->
                <h2 style="color: #9b59b6; text-align: center; margin-bottom: 2rem;">
                    <i class="fas fa-lightbulb"></i> Daily Stress Prevention Tips
                </h2>
                <div class="tips-grid">
                    <div class="tip-category">
                        <h4><i class="fas fa-sun"></i> Morning Routine</h4>
                        <p>Start your day with 5 minutes of deep breathing or meditation. Set positive intentions and avoid checking social media first thing.</p>
                    </div>

                    <div class="tip-category">
                        <h4><i class="fas fa-school"></i> During School</h4>
                        <p>Take mindful breaks between classes. Practice gratitude for three things each day. Use positive self-talk instead of self-criticism.</p>
                    </div>

                    <div class="tip-category">
                        <h4><i class="fas fa-moon"></i> Evening Wind-Down</h4>
                        <p>Create a relaxing bedtime routine. Reflect on accomplishments from the day. Prepare tomorrow's priorities to clear your mind.</p>
                    </div>

                    <div class="tip-category">
                        <h4><i class="fas fa-exclamation-triangle"></i> When Overwhelmed</h4>
                        <p>Use the STOP technique: Stop what you're doing, Take a breath, Observe your thoughts, Proceed with awareness and intention.</p>
                    </div>
                </div>

                <!-- Instructions -->
                <div class="meditation-instructions">
                    <h3><i class="fas fa-info-circle"></i> How to Use This Meditation</h3>
                    <p><strong>Best Times:</strong> After stressful situations, before bed, or during study breaks</p>
                    <p><strong>Setting:</strong> Find a quiet, comfortable space where you won't be disturbed</p>
                    <p><strong>Frequency:</strong> Daily practice provides best results, but even occasional use helps</p>
                    <p><strong>Tip:</strong> Try this meditation during exam periods or when feeling overwhelmed by school pressure</p>
                </div>

                <!-- Related Resources -->
                <div class="related-resources">
                    <h2 style="color: #9b59b6; text-align: center; margin-bottom: 1rem;">
                        <i class="fas fa-link"></i> Related Resources
                    </h2>
                    <p style="text-align: center; margin-bottom: 2rem;">Explore more tools to support your stress management and mental wellbeing</p>
                    <div class="resource-grid">
                        <div class="resource-card">
                            <i class="fas fa-moon"></i>
                            <h4>Sleep Meditation</h4>
                            <p>Improve sleep quality to better manage stress</p>
                            <a href="guided-meditation-sleep.html" class="cta-button">Try Sleep Meditation</a>
                        </div>

                        <div class="resource-card">
                            <i class="fas fa-eye"></i>
                            <h4>Focus Meditation</h4>
                            <p>Build concentration skills for better academic performance</p>
                            <a href="guided-meditation-focus.html" class="cta-button">Improve Focus</a>
                        </div>

                        <div class="resource-card">
                            <i class="fas fa-users"></i>
                            <h4>Social Confidence</h4>
                            <p>Reduce social anxiety and build confidence</p>
                            <a href="guided-meditation-social.html" class="cta-button">Build Confidence</a>
                        </div>

                        <div class="resource-card">
                            <i class="fas fa-leaf"></i>
                            <h4>All Meditations</h4>
                            <p>Browse our complete library of guided meditations</p>
                            <a href="guided-meditations.html" class="cta-button">View Library</a>
                        </div>
                    </div>
                </div>

                <div style="text-align: center;">
                    <a href="guided-meditations.html" class="back-link">
                        <i class="fas fa-arrow-left"></i> Back to All Meditations
                    </a>
                </div>
            </div>
        </main>

        <footer>
            <p>&copy; 2025 Vivify. All rights reserved.</p>
            <ul class="footer-links">
                <li><a href="privacy.html" aria-label="Privacy Policy">Privacy Policy</a></li>
                <li><a href="terms.html" aria-label="Terms of Service">Terms of Service</a></li>
                <li><a href="contact.html" aria-label="Contact Us">Contact Us</a></li>
            </ul>
        </footer>
    </div>

    <script>
        let meditationTimer;
        let currentTime = 0;
        let totalTime = 900; // 15 minutes in seconds
        let isPlaying = false;
        let currentSection = 0;

        const playBtn = document.getElementById('playBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const resetBtn = document.getElementById('resetBtn');
        const progressFill = document.getElementById('progressFill');
        const currentTimeDisplay = document.getElementById('currentTime');
        const stressVisualization = document.getElementById('stressVisualization');
        const relaxationCircle = document.getElementById('relaxationCircle');
        const relaxationIcon = document.getElementById('relaxationIcon');
        const stressInstruction = document.getElementById('stressInstruction');
        const scriptSections = document.querySelectorAll('.script-section');

        const instructions = [
            "Prepare to Release Stress",
            "Welcome & Settle In",
            "Release Body Tension", 
            "Visualize Stress Leaving",
            "Practice Calm Breathing",
            "Integration & Peace"
        ];

        const icons = ["🧘‍♀️", "🙏", "💆‍♀️", "🌬️", "🫁", "✨"];

        const sectionTimes = [0, 150, 330, 540, 720]; // Start times for each section

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function updateProgress() {
            const progress = (currentTime / totalTime) * 100;
            progressFill.style.width = `${progress}%`;
            currentTimeDisplay.textContent = formatTime(currentTime);
        }

        function updateVisualization() {
            // Update instruction text and icon based on time
            let instructionIndex = 0;
            for (let i = sectionTimes.length - 1; i >= 0; i--) {
                if (currentTime >= sectionTimes[i]) {
                    instructionIndex = i;
                    break;
                }
            }
            
            stressInstruction.textContent = instructions[instructionIndex];
            relaxationIcon.textContent = icons[instructionIndex];

            // Add pulsing effect during active meditation
            if (isPlaying) {
                stressVisualization.classList.add('active');
            } else {
                stressVisualization.classList.remove('active');
            }
        }

        function updateScript() {
            // Update active script section
            scriptSections.forEach((section, index) => {
                const sectionTime = parseInt(section.dataset.time);
                if (currentTime >= sectionTime && (index === scriptSections.length - 1 || currentTime < parseInt(scriptSections[index + 1].dataset.time))) {
                    section.classList.add('active');
                } else {
                    section.classList.remove('active');
                }
            });
        }

        function startMeditation() {
            if (!isPlaying) {
                isPlaying = true;
                playBtn.style.display = 'none';
                pauseBtn.style.display = 'flex';
                
                meditationTimer = setInterval(() => {
                    currentTime++;
                    updateProgress();
                    updateVisualization();
                    updateScript();
                    
                    if (currentTime >= totalTime) {
                        completeMeditation();
                    }
                }, 1000);
            }
        }

        function pauseMeditation() {
            if (isPlaying) {
                isPlaying = false;
                clearInterval(meditationTimer);
                playBtn.style.display = 'flex';
                pauseBtn.style.display = 'none';
                stressVisualization.classList.remove('active');
            }
        }

        function resetMeditation() {
            pauseMeditation();
            currentTime = 0;
            updateProgress();
            updateVisualization();
            updateScript();
            stressInstruction.textContent = instructions[0];
            relaxationIcon.textContent = icons[0];
        }

        function completeMeditation() {
            pauseMeditation();
            stressInstruction.textContent = "Meditation Complete! 🌟";
            stressVisualization.classList.remove('active');
            
            // Track completion for analytics/dashboard
            if (window.vivifyTracker) {
                window.vivifyTracker.trackMeditationComplete();
            }
            
            // Show completion message
            setTimeout(() => {
                alert("🎉 Excellent work! You've completed the Stress Relief Meditation. Take this sense of calm and peace with you throughout your day.");
            }, 1000);
        }

        // Event listeners
        playBtn.addEventListener('click', startMeditation);
        pauseBtn.addEventListener('click', pauseMeditation);
        resetBtn.addEventListener('click', resetMeditation);

        // Initialize
        updateProgress();
        updateVisualization();
        updateScript();

        // Page load tracking
        document.addEventListener('DOMContentLoaded', function() {
            if (window.vivifyTracker) {
                window.vivifyTracker.trackActivity('stress_meditation_visit', 'mental', 'Stress relief meditation page visited', 5);
            }
        });

        // Simple meditation audio simulation (replace with actual audio file)
        function playMeditationAudio() {
            // In a real implementation, you would load and play an actual audio file
            // For now, this is a placeholder for the meditation audio functionality
            console.log("Playing stress relief meditation audio...");
        }

        // Log meditation play to user history
        function logMeditationPlay() {
            const meditationData = {
                title: 'Stress Relief Meditation',
                instructor: 'Dr. Maya Thompson',
                duration: '15:00',
                timestamp: Date.now(),
                type: 'stress_relief'
            };
            
            // Store in local storage for dashboard tracking
            let meditationLog = JSON.parse(localStorage.getItem('meditationLog')) || [];
            meditationLog.push(meditationData);
            localStorage.setItem('meditationLog', JSON.stringify(meditationLog));
        }

        // Enhanced visualization effects
        function createFloatingElements() {
            const elements = document.querySelectorAll('.stress-element');
            elements.forEach((element, index) => {
                element.style.animationDelay = `${index * 2}s`;
            });
        }

        // Call on page load
        createFloatingElements();

        // Keyboard shortcuts for accessibility
        document.addEventListener('keydown', function(e) {
            if (e.code === 'Space') {
                e.preventDefault();
                if (isPlaying) {
                    pauseMeditation();
                } else {
                    startMeditation();
                }
            } else if (e.code === 'KeyR') {
                e.preventDefault();
                resetMeditation();
            }
        });

        // Add touch support for mobile
        let touchStartY = 0;
        stressVisualization.addEventListener('touchstart', function(e) {
            touchStartY = e.touches[0].clientY;
        });

        stressVisualization.addEventListener('touchend', function(e) {
            const touchEndY = e.changedTouches[0].clientY;
            const diff = touchStartY - touchEndY;
            
            if (Math.abs(diff) > 50) { // Swipe threshold
                if (diff > 0) {
                    // Swipe up - start meditation
                    if (!isPlaying) startMeditation();
                } else {
                    // Swipe down - pause meditation
                    if (isPlaying) pauseMeditation();
                }
            }
        });
    </script>

<!-- PWA Scripts -->


<script>
// Additional PWA features for each page
document.addEventListener('DOMContentLoaded', function() {
    // Add PWA-specific styles
    if (window.matchMedia('(display-mode: standalone)').matches) {
        document.body.classList.add('pwa-mode');
        
        // Hide address bar on mobile when in PWA mode
        window.scrollTo(0, 1);
    }
    
    // Handle network status
    function updateOnlineStatus() {
        const statusElement = document.getElementById('network-status');
        if (statusElement) {
            if (navigator.onLine) {
                statusElement.textContent = 'Online';
                statusElement.className = 'online';
            } else {
                statusElement.textContent = 'Offline';
                statusElement.className = 'offline';
            }
        }
    }
    
    window.addEventListener('online', updateOnlineStatus);
    window.addEventListener('offline', updateOnlineStatus);
    updateOnlineStatus();
    
    // Add network status indicator if it doesn't exist
    if (!document.getElementById('network-status')) {
        const statusDiv = document.createElement('div');
        statusDiv.id = 'network-status';
        statusDiv.style.cssText = `
            position: fixed;
            top: 10px;
            left: 10px;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            z-index: 1000;
            transition: all 0.3s ease;
        `;
        document.body.appendChild(statusDiv);
        updateOnlineStatus();
    }
});
</script>
<script src="class-management.js"></script> <script src="js/flexible-mobile-nav.js"></script> </body>
</html>