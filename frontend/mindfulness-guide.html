<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mindfulness Training - Vivify</title>
    
    <!-- Load fonts first -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Load icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Header */
        header {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        nav {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .left-nav {
            display: flex;
            align-items: center;
            gap: 3rem;
        }

        .logo a {
            font-size: 1.8rem;
            font-weight: 900;
            background: linear-gradient(135deg, #f39c12, #e67e22);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-decoration: none;
        }

        .left-nav ul, .right-nav ul {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .left-nav a, .right-nav a {
            color: #ffffff;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
        }

        .left-nav a:hover, .right-nav a:hover {
            color: #f39c12;
        }

        .left-nav a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(135deg, #f39c12, #e67e22);
            transition: width 0.3s ease;
        }

        .left-nav a:hover::after {
            width: 100%;
        }

        .cta-nav {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: #000 !important;
            padding: 0.75rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .cta-nav:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(243, 156, 18, 0.4);
            color: #000 !important;
        }

        .hidden {
            display: none !important;
        }

        /* Hero Section */
        .mindfulness-hero {
            background: 
                radial-gradient(circle at 20% 20%, rgba(243, 156, 18, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(230, 126, 34, 0.1) 0%, transparent 50%),
                linear-gradient(rgba(10, 10, 10, 0.8), rgba(10, 10, 10, 0.8)),
                url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
            padding: 150px 2rem 6rem;
            text-align: center;
            position: relative;
            min-height: 70vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hero-content {
            position: relative;
            z-index: 100;
            max-width: 900px;
            margin: 0 auto;
        }

        .mindfulness-badge {
            display: inline-block;
            background: rgba(243, 156, 18, 0.1);
            color: #f39c12;
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            border: 1px solid rgba(243, 156, 18, 0.2);
            font-size: 0.9rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 2rem;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .mindfulness-hero h1 {
            font-size: clamp(3rem, 6vw, 5rem);
            font-weight: 900;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, #ffffff 0%, #f39c12 50%, #e67e22 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.1;
        }

        .mindfulness-hero p {
            font-size: 1.25rem;
            max-width: 700px;
            margin: 0 auto 3rem;
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
        }

        .hero-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 1rem 2rem;
            border-radius: 50px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            display: inline-block;
            font-family: inherit;
            border: none;
            cursor: pointer;
        }

        .btn-primary {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: #000;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            border: 2px solid rgba(243, 156, 18, 0.3);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(243, 156, 18, 0.4);
        }

        /* Quick Start Section */
        .quick-start {
            padding: 6rem 2rem;
            background: rgba(255, 255, 255, 0.02);
        }

        .quick-start-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .section-heading {
            font-size: 2.5rem;
            font-weight: 800;
            text-align: center;
            margin-bottom: 3rem;
            background: linear-gradient(135deg, #ffffff, #f39c12);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .quick-techniques {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .technique-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .technique-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #f39c12, #e67e22);
            transform: scaleX(0);
            transition: transform 0.4s ease;
        }

        .technique-card:hover::before {
            transform: scaleX(1);
        }

        .technique-card:hover {
            transform: translateY(-10px);
            background: rgba(243, 156, 18, 0.05);
            border-color: rgba(243, 156, 18, 0.2);
        }

        .technique-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #f39c12, #e67e22);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            font-size: 2rem;
            color: #000;
        }

        .technique-card h3 {
            color: #ffffff;
            margin-bottom: 1rem;
            font-size: 1.3rem;
            font-weight: 700;
        }

        .technique-card p {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }

        .technique-duration {
            background: rgba(243, 156, 18, 0.2);
            color: #f39c12;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 1rem;
        }

        /* Interactive Session */
        .interactive-session {
            padding: 6rem 2rem;
        }

        .session-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .session-selector {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .session-tab {
            padding: 1rem 2rem;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .session-tab.active {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: #000;
            border-color: transparent;
        }

        .session-tab:hover:not(.active) {
            background: rgba(255, 255, 255, 0.2);
            color: #ffffff;
        }

        .session-interface {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 3rem;
            text-align: center;
            position: relative;
        }

        .session-interface::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #f39c12, #e67e22);
            border-radius: 24px 24px 0 0;
        }

        .session-content {
            display: none;
        }

        .session-content.active {
            display: block;
        }

        .breathing-visual {
            width: 200px;
            height: 200px;
            margin: 2rem auto;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(243, 156, 18, 0.3), rgba(243, 156, 18, 0.1));
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: all 4s ease;
        }

        .breathing-visual.inhale {
            transform: scale(1.3);
            background: radial-gradient(circle, rgba(243, 156, 18, 0.6), rgba(243, 156, 18, 0.3));
        }

        .breathing-visual.exhale {
            transform: scale(0.7);
            background: radial-gradient(circle, rgba(39, 174, 96, 0.6), rgba(39, 174, 96, 0.3));
        }

        .breathing-text {
            font-size: 1.5rem;
            font-weight: 600;
            color: #f39c12;
        }

        .focus-target {
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, #f39c12, #e67e22);
            border-radius: 50%;
            margin: 2rem auto;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #000;
            font-size: 2rem;
            position: relative;
            transition: all 0.3s ease;
        }

        .focus-target.active {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(243, 156, 18, 0.8);
        }

        .session-controls {
            margin-top: 2rem;
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: #000;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(243, 156, 18, 0.4);
        }

        .control-btn.secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .control-btn.secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .control-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .session-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            display: block;
            font-size: 2rem;
            font-weight: 900;
            color: #f39c12;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Guided Practices */
        .guided-practices {
            padding: 6rem 2rem;
            background: rgba(255, 255, 255, 0.02);
        }

        .practices-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .practices-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .practice-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.4s ease;
            position: relative;
        }

        .practice-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #f39c12, #e67e22);
            transform: scaleX(0);
            transition: transform 0.4s ease;
        }

        .practice-card:hover::before {
            transform: scaleX(1);
        }

        .practice-card:hover {
            transform: translateY(-10px);
            background: rgba(243, 156, 18, 0.05);
            border-color: rgba(243, 156, 18, 0.2);
        }

        .practice-image {
            height: 200px;
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .practice-overlay {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(243, 156, 18, 0.9);
            color: #000;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .practice-content {
            padding: 2rem;
        }

        .practice-content h3 {
            color: #ffffff;
            margin-bottom: 1rem;
            font-size: 1.3rem;
            font-weight: 700;
        }

        .practice-content p {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }

        .practice-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.6);
        }

        .difficulty-badge {
            background: rgba(243, 156, 18, 0.2);
            color: #f39c12;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .difficulty-badge.beginner {
            background: rgba(39, 174, 96, 0.2);
            color: #27ae60;
        }

        .difficulty-badge.intermediate {
            background: rgba(243, 156, 18, 0.2);
            color: #f39c12;
        }

        .difficulty-badge.advanced {
            background: rgba(231, 76, 60, 0.2);
            color: #e74c3c;
        }

        /* Progress Tracking */
        .progress-tracking {
            padding: 6rem 2rem;
        }

        .tracking-container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .progress-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .progress-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            transition: all 0.4s ease;
        }

        .progress-card:hover {
            transform: translateY(-10px);
            background: rgba(243, 156, 18, 0.05);
            border-color: rgba(243, 156, 18, 0.2);
        }

        .progress-icon {
            width: 60px;
            height: 60px;
            background: rgba(243, 156, 18, 0.2);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            font-size: 1.5rem;
            color: #f39c12;
        }

        .progress-value {
            font-size: 2.5rem;
            font-weight: 900;
            color: #f39c12;
            margin-bottom: 0.5rem;
        }

        .progress-label {
            color: rgba(255, 255, 255, 0.8);
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .progress-description {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        /* Footer */
        footer {
            background: #000000;
            padding: 3rem 2rem 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 2rem;
            list-style: none;
        }

        .footer-links a {
            color: rgba(255, 255, 255, 0.6);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: #f39c12;
        }

        .copyright {
            color: rgba(255, 255, 255, 0.4);
            font-size: 0.9rem;
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {

            .mindfulness-hero {
                padding: 120px 1rem 4rem;
            }

            .mindfulness-hero h1 {
                font-size: 2.5rem;
            }

            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }

            .session-selector {
                flex-direction: column;
                align-items: center;
            }

            .session-controls {
                flex-direction: column;
                align-items: center;
            }

            .control-btn {
                width: 100%;
                max-width: 250px;
            }

            .quick-techniques {
                grid-template-columns: 1fr;
            }

            .practices-grid {
                grid-template-columns: 1fr;
            }

            .progress-cards {
                grid-template-columns: 1fr;
            }

            .footer-links {
                flex-direction: column;
                gap: 1rem;
            }
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-up {
            animation: fadeInUp 0.8s ease-out forwards;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }
    @media (max-width: 768px) {
            /* FORCE hide all desktop navigation */
            nav ul,
            nav li,
            .left-nav ul,
            .right-nav ul,
            .left-nav li,
            .right-nav li,
            .left-nav > ul,
            .right-nav > ul {
                display: none !important;
                visibility: hidden !important;
            }
            
            /* Ensure nav container works properly */
            nav {
                display: flex !important;
                justify-content: space-between !important;
                align-items: center !important;
                padding: 1rem !important;
                flex-wrap: nowrap !important;
            }
            
            /* Keep logo visible */
            .logo,
            .logo a {
                display: block !important;
                visibility: visible !important;
                font-size: 1.5rem !important;
                white-space: nowrap !important;
            }
            
            /* Force show mobile button if it exists */
            .mobile-menu-btn {
                display: flex !important;
                visibility: visible !important;
                flex-direction: column;
                background: none;
                border: none;
                cursor: pointer;
                padding: 0.5rem;
                z-index: 1001;
            }
            
            /* Mobile button styles */
            .mobile-menu-btn .hamburger {
                width: 25px;
                height: 3px;
                background: #ffffff;
                margin: 3px 0;
                transition: 0.3s;
                border-radius: 2px;
            }
            
            /* Ensure right-nav container shows mobile button */
            .right-nav {
                display: flex !important;
                align-items: center !important;
                visibility: visible !important;
            }
        }

        /* If no mobile button exists, add this emergency button */
        @media (max-width: 768px) {
            nav:not(:has(.mobile-menu-btn))::after {
                content: "☰";
                position: absolute;
                right: 1rem;
                top: 50%;
                transform: translateY(-50%);
                color: white;
                font-size: 1.5rem;
                cursor: pointer;
            }
        }
        .mobile-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(10, 10, 10, 0.98);
            backdrop-filter: blur(20px);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .mobile-menu.active {
            opacity: 1;
            visibility: visible;
        }

        .mobile-menu-content {
            height: 100%;
            display: flex;
            flex-direction: column;
            padding: 2rem;
        }

        .mobile-menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 2rem;
        }

        .mobile-menu-close {
            background: none;
            border: none;
            color: #ffffff;
            font-size: 2rem;
            cursor: pointer;
            padding: 0.5rem;
        }

        .mobile-menu-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .mobile-menu-link {
            color: #ffffff;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 500;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }

        .mobile-menu-link:hover {
            color: #f39c12;
            padding-left: 1rem;
        }

        .mobile-menu-link.mobile-cta {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: #000 !important;
            border-radius: 12px;
            margin-top: 1rem;
            text-align: center;
            font-weight: 600;
            border: none;
        }

        .mobile-menu-divider {
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
            margin: 1rem 0;
        }

        .mobile-menu-btn.active .hamburger:nth-child(1) {
            transform: rotate(-45deg) translate(-5px, 6px);
        }

        .mobile-menu-btn.active .hamburger:nth-child(2) {
            opacity: 0;
        }

        .mobile-menu-btn.active .hamburger:nth-child(3) {
            transform: rotate(45deg) translate(-5px, -6px);
        }

    </style>
    <script>
        // Simple mobile menu toggle
        function createMobileMenu() {
            // Create mobile menu if it doesn't exist
            if (!document.getElementById('mobile-menu')) {
                const header = document.querySelector('header');
                const mobileMenu = document.createElement('div');
                mobileMenu.id = 'mobile-menu';
                mobileMenu.className = 'mobile-menu';
                mobileMenu.innerHTML = `
                    <div class="mobile-menu-content">
                        <div class="mobile-menu-header">
                            <div class="logo"><a href="index.html">Vivify</a></div>
                            <button class="mobile-menu-close" onclick="closeMobileMenu()">×</button>
                        </div>
                        <div class="mobile-menu-links">
                            <a href="index.html" class="mobile-menu-link">Home</a>
                            <a href="index.html#training" class="mobile-menu-link">Training Areas</a>
                            <a href="index.html#habits" class="mobile-menu-link">Habits & Challenges</a>
                            <a href="about.html" class="mobile-menu-link">About</a>
                            <a href="community.html" class="mobile-menu-link">Community</a>
                            <div class="mobile-menu-divider"></div>
                            <a href="login.html" class="mobile-menu-link">Login</a>
                            <a href="signup.html" class="mobile-menu-link mobile-cta">Start Training</a>
                        </div>
                    </div>
                `;
                header.appendChild(mobileMenu);
            }
            
            // Create mobile button if it doesn't exist
            if (!document.getElementById('mobile-menu-btn')) {
                const nav = document.querySelector('nav');
                const rightNav = nav.querySelector('.right-nav') || nav;
                const mobileBtn = document.createElement('button');
                mobileBtn.id = 'mobile-menu-btn';
                mobileBtn.className = 'mobile-menu-btn';
                mobileBtn.onclick = toggleMobileMenu;
                mobileBtn.innerHTML = `
                    <span class="hamburger"></span>
                    <span class="hamburger"></span>
                    <span class="hamburger"></span>
                `;
                rightNav.appendChild(mobileBtn);
            }
        }
        
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            const btn = document.getElementById('mobile-menu-btn');
            
            menu.classList.toggle('active');
            btn.classList.toggle('active');
            
            if (menu.classList.contains('active')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        }
        
        function closeMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            const btn = document.getElementById('mobile-menu-btn');
            
            menu.classList.remove('active');
            btn.classList.remove('active');
            document.body.style.overflow = '';
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', createMobileMenu);
        </script>
<script src="js/vivify-stats.js"></script>
<script src="js/leaderboard-system.js"></script>
</head>
<body>
    <div class="wrapper">
        <header>
            <nav>
                <div class="left-nav">
                    <div class="logo">
                        <a href="index.html">Vivify</a>
                    </div>
                    <ul>
                        <li><a href="index.html#training">Training Areas</a></li>
                        <li><a href="index.html#habits">Habits & Challenges</a></li>
                        <li><a href="about.html">About</a></li>
                    </ul>
                </div>
                <div class="right-nav">
                    <ul>
                        <li><a href="login.html" id="login-link">Login</a></li>
                        <li><a href="signup.html" class="cta-nav" id="signup-link">Start Training</a></li>
                        <!-- Logged in navigation -->
                        <li><a href="dashboard.html" id="dashboard-link" class="hidden">Dashboard</a></li>
                        <li><a href="profile.html" id="profile-link" class="hidden">Profile</a></li>
                        <li><a href="#" id="logout-link" class="hidden">Logout</a></li>
                    </ul>
                </div>
            </nav>
        </header>

        <!-- Hero Section -->
        <section class="mindfulness-hero fade-in-up">
            <div class="hero-content">
                <div class="mindfulness-badge">Mental Training</div>
                <h1>Mindfulness for Peak Performance</h1>
                <p>Develop laser focus, emotional regulation, and mental clarity with evidence-based mindfulness techniques designed for high-performing students. Build the mental edge that separates good from elite.</p>
                <div class="hero-buttons">
                    <a href="#quick-start" class="btn btn-primary">Start Training</a>
                    <a href="#guided-practices" class="btn btn-secondary">Explore Practices</a>
                </div>
            </div>
        </section>

        <!-- Quick Start Techniques -->
        <section class="quick-start fade-in-up" id="quick-start">
            <div class="quick-start-container">
                <h2 class="section-heading">Quick Performance Techniques</h2>
                <div class="quick-techniques">
                    <div class="technique-card" onclick="startQuickTechnique('focus-reset')">
                        <div class="technique-icon">
                            <i class="fas fa-bullseye"></i>
                        </div>
                        <div class="technique-duration">2 minutes</div>
                        <h3>Focus Reset</h3>
                        <p>Instantly clear mental fog and sharpen concentration before important tasks or exams.</p>
                    </div>
                    
                    <div class="technique-card" onclick="startQuickTechnique('stress-release')">
                        <div class="technique-icon">
                            <i class="fas fa-wind"></i>
                        </div>
                        <div class="technique-duration">3 minutes</div>
                        <h3>Stress Release</h3>
                        <p>Rapidly reduce tension and anxiety to return to peak performance state.</p>
                    </div>
                    
                    <div class="technique-card" onclick="startQuickTechnique('energy-boost')">
                        <div class="technique-icon">
                            <i class="fas fa-battery-full"></i>
                        </div>
                        <div class="technique-duration">5 minutes</div>
                        <h3>Energy Boost</h3>
                        <p>Revitalize your mind and body when feeling drained or unfocused.</p>
                    </div>
                    
                    <div class="technique-card" onclick="startQuickTechnique('confidence-builder')">
                        <div class="technique-icon">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div class="technique-duration">4 minutes</div>
                        <h3>Confidence Builder</h3>
                        <p>Boost self-assurance and mental toughness before presentations or challenges.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Interactive Session -->
        <section class="interactive-session fade-in-up">
            <div class="session-container">
                <h2 class="section-heading">Interactive Training Session</h2>
                
                <div class="session-selector">
                    <div class="session-tab active" onclick="switchSession('breathing')">Breathing</div>
                    <div class="session-tab" onclick="switchSession('focus')">Focus</div>
                    <div class="session-tab" onclick="switchSession('body-scan')">Body Scan</div>
                    <div class="session-tab" onclick="switchSession('visualization')">Visualization</div>
                </div>
                
                <div class="session-interface">
                    <div id="breathing-session" class="session-content active">
                        <h3>Tactical Breathing (4-4-6 Protocol)</h3>
                        <p>Master the breathing technique used by elite performers to optimize focus and calm under pressure.</p>
                        
                        <div class="breathing-visual" id="breathingVisual">
                            <div class="breathing-text" id="breathingText">Click Start to Begin</div>
                        </div>
                        
                        <div class="session-controls">
                            <button class="control-btn" id="startBreathing" onclick="startBreathingExercise()">Start Training</button>
                            <button class="control-btn secondary" id="stopBreathing" onclick="stopBreathingExercise()" style="display: none;">Stop</button>
                        </div>
                    </div>
                    
                    <div id="focus-session" class="session-content">
                        <h3>Attention Training</h3>
                        <p>Develop sustained attention and the ability to maintain focus despite distractions.</p>
                       
                       <div class="focus-target" id="focusTarget">
                           <i class="fas fa-dot-circle"></i>
                       </div>
                       
                       <p style="color: rgba(255, 255, 255, 0.8); margin-bottom: 2rem;">Focus on the center point. When your mind wanders, gently return attention to the target. Click the target to maintain focus.</p>
                       
                       <div class="session-controls">
                           <button class="control-btn" id="startFocus" onclick="startFocusTraining()">Start Training</button>
                           <button class="control-btn secondary" onclick="resetSession()">Reset</button>
                       </div>
                   </div>
                   
                   <div id="body-scan-session" class="session-content">
                       <h3>Performance Body Scan</h3>
                       <p>Rapidly assess and optimize your physical state for peak performance.</p>
                       
                       <div style="margin: 2rem 0; padding: 2rem; background: rgba(255, 255, 255, 0.05); border-radius: 12px;">
                           <p style="color: rgba(255, 255, 255, 0.8); text-align: center; margin-bottom: 1rem;">Systematically scan your body for tension, starting from your head and moving down to your toes.</p>
                           <div id="bodyScanProgress" style="text-align: center; color: #f39c12; font-weight: 600; font-size: 1.2rem;">Ready to begin</div>
                       </div>
                       
                       <div class="session-controls">
                           <button class="control-btn" id="startBodyScan" onclick="startBodyScan()">Start Scan</button>
                           <button class="control-btn secondary" onclick="resetSession()">Reset</button>
                       </div>
                   </div>
                   
                   <div id="visualization-session" class="session-content">
                       <h3>Success Visualization</h3>
                       <p>Mental rehearsal technique used by elite athletes and performers to optimize performance.</p>
                       
                       <div style="margin: 2rem 0; padding: 2rem; background: rgba(255, 255, 255, 0.05); border-radius: 12px;">
                           <div id="visualizationGuide" style="color: rgba(255, 255, 255, 0.8); text-align: center; font-size: 1.1rem; line-height: 1.6;">
                               Click start to begin guided visualization
                           </div>
                       </div>
                       
                       <div class="session-controls">
                           <button class="control-btn" id="startVisualization" onclick="startVisualization()">Start Visualization</button>
                           <button class="control-btn secondary" onclick="resetSession()">Reset</button>
                       </div>
                   </div>
                   
                   <div class="session-stats">
                       <div class="stat-item">
                           <span class="stat-value" id="sessionTime">0:00</span>
                           <span class="stat-label">Session Time</span>
                       </div>
                       <div class="stat-item">
                           <span class="stat-value" id="breathCount">0</span>
                           <span class="stat-label">Breath Cycles</span>
                       </div>
                       <div class="stat-item">
                           <span class="stat-value" id="focusScore">--</span>
                           <span class="stat-label">Focus Score</span>
                       </div>
                       <div class="stat-item">
                           <span class="stat-value" id="streakCount">0</span>
                           <span class="stat-label">Day Streak</span>
                       </div>
                   </div>
               </div>
           </div>
       </section>

       <!-- Guided Practices -->
       <section class="guided-practices fade-in-up" id="guided-practices">
           <div class="practices-container">
               <h2 class="section-heading">Guided Training Programs</h2>
               <div class="practices-grid">
                   <div class="practice-card">
                       <div class="practice-image" style="background-image: url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=600&q=80');">
                           <div class="practice-overlay">15 min</div>
                       </div>
                       <div class="practice-content">
                           <h3>Exam Performance Protocol</h3>
                           <p>Complete pre-exam routine to optimize focus, reduce anxiety, and enhance recall during tests.</p>
                           <div class="practice-meta">
                               <span>15 minutes</span>
                               <div class="difficulty-badge beginner">Beginner</div>
                           </div>
                           <button class="btn btn-primary" style="width: 100%;" onclick="startGuidedPractice('exam-protocol')">Start Training</button>
                       </div>
                   </div>
                   
                   <div class="practice-card">
                       <div class="practice-image" style="background-image: url('https://images.unsplash.com/photo-1499209974431-9dddcece7f88?auto=format&fit=crop&w=600&q=80');">
                           <div class="practice-overlay">20 min</div>
                       </div>
                       <div class="practice-content">
                           <h3>Deep Study Focus</h3>
                           <p>Extended concentration training for marathon study sessions and complex material mastery.</p>
                           <div class="practice-meta">
                               <span>20 minutes</span>
                               <div class="difficulty-badge intermediate">Intermediate</div>
                           </div>
                           <button class="btn btn-primary" style="width: 100%;" onclick="startGuidedPractice('study-focus')">Start Training</button>
                       </div>
                   </div>
                   
                   <div class="practice-card">
                       <div class="practice-image" style="background-image: url('https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?auto=format&fit=crop&w=600&q=80');">
                           <div class="practice-overlay">10 min</div>
                       </div>
                       <div class="practice-content">
                           <h3>Athletic Performance</h3>
                           <p>Pre-competition mental preparation for peak athletic performance and competitive edge.</p>
                           <div class="practice-meta">
                               <span>10 minutes</span>
                               <div class="difficulty-badge intermediate">Intermediate</div>
                           </div>
                           <button class="btn btn-primary" style="width: 100%;" onclick="startGuidedPractice('athletic-prep')">Start Training</button>
                       </div>
                   </div>
                   
                   <div class="practice-card">
                       <div class="practice-image" style="background-image: url('https://images.unsplash.com/photo-1545389336-cf090694435e?auto=format&fit=crop&w=600&q=80');">
                           <div class="practice-overlay">25 min</div>
                       </div>
                       <div class="practice-content">
                           <h3>Stress Resilience Building</h3>
                           <p>Advanced stress inoculation training to build mental toughness and emotional regulation.</p>
                           <div class="practice-meta">
                               <span>25 minutes</span>
                               <div class="difficulty-badge advanced">Advanced</div>
                           </div>
                           <button class="btn btn-primary" style="width: 100%;" onclick="startGuidedPractice('stress-resilience')">Start Training</button>
                       </div>
                   </div>
                   
                   <div class="practice-card">
                       <div class="practice-image" style="background-image: url('https://images.unsplash.com/photo-1517960413843-0aee8e2b3285?auto=format&fit=crop&w=600&q=80');">
                           <div class="practice-overlay">12 min</div>
                       </div>
                       <div class="practice-content">
                           <h3>Public Speaking Confidence</h3>
                           <p>Overcome presentation anxiety and build confidence for public speaking and presentations.</p>
                           <div class="practice-meta">
                               <span>12 minutes</span>
                               <div class="difficulty-badge beginner">Beginner</div>
                           </div>
                           <button class="btn btn-primary" style="width: 100%;" onclick="startGuidedPractice('speaking-confidence')">Start Training</button>
                       </div>
                   </div>
                   
                   <div class="practice-card">
                       <div class="practice-image" style="background-image: url('https://images.unsplash.com/photo-1506126613408-eca07ce68773?auto=format&fit=crop&w=600&q=80');">
                           <div class="practice-overlay">30 min</div>
                       </div>
                       <div class="practice-content">
                           <h3>Elite Recovery Protocol</h3>
                           <p>Comprehensive recovery practice for optimal sleep preparation and stress release.</p>
                           <div class="practice-meta">
                               <span>30 minutes</span>
                               <div class="difficulty-badge advanced">Advanced</div>
                           </div>
                           <button class="btn btn-primary" style="width: 100%;" onclick="startGuidedPractice('recovery-protocol')">Start Training</button>
                       </div>
                   </div>
               </div>
           </div>
       </section>

       <!-- Progress Tracking -->
       <section class="progress-tracking fade-in-up">
           <div class="tracking-container">
               <h2 class="section-heading">Your Training Progress</h2>
               <div class="progress-cards">
                   <div class="progress-card">
                       <div class="progress-icon">
                           <i class="fas fa-fire"></i>
                       </div>
                       <div class="progress-value" id="mindfulnessStreak">7</div>
                       <div class="progress-label">Day Streak</div>
                       <div class="progress-description">Consecutive days with mindfulness practice</div>
                   </div>
                   
                   <div class="progress-card">
                       <div class="progress-icon">
                           <i class="fas fa-clock"></i>
                       </div>
                       <div class="progress-value" id="totalMinutes">342</div>
                       <div class="progress-label">Total Minutes</div>
                       <div class="progress-description">Lifetime mindfulness training time</div>
                   </div>
                   
                   <div class="progress-card">
                       <div class="progress-icon">
                           <i class="fas fa-chart-line"></i>
                       </div>
                       <div class="progress-value" id="focusImprovement">+23%</div>
                       <div class="progress-label">Focus Improvement</div>
                       <div class="progress-description">Measured focus score increase</div>
                   </div>
                   
                   <div class="progress-card">
                       <div class="progress-icon">
                           <i class="fas fa-trophy"></i>
                       </div>
                       <div class="progress-value" id="achievementsUnlocked">12</div>
                       <div class="progress-label">Achievements</div>
                       <div class="progress-description">Mindfulness milestones reached</div>
                   </div>
               </div>
           </div>
       </section>

       <!-- Footer -->
       <footer>
           <div class="footer-content">
               <p class="copyright">&copy; 2025 Vivify. Building elite habits, one day at a time.</p>
               <ul class="footer-links">
                   <li><a href="privacy.html">Privacy Policy</a></li>
                   <li><a href="terms.html">Terms of Service</a></li>
                   <li><a href="contact.html">Contact Us</a></li>
                   <li><a href="about.html">About</a></li>
               </ul>
           </div>
       </footer>
   </div>

   <script>
       document.addEventListener('DOMContentLoaded', function() {
           // Check authentication status
           const isLoggedIn = localStorage.getItem('authToken') || localStorage.getItem('userLoggedIn') === 'true';
           
           // Update UI based on login status
           updateAuthState(isLoggedIn);
           
           // Load progress data
           loadProgressData();
           
           function updateAuthState(isLoggedIn) {
               document.getElementById('login-link').style.display = isLoggedIn ? 'none' : 'block';
               document.getElementById('signup-link').style.display = isLoggedIn ? 'none' : 'block';
               document.getElementById('dashboard-link').classList.toggle('hidden', !isLoggedIn);
               document.getElementById('profile-link').classList.toggle('hidden', !isLoggedIn);
               document.getElementById('logout-link').classList.toggle('hidden', !isLoggedIn);
           }
           
           // Logout functionality
           const logoutLink = document.getElementById('logout-link');
           if (logoutLink) {
               logoutLink.addEventListener('click', function(e) {
                   e.preventDefault();
                   localStorage.clear();
                   updateAuthState(false);
                   window.location.href = 'index.html';
               });
           }
       });

       // Session management
       let currentSession = 'breathing';
       let sessionTimer = null;
       let breathingTimer = null;
       let sessionStartTime = null;
       let breathCount = 0;
       let isSessionActive = false;
       let focusClicks = 0;
       let focusTimer = null;

       // Switch between different session types
       function switchSession(sessionType) {
           // Stop any active sessions first
           resetSession();
           
           // Update tab states
           document.querySelectorAll('.session-tab').forEach(tab => tab.classList.remove('active'));
           document.querySelector(`[onclick="switchSession('${sessionType}')"]`).classList.add('active');
           
           // Hide all session content
           document.querySelectorAll('.session-content').forEach(content => content.classList.remove('active'));
           
           // Show selected session content
           document.getElementById(`${sessionType}-session`).classList.add('active');
           
           currentSession = sessionType;
       }

       // Quick technique launcher with actual guided sessions
       function startQuickTechnique(technique) {
           const techniques = {
               'focus-reset': {
                   name: 'Focus Reset',
                   steps: [
                       'Sit comfortably and close your eyes',
                       'Take 3 deep breaths to center yourself',
                       'Notice any mental chatter or distractions',
                       'Breathe in clarity, breathe out mental fog',
                       'Set your intention for focused work',
                       'Open your eyes feeling clear and alert'
                   ],
                   duration: 2
               },
               'stress-release': {
                   name: 'Stress Release',
                   steps: [
                       'Find a comfortable position',
                       'Inhale for 4 counts, feeling tension',
                       'Hold for 4 counts, acknowledging stress',
                       'Exhale for 6 counts, releasing tension',
                       'Notice areas of physical tension',
                       'Continue breathing, letting go completely',
                       'Feel the calm spreading through your body'
                   ],
                   duration: 3
               },
               'energy-boost': {
                   name: 'Energy Boost',
                   steps: [
                       'Stand or sit with spine straight',
                       'Take 3 energizing breaths',
                       'Inhale vitality and alertness',
                       'Exhale fatigue and drowsiness',
                       'Visualize energy flowing through you',
                       'Move your body gently to activate',
                       'Set intention for productive energy'
                   ],
                   duration: 5
               },
               'confidence-builder': {
                   name: 'Confidence Builder',
                   steps: [
                       'Sit tall with confident posture',
                       'Recall a recent success or achievement',
                       'Feel the confidence in your body',
                       'Breathe in self-assurance',
                       'Visualize upcoming success',
                       'Anchor this feeling with deep breaths',
                       'Carry this confidence forward'
                   ],
                   duration: 4
               }
           };
           
           if (techniques[technique]) {
               startGuidedSequence(techniques[technique]);
           }
       }

       // Start guided sequence for quick techniques
       function startGuidedSequence(technique) {
           let currentStep = 0;
           const steps = technique.steps;
           const stepDuration = (technique.duration * 60 * 1000) / steps.length; // Duration per step in ms
           
           // Create modal or use existing session interface
           const sessionInterface = document.querySelector('.session-interface');
           const originalContent = sessionInterface.innerHTML;
           
           sessionInterface.innerHTML = `
               <h3>${technique.name}</h3>
               <div style="margin: 3rem 0; padding: 2rem; background: rgba(255, 255, 255, 0.05); border-radius: 12px; min-height: 150px; display: flex; align-items: center; justify-content: center;">
                   <p id="guidedStep" style="font-size: 1.2rem; text-align: center; color: #f39c12; line-height: 1.6;">${steps[0]}</p>
               </div>
               <div style="text-align: center; margin: 2rem 0;">
                   <div style="color: rgba(255, 255, 255, 0.7);">Step <span id="stepNumber">1</span> of ${steps.length}</div>
               </div>
               <div class="session-controls">
                   <button class="control-btn secondary" onclick="endGuidedSequence()">End Session</button>
               </div>
           `;
           
           // Scroll to session
           sessionInterface.scrollIntoView({ behavior: 'smooth', block: 'center' });
           
           const stepInterval = setInterval(() => {
               currentStep++;
               if (currentStep < steps.length) {
                   document.getElementById('guidedStep').textContent = steps[currentStep];
                   document.getElementById('stepNumber').textContent = currentStep + 1;
               } else {
                   clearInterval(stepInterval);
                   document.getElementById('guidedStep').textContent = 'Session complete! Well done.';
                   document.getElementById('stepNumber').textContent = steps.length;
                   setTimeout(() => {
                       sessionInterface.innerHTML = originalContent;
                       saveQuickSession(technique.name, technique.duration);
                   }, 3000);
               }
           }, stepDuration);
           
           // Store interval for cleanup
           window.currentGuidedInterval = stepInterval;
           window.originalSessionContent = originalContent;
       }

       function endGuidedSequence() {
           if (window.currentGuidedInterval) {
               clearInterval(window.currentGuidedInterval);
           }
           if (window.originalSessionContent) {
               document.querySelector('.session-interface').innerHTML = window.originalSessionContent;
           }
       }

       // Breathing exercise with proper timing
       function startBreathingExercise() {
           if (isSessionActive) return;
           
           isSessionActive = true;
           sessionStartTime = Date.now();
           breathCount = 0;
           
           document.getElementById('startBreathing').style.display = 'none';
           document.getElementById('stopBreathing').style.display = 'inline-block';
           
           startSessionTimer();
           startBreathingCycle();
       }

       function startBreathingCycle() {
           if (!isSessionActive) return;
           
           const visual = document.getElementById('breathingVisual');
           const text = document.getElementById('breathingText');
           
           // Inhale phase (4 seconds)
           text.textContent = 'Inhale (4)';
           visual.classList.add('inhale');
           visual.classList.remove('exhale');
           
           let countdown = 4;
           const inhaleTimer = setInterval(() => {
               countdown--;
               if (countdown > 0) {
                   text.textContent = `Inhale (${countdown})`;
               } else {
                   clearInterval(inhaleTimer);
                   if (!isSessionActive) return;
                   
                   // Hold phase (4 seconds)
                   text.textContent = 'Hold (4)';
                   visual.classList.remove('inhale');
                   
                   let holdCountdown = 4;
                   const holdTimer = setInterval(() => {
                       holdCountdown--;
                       if (holdCountdown > 0) {
                           text.textContent = `Hold (${holdCountdown})`;
                       } else {
                           clearInterval(holdTimer);
                           if (!isSessionActive) return;
                           
                           // Exhale phase (6 seconds)
                           text.textContent = 'Exhale (6)';
                           visual.classList.add('exhale');
                           
                           let exhaleCountdown = 6;
                           const exhaleTimer = setInterval(() => {
                               exhaleCountdown--;
                               if (exhaleCountdown > 0) {
                                   text.textContent = `Exhale (${exhaleCountdown})`;
                               } else {
                                   clearInterval(exhaleTimer);
                                   if (!isSessionActive) return;
                                   
                                   // Complete cycle
                                   visual.classList.remove('exhale');
                                   breathCount++;
                                   document.getElementById('breathCount').textContent = breathCount;
                                   
                                   // Brief pause before next cycle
                                   setTimeout(() => {
                                       if (isSessionActive) startBreathingCycle();
                                   }, 1000);
                               }
                           }, 1000);
                       }
                   }, 1000);
               }
           }, 1000);
       }

       function stopBreathingExercise() {
           isSessionActive = false;
           
           document.getElementById('startBreathing').style.display = 'inline-block';
           document.getElementById('stopBreathing').style.display = 'none';
           
           const visual = document.getElementById('breathingVisual');
           const text = document.getElementById('breathingText');
           
           visual.classList.remove('inhale', 'exhale');
           text.textContent = 'Session Complete';
           
           if (sessionTimer) {
               clearInterval(sessionTimer);
               sessionTimer = null;
           }
           
           // Save session data
           saveSessionData();
       }

       // Focus training with interaction
       function startFocusTraining() {
           const target = document.getElementById('focusTarget');
           const startBtn = document.getElementById('startFocus');
           
           focusClicks = 0;
           sessionStartTime = Date.now();
           
           startBtn.textContent = 'Training...';
           startBtn.disabled = true;
           target.classList.add('active');
           
           startSessionTimer();
           
           // Add click listener to target
           target.onclick = function() {
               focusClicks++;
               document.getElementById('focusScore').textContent = focusClicks;
               
               // Visual feedback
               this.style.transform = 'scale(1.2)';
               setTimeout(() => {
                   this.style.transform = 'scale(1.1)';
               }, 100);
           };
           
           // Auto-end after 2 minutes
           focusTimer = setTimeout(() => {
               endFocusTraining();
           }, 120000);
       }

       function endFocusTraining() {
           const target = document.getElementById('focusTarget');
           const startBtn = document.getElementById('startFocus');
           
           if (focusTimer) {
               clearTimeout(focusTimer);
               focusTimer = null;
           }
           
           startBtn.textContent = 'Start Training';
           startBtn.disabled = false;
           target.classList.remove('active');
           target.onclick = null;
           
           if (sessionTimer) {
               clearInterval(sessionTimer);
               sessionTimer = null;
           }
           
           saveSessionData();
       }

       // Body scan with guided progression
       function startBodyScan() {
           const progressElement = document.getElementById('bodyScanProgress');
           const startBtn = document.getElementById('startBodyScan');
           const bodyParts = [
               'Head and facial muscles',
               'Neck and jaw area', 
               'Shoulders and upper back',
               'Arms and hands',
               'Chest and breathing',
               'Core and abdomen',
               'Lower back and hips',
               'Thighs and knees',
               'Calves and feet'
           ];
           
           let currentPart = 0;
           sessionStartTime = Date.now();
           startBtn.disabled = true;
           startBtn.textContent = 'Scanning...';
           
           startSessionTimer();
           
           const scanInterval = setInterval(() => {
               if (currentPart < bodyParts.length) {
                   progressElement.textContent = `Scanning: ${bodyParts[currentPart]}`;
                   currentPart++;
               } else {
                   progressElement.textContent = 'Body scan complete - Notice the relaxation';
                   clearInterval(scanInterval);
                   startBtn.disabled = false;
                   startBtn.textContent = 'Start Scan';
                   
                   if (sessionTimer) {
                       clearInterval(sessionTimer);
                       sessionTimer = null;
                   }
                   
                   saveSessionData();
               }
           }, 4000);
       }

       // Visualization with guided steps
       function startVisualization() {
           const guideElement = document.getElementById('visualizationGuide');
           const startBtn = document.getElementById('startVisualization');
           const steps = [
               'Close your eyes and take three deep breaths',
               'Picture yourself in your upcoming challenge',
               'See yourself performing with confidence and skill',
               'Notice how calm and focused you feel',
               'Visualize achieving your desired outcome',
               'Feel the satisfaction of success',
               'Anchor this feeling with a deep breath',
               'Open your eyes, carrying this confidence forward'
           ];
           
           let currentStep = 0;
           sessionStartTime = Date.now();
           startBtn.disabled = true;
           startBtn.textContent = 'Visualizing...';
           
           startSessionTimer();
           
           const visualizationInterval = setInterval(() => {
               if (currentStep < steps.length) {
                   guideElement.textContent = steps[currentStep];
                   currentStep++;
               } else {
                   guideElement.textContent = 'Visualization complete - You are ready to succeed';
                   clearInterval(visualizationInterval);
                   startBtn.disabled = false;
                   startBtn.textContent = 'Start Visualization';
                   
                   if (sessionTimer) {
                       clearInterval(sessionTimer);
                       sessionTimer = null;
                   }
                   
                   saveSessionData();
               }
           }, 6000);
       }

       // Guided practice programs
       function startGuidedPractice(practiceType) {
           const practices = {
               'exam-protocol': {
                   name: 'Exam Performance Protocol',
                   description: 'A comprehensive 15-minute routine to optimize your mental state before exams',
                   url: 'meditation-timer.html?program=exam-protocol'
               },
               'study-focus': {
                   name: 'Deep Study Focus',
                   description: '20-minute extended concentration training for marathon study sessions',
                   url: 'meditation-timer.html?program=study-focus'
               },
               'athletic-prep': {
                   name: 'Athletic Performance',
                   description: '10-minute pre-competition mental preparation protocol',
                   url: 'meditation-timer.html?program=athletic-prep'
               },
               'stress-resilience': {
                   name: 'Stress Resilience Building',
                   description: '25-minute advanced training for mental toughness',
                   url: 'meditation-timer.html?program=stress-resilience'
               },
               'speaking-confidence': {
                   name: 'Public Speaking Confidence',
                   description: '12-minute confidence building for presentations',
                   url: 'meditation-timer.html?program=speaking-confidence'
               },
               'recovery-protocol': {
                   name: 'Elite Recovery Protocol',
                   description: '30-minute comprehensive recovery and sleep preparation',
                   url: 'meditation-timer.html?program=recovery-protocol'
               }
           };
           
           if (practices[practiceType]) {
               // Store the selected practice for the meditation timer
               localStorage.setItem('selectedPractice', JSON.stringify(practices[practiceType]));
               // Navigate to meditation timer with program
               window.location.href = practices[practiceType].url;
           }
       }

       // Session timer
       function startSessionTimer() {
           sessionTimer = setInterval(() => {
               if (sessionStartTime) {
                   const elapsed = Math.floor((Date.now() - sessionStartTime) / 1000);
                   const minutes = Math.floor(elapsed / 60);
                   const seconds = elapsed % 60;
                   document.getElementById('sessionTime').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
               }
           }, 1000);
       }

       // Reset session
       function resetSession() {
           isSessionActive = false;
           
           // Clear all timers
           if (sessionTimer) {
               clearInterval(sessionTimer);
               sessionTimer = null;
           }
           
           if (focusTimer) {
               clearTimeout(focusTimer);
               focusTimer = null;
           }
           
           // Reset all UI elements
           document.getElementById('sessionTime').textContent = '0:00';
           document.getElementById('breathCount').textContent = '0';
           
           // Reset breathing visual
           const visual = document.getElementById('breathingVisual');
           const text = document.getElementById('breathingText');
           if (visual && text) {
               visual.classList.remove('inhale', 'exhale');
               text.textContent = 'Click Start to Begin';
           }
           
           // Reset buttons
           document.getElementById('startBreathing').style.display = 'inline-block';
           document.getElementById('stopBreathing').style.display = 'none';
           
           // Reset focus training
           const focusBtn = document.getElementById('startFocus');
           if (focusBtn) {
               focusBtn.textContent = 'Start Training';
               focusBtn.disabled = false;
           }
           
           const focusTarget = document.getElementById('focusTarget');
           if (focusTarget) {
               focusTarget.classList.remove('active');
               focusTarget.onclick = null;
           }
           
           // Reset other sessions
           const bodyScanBtn = document.getElementById('startBodyScan');
           if (bodyScanBtn) {
               bodyScanBtn.textContent = 'Start Scan';
               bodyScanBtn.disabled = false;
           }
           
           const visualizationBtn = document.getElementById('startVisualization');
           if (visualizationBtn) {
               visualizationBtn.textContent = 'Start Visualization';
               visualizationBtn.disabled = false;
           }
           
           // Reset counters
           breathCount = 0;
           focusClicks = 0;
           sessionStartTime = null;
       }

       // Save session data
       function saveSessionData() {
           if (!sessionStartTime) return;
           
           const sessionData = {
               date: new Date().toISOString(),
               type: currentSession,
               duration: Math.floor((Date.now() - sessionStartTime) / 1000),
               breathCount: breathCount,
               focusClicks: focusClicks,
               timestamp: Date.now()
           };
           
           // Get existing sessions
           let mindfulnessSessions = JSON.parse(localStorage.getItem('mindfulnessSessions')) || [];
           mindfulnessSessions.push(sessionData);
           
           // Keep only last 100 sessions
           if (mindfulnessSessions.length > 100) {
               mindfulnessSessions = mindfulnessSessions.slice(-100);
           }
           
           localStorage.setItem('mindfulnessSessions', JSON.stringify(mindfulnessSessions));
           
           // Update progress
           updateProgressDisplay();
       }

       // Save quick session data
       function saveQuickSession(name, duration) {
           const sessionData = {
               date: new Date().toISOString(),
               type: 'quick-technique',
               name: name,
               duration: duration * 60, // Convert minutes to seconds
               timestamp: Date.now()
           };
           
           let mindfulnessSessions = JSON.parse(localStorage.getItem('mindfulnessSessions')) || [];
           mindfulnessSessions.push(sessionData);
           
           if (mindfulnessSessions.length > 100) {
               mindfulnessSessions = mindfulnessSessions.slice(-100);
           }
           
           localStorage.setItem('mindfulnessSessions', JSON.stringify(mindfulnessSessions));
           updateProgressDisplay();
       }

       // Load and display progress data
       function loadProgressData() {
           const sessions = JSON.parse(localStorage.getItem('mindfulnessSessions')) || [];
           
           // Calculate streak
           const streak = calculateStreak(sessions);
           document.getElementById('mindfulnessStreak').textContent = streak;
           document.getElementById('streakCount').textContent = streak;
           
           // Calculate total minutes
           const totalSeconds = sessions.reduce((sum, session) => sum + session.duration, 0);
           const totalMinutes = Math.floor(totalSeconds / 60);
           document.getElementById('totalMinutes').textContent = totalMinutes;
           
           // Calculate focus improvement (based on actual data)
           const recentSessions = sessions.filter(s => s.type === 'focus').slice(-10);
           const avgFocusScore = recentSessions.length > 0 ? 
               Math.round(recentSessions.reduce((sum, s) => sum + (s.focusClicks || 0), 0) / recentSessions.length) : 0;
           
           const focusImprovement = Math.min(avgFocusScore * 2, 50);
           document.getElementById('focusImprovement').textContent = `+${focusImprovement}%`;
           document.getElementById('focusScore').textContent = Math.max(70 + focusImprovement, 100);
           
           // Calculate achievements
           const achievements = Math.floor(sessions.length / 5) + Math.floor(streak / 7) + Math.floor(totalMinutes / 60);
           document.getElementById('achievementsUnlocked').textContent = Math.min(achievements, 25);
       }

       function calculateStreak(sessions) {
           if (sessions.length === 0) return 0;
           
           const today = new Date();
           today.setHours(0, 0, 0, 0);
           let streak = 0;
           let currentDate = new Date(today);
           
           // Check if there's a session today or yesterday (to account for current day)
           const hasRecentSession = sessions.some(session => {
               const sessionDate = new Date(session.date);
               sessionDate.setHours(0, 0, 0, 0);
               const diffDays = Math.floor((today - sessionDate) / (1000 * 60 * 60 * 24));
               return diffDays <= 1;
           });
           
           if (!hasRecentSession) return 0;
           
           // Count consecutive days
           for (let i = 0; i < 30; i++) {
               const dateString = currentDate.toDateString();
               const hasSessionOnDate = sessions.some(session => 
                   new Date(session.date).toDateString() === dateString
               );
               
               if (hasSessionOnDate) {
                   streak++;
               } else if (streak > 0) {
                   break;
               }
               
               currentDate.setDate(currentDate.getDate() - 1);
           }
           
           return streak;
       }

       function updateProgressDisplay() {
           loadProgressData();
       }

       // Header background on scroll
       window.addEventListener('scroll', function() {
           const header = document.querySelector('header');
           if (window.scrollY > 100) {
               header.style.background = 'rgba(10, 10, 10, 0.98)';
           } else {
               header.style.background = 'rgba(10, 10, 10, 0.95)';
           }
       });

       // Add scroll animations
       const observerOptions = {
           threshold: 0.1,
           rootMargin: '0px 0px -50px 0px'
       };
       
       const observer = new IntersectionObserver((entries) => {
           entries.forEach(entry => {
               if (entry.isIntersecting) {
                   entry.target.style.opacity = '1';
                   entry.target.style.transform = 'translateY(0)';
               }
           });
       }, observerOptions);
       
       // Observe all fade-in elements
       document.querySelectorAll('.fade-in-up').forEach(el => {
           el.style.opacity = '0';
           el.style.transform = 'translateY(30px)';
           el.style.transition = 'opacity 0.8s ease, transform 0.8s ease';
           observer.observe(el);
       });
   </script>
<script src="js/flexible-mobile-nav.js"></script> </body>
</html>